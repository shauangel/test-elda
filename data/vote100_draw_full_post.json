[{"link": "https://stackoverflow.com/questions/23720875/how-to-draw-a-rectangle-around-a-region-of-interest-in-python", "question": {"id": "23720875", "title": "How to draw a rectangle around a region of interest in python", "content": "<p>I'm having trouble with <code>import cv</code> in my python code.</p>\n<p>My issue is I need to draw a rectangle around regions of interest in an image.\nHow can this be done in python? I'm doing object detection and would like to draw a rectangle around the objects I believe I've found in the image.</p>\n", "abstract": "I'm having trouble with import cv in my python code. My issue is I need to draw a rectangle around regions of interest in an image.\nHow can this be done in python? I'm doing object detection and would like to draw a rectangle around the objects I believe I've found in the image."}, "answers": [{"id": 23720964, "score": 252, "vote": 0, "content": "<p>please don't try with the old cv module, use cv2:</p>\n<pre><code class=\"python\">import cv2\n\ncv2.rectangle(img, (x1, y1), (x2, y2), (255,0,0), 2)\n\n\nx1,y1 ------\n|          |\n|          |\n|          |\n--------x2,y2\n</code></pre>\n<p>[edit] to append the follow-up questions below:</p>\n<pre><code class=\"python\">cv2.imwrite(\"my.png\",img)\n\ncv2.imshow(\"lalala\", img)\nk = cv2.waitKey(0) # 0==wait forever\n</code></pre>\n", "abstract": "please don't try with the old cv module, use cv2: [edit] to append the follow-up questions below:"}, {"id": 53764385, "score": 14, "vote": 0, "content": "<p>You can use <a href=\"https://docs.opencv.org/3.1.0/d6/d6e/group__imgproc__draw.html#ga07d2f74cadcf8e305e810ce8eed13bc9\" rel=\"nofollow noreferrer\"><code>cv2.rectangle()</code></a>:</p>\n<pre><code class=\"python\">cv2.rectangle(img, pt1, pt2, color, thickness, lineType, shift)\n\nDraws a simple, thick, or filled up-right rectangle.\n\nThe function rectangle draws a rectangle outline or a filled rectangle\nwhose two opposite corners are pt1 and pt2.\n\nParameters\n    img   Image.\n    pt1   Vertex of the rectangle.\n    pt2    Vertex of the rectangle opposite to pt1 .\n    color Rectangle color or brightness (grayscale image).\n    thickness  Thickness of lines that make up the rectangle. Negative values,\n    like CV_FILLED , mean that the function has to draw a filled rectangle.\n    lineType  Type of the line. See the line description.\n    shift   Number of fractional bits in the point coordinates.\n</code></pre>\n<p>I have a PIL Image object and I want to draw rectangle on this image. <strong>I want to use opencv2 and draw rectangle, and then convert back to PIL Image object</strong>. Here is how I do it:</p>\n<pre><code class=\"python\"># im is a PIL Image object\nim_arr = np.asarray(im)\n# convert rgb array to opencv's bgr format\nim_arr_bgr = cv2.cvtColor(im_arr, cv2.COLOR_RGB2BGR)\n# pts1 and pts2 are the upper left and bottom right coordinates of the rectangle\ncv2.rectangle(im_arr_bgr, pts1, pts2,\n              color=(0, 255, 0), thickness=3)\nim_arr = cv2.cvtColor(im_arr_bgr, cv2.COLOR_BGR2RGB)\n# convert back to Image object\nim = Image.fromarray(im_arr)\n</code></pre>\n", "abstract": "You can use cv2.rectangle(): I have a PIL Image object and I want to draw rectangle on this image. I want to use opencv2 and draw rectangle, and then convert back to PIL Image object. Here is how I do it:"}, {"id": 56874993, "score": 14, "vote": 0, "content": "<p>As the other answers said, the function you need is <code>cv2.rectangle()</code>, but keep in mind that the coordinates for the bounding box vertices need to be integers if they are in a tuple, and they need to be in the order of <code>(left, top)</code> and <code>(right, bottom)</code>. Or, equivalently, <code>(xmin, ymin)</code> and <code>(xmax, ymax)</code>. </p>\n", "abstract": "As the other answers said, the function you need is cv2.rectangle(), but keep in mind that the coordinates for the bounding box vertices need to be integers if they are in a tuple, and they need to be in the order of (left, top) and (right, bottom). Or, equivalently, (xmin, ymin) and (xmax, ymax). "}, {"id": 69795563, "score": 1, "vote": 0, "content": "<p>The code for drawing a rectangle on an image is:</p>\n<pre><code class=\"python\">cv2.rectangle(image, pt1, pt2, color, thickness)\n</code></pre>\n<p>where <code>pt1</code> is starting point--&gt;(x,y) and <code>pt2</code> is end point--&gt;(x+w,y+h).</p>\n", "abstract": "The code for drawing a rectangle on an image is: where pt1 is starting point-->(x,y) and pt2 is end point-->(x+w,y+h)."}]}, {"link": "https://stackoverflow.com/questions/44588279/find-and-draw-the-largest-contour-in-opencv-on-a-specific-color-python", "question": {"id": "44588279", "title": "Find and draw the largest contour in opencv on a specific color (Python)", "content": "<p>Im trying to get the largest contour of a red book.\nI've got a little problem with the code because its getting the contours of the smallest objects (blobs) instead of the largest one and I can't seem to figure out why this is happening</p>\n<p>The code I use:</p>\n<pre><code class=\"python\">camera = cv2.VideoCapture(0)\nkernel = np.ones((2,2),np.uint8)\n\nwhile True:\n    #Loading Camera\n    ret, frame = camera.read()\n\n    blurred = cv2.pyrMeanShiftFiltering(frame, 3, 3)\n    hsv = cv2.cvtColor(blurred, cv2.COLOR_BGR2HSV)\n\n    lower_range = np.array([150, 10, 10])\n    upper_range = np.array([180, 255, 255])\n    mask = cv2.inRange(hsv, lower_range, upper_range)\n\n    dilation = cv2.dilate(mask,kernel,iterations = 1)\n\n    closing = cv2.morphologyEx(dilation, cv2.MORPH_GRADIENT, kernel)\n    closing = cv2.morphologyEx(dilation, cv2.MORPH_CLOSE, kernel)\n\n    #Getting the edge of morphology\n    edge = cv2.Canny(closing, 175, 175)\n    _, contours,hierarchy = cv2.findContours(edge, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)\n\n    # Find the index of the largest contour\n    areas = [cv2.contourArea(c) for c in contours]\n    max_index = np.argmax(areas)\n    cnt=contours[max_index]\n\n    x,y,w,h = cv2.boundingRect(cnt)\n    cv2.rectangle(frame,(x,y),(x+w,y+h),(0,255,0),2)\n\n\n    cv2.imshow('threshold', frame)\n    cv2.imshow('edge', edge)\n\n    if cv2.waitKey(1) == 27:\n        break\n\n\ncamera.release()\ncv2.destroyAllWindows()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/yuyGo.png\" rel=\"noreferrer\">As you can see on this picture</a></p>\n<p>Hopefully there is someone who can help</p>\n", "abstract": "Im trying to get the largest contour of a red book.\nI've got a little problem with the code because its getting the contours of the smallest objects (blobs) instead of the largest one and I can't seem to figure out why this is happening The code I use: As you can see on this picture Hopefully there is someone who can help"}, "answers": [{"id": 44591580, "score": 63, "vote": 0, "content": "<p>You can start by defining a <strong>mask</strong> in the range of the <strong>red</strong> tones of the book you are looking for.</p>\n<p>Then you can just find the contour with the <strong>biggest area</strong> and draw the rectangular shape of the book.</p>\n<pre><code class=\"python\">import numpy as np\nimport cv2\n\n# load the image\nimage = cv2.imread(\"path_to_your_image.png\", 1)\n\n# red color boundaries [B, G, R]\nlower = [1, 0, 20]\nupper = [60, 40, 220]\n\n# create NumPy arrays from the boundaries\nlower = np.array(lower, dtype=\"uint8\")\nupper = np.array(upper, dtype=\"uint8\")\n\n# find the colors within the specified boundaries and apply\n# the mask\nmask = cv2.inRange(image, lower, upper)\noutput = cv2.bitwise_and(image, image, mask=mask)\n\nret,thresh = cv2.threshold(mask, 40, 255, 0)\nif (cv2.__version__[0] &gt; 3):\n    contours, hierarchy = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE)\nelse:\n    im2, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE)\n\nif len(contours) != 0:\n    # draw in blue the contours that were founded\n    cv2.drawContours(output, contours, -1, 255, 3)\n\n    # find the biggest countour (c) by the area\n    c = max(contours, key = cv2.contourArea)\n    x,y,w,h = cv2.boundingRect(c)\n\n    # draw the biggest contour (c) in green\n    cv2.rectangle(output,(x,y),(x+w,y+h),(0,255,0),2)\n\n# show the images\ncv2.imshow(\"Result\", np.hstack([image, output]))\n\ncv2.waitKey(0)\n</code></pre>\n<p>Using your image:</p>\n<p><a href=\"https://i.stack.imgur.com/PDIg8.png\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/PDIg8.png\"/></a></p>\n<p>If you want the book to rotate you can use <code>rect = cv2.minAreaRect(cnt)</code> as you can find it <a href=\"http://docs.opencv.org/trunk/dd/d49/tutorial_py_contour_features.html\" rel=\"noreferrer\">here</a>.</p>\n<p><strong>Edit</strong>:</p>\n<p>You should also consider other colour spaces beside the RGB, as the HSV or HLS. Usually, people use the HSV since the H channel stays fairly consistent in shadow or excessive brightness. In other words, you should get better results if you use the HSV colourspace.</p>\n<p><a href=\"https://i.stack.imgur.com/iDfvt.jpg\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/iDfvtm.jpg\"/></a></p>\n<p>In specific, in OpenCV the Hue range is <code>[0,179]</code>. In the following figure (made by <a href=\"https://stackoverflow.com/users/3547485/kinght-%e9%87%91\">@Knight</a>), you can find a 2D slice of that cylinder, in <code>V = 255</code>, where the horizontal axis is the <code>H</code> and the vertical axis the <code>S</code>. As you can see from that figure to capture the red you need both to include the lower (e.g., H=0 to H=10) and upper region (e.g., H=170 to H=179) of the Hue values.</p>\n<p><a href=\"https://i.stack.imgur.com/nOK4u.png\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/nOK4u.png\"/></a></p>\n", "abstract": "You can start by defining a mask in the range of the red tones of the book you are looking for. Then you can just find the contour with the biggest area and draw the rectangular shape of the book. Using your image:  If you want the book to rotate you can use rect = cv2.minAreaRect(cnt) as you can find it here. Edit: You should also consider other colour spaces beside the RGB, as the HSV or HLS. Usually, people use the HSV since the H channel stays fairly consistent in shadow or excessive brightness. In other words, you should get better results if you use the HSV colourspace.  In specific, in OpenCV the Hue range is [0,179]. In the following figure (made by @Knight), you can find a 2D slice of that cylinder, in V = 255, where the horizontal axis is the H and the vertical axis the S. As you can see from that figure to capture the red you need both to include the lower (e.g., H=0 to H=10) and upper region (e.g., H=170 to H=179) of the Hue values. "}, {"id": 69236556, "score": 2, "vote": 0, "content": "<p>Use this to convert Grayscale masks to Rectangles</p>\n<pre><code class=\"python\">def mask_to_rect(image):\n    '''\n    \n        Give rectangle cordinates according to the mask image\n        \n        \n        Params: image : (numpy.array) Gray Scale Image\n        \n        Returns: Cordinates : (list) List of cordinates [x, y, w h]\n    \n    '''\n    \n    # Getting the Thresholds and ret\n    ret,thresh = cv2.threshold(image, 0, 1, 0)\n    \n    # Checking the version of open cv I tried for (version 4)\n    #    Getting contours on the bases of thresh\n    if (int(cv2.__version__[0]) &gt; 3):\n        contours, hierarchy = cv2.findContours(thresh.astype(np.uint8), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE)\n    else:\n        im2, contours, hierarchy = cv2.findContours(thresh.astype(np.uint8), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE)\n    \n    # Getting the biggest contour\n    if len(contours) != 0:\n        # draw in blue the contours that were founded\n        cv2.drawContours(output, contours, -1, 255, 3)\n\n        # find the biggest countour (c) by the area\n        c = max(contours, key = cv2.contourArea)\n        x,y,w,h = cv2.boundingRect(c)\n        \n    return [x, y, w, h]\n</code></pre>\n<p>Result</p>\n<p><a href=\"https://i.stack.imgur.com/uAuj0.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/uAuj0.png\"/></a></p>\n", "abstract": "Use this to convert Grayscale masks to Rectangles Result "}]}, {"link": "https://stackoverflow.com/questions/1815165/draw-bold-italic-text-with-pil", "question": {"id": "1815165", "title": "Draw bold/italic text with PIL?", "content": "<p>How to draw bold/italic text with PIL? ImageFont.truetype(file, size) has an option to specify font size only.</p>\n", "abstract": "How to draw bold/italic text with PIL? ImageFont.truetype(file, size) has an option to specify font size only."}, "answers": [{"id": 1815171, "score": 28, "vote": 0, "content": "<p>Use the bold/italic version of the font</p>\n", "abstract": "Use the bold/italic version of the font"}, {"id": 39354874, "score": 9, "vote": 0, "content": "<p>A rather hacky solution to make a font bold if (for whatever reason) you don't have a separate bold version of the font is to print the same text several times with a slight offset.</p>\n<pre><code class=\"python\">andaleMono = ImageFont.truetype(ANDALE_MONO_PATH,16)\ntext = \"hello world\"\nmainOffset = (50,50)\nxoff, yoff = mainOffset\ndraw.text(mainOffset,text,font=andaleMono,fill='black')\ndraw.text((xoff+1,yoff+1),text,font=andaleMono,fill='black')\ndraw.text((xoff-1,yoff-1),text,font=andaleMono,fill='black')\n</code></pre>\n", "abstract": "A rather hacky solution to make a font bold if (for whatever reason) you don't have a separate bold version of the font is to print the same text several times with a slight offset."}, {"id": 66940721, "score": 8, "vote": 0, "content": "<p>There is no bold features as parameter till now but easily you can solve by add stroke to the text with same color of text. it will make sense as bold font next code elaborate how to use stroke</p>\n<pre><code class=\"python\">    draw.text((x, y), text, fill=color, font=font, stroke_width=2,\n          stroke_fill=\"black\")\n</code></pre>\n", "abstract": "There is no bold features as parameter till now but easily you can solve by add stroke to the text with same color of text. it will make sense as bold font next code elaborate how to use stroke"}, {"id": 1815170, "score": 6, "vote": 0, "content": "<p>Many fonts use different TTF files for their bold/italic versions, so I'd imagine if you just specify that file it would work.</p>\n", "abstract": "Many fonts use different TTF files for their bold/italic versions, so I'd imagine if you just specify that file it would work."}, {"id": 30420331, "score": 4, "vote": 0, "content": "<p>Well, this is my first comment. Here we go.</p>\n<p>I'll try to clarify the procedure. At first What I did was use the \"name\" of the font like this</p>\n<pre><code class=\"python\">font = ImageFont.truetype(\"C:\\Windows\\Fonts\\\\Arial Negrita.ttf\",25)\n</code></pre>\n<p>but only got some errors like this:</p>\n<pre><code class=\"python\">    Traceback (most recent call last):\n  File \"C:/Users/555STi/PycharmProjects/PIL/img.py\", line 8, in &lt;module&gt;\n    font = ImageFont.truetype(\"C:\\Windows\\Fonts\\Arial negrita.ttf\",25)\n  File \"C:\\Python27\\lib\\site-packages\\PIL\\ImageFont.py\", line 262, in truetype\n    return FreeTypeFont(font, size, index, encoding)\n  File \"C:\\Python27\\lib\\site-packages\\PIL\\ImageFont.py\", line 142, in __init__\n    self.font = core.getfont(font, size, index, encoding)\nIOError: cannot open resource\n</code></pre>\n<p>Then I remembered that sometimes fonts has other \"names\" or \"filenames\", so, what I did was going to fonts folder, then opened the Arial Font wich displayed all the styles like negrita (bold], cursiva(italic), etc.</p>\n<p>Did a right click on the \"negrita\" style, selected \"properties\" and then there was the \"real name\" of the font.</p>\n<p>In my case, the name was \"ariblk\"</p>\n<p>Then, finally, just used the name like this.</p>\n<pre><code class=\"python\">font = ImageFont.truetype(\"C:\\Windows\\Fonts\\\\ariblk.ttf\",25)\n</code></pre>\n<p>I know this post is old, but today helped me to get to the solution. So I hope to help anybody.</p>\n<p>=)</p>\n", "abstract": "Well, this is my first comment. Here we go. I'll try to clarify the procedure. At first What I did was use the \"name\" of the font like this but only got some errors like this: Then I remembered that sometimes fonts has other \"names\" or \"filenames\", so, what I did was going to fonts folder, then opened the Arial Font wich displayed all the styles like negrita (bold], cursiva(italic), etc. Did a right click on the \"negrita\" style, selected \"properties\" and then there was the \"real name\" of the font. In my case, the name was \"ariblk\" Then, finally, just used the name like this. I know this post is old, but today helped me to get to the solution. So I hope to help anybody. =)"}, {"id": 72158865, "score": 0, "vote": 0, "content": "<p>With reference to the other answers here, my search for the name for the bold variant of Arial produced the following (arialbd.ttf):</p>\n<pre><code class=\"python\">def FindFontsVariantsWithBase(fontBase=\"arial\"):\n        import matplotlib\n        system_fonts = matplotlib.font_manager.findSystemFonts(fontpaths=None, fontext='ttf')\n        # for font in np.sort(system_fonts):\n        #     print(font)\n        fonts = np.sort(system_fonts).tolist()\n        res = [i for i in fonts if fontBase in i]\n        print(res)\n        \nFindFontsVariantsWithBase(\"arial\")\n</code></pre>\n<p>['C:\\WINDOWS\\Fonts\\arial.ttf', 'C:\\WINDOWS\\Fonts\\arialbd.ttf', 'C:\\WINDOWS\\Fonts\\arialbi.ttf', 'C:\\WINDOWS\\Fonts\\ariali.ttf', 'C:\\Windows\\Fonts\\arial.ttf', 'C:\\Windows\\Fonts\\arialbd.ttf', 'C:\\Windows\\Fonts\\arialbi.ttf', 'C:\\Windows\\Fonts\\ariali.ttf'] (</p>\n", "abstract": "With reference to the other answers here, my search for the name for the bold variant of Arial produced the following (arialbd.ttf): ['C:\\WINDOWS\\Fonts\\arial.ttf', 'C:\\WINDOWS\\Fonts\\arialbd.ttf', 'C:\\WINDOWS\\Fonts\\arialbi.ttf', 'C:\\WINDOWS\\Fonts\\ariali.ttf', 'C:\\Windows\\Fonts\\arial.ttf', 'C:\\Windows\\Fonts\\arialbd.ttf', 'C:\\Windows\\Fonts\\arialbi.ttf', 'C:\\Windows\\Fonts\\ariali.ttf'] ("}]}, {"link": "https://stackoverflow.com/questions/16119991/how-to-speed-up-pythons-turtle-function-and-stop-it-freezing-at-the-end", "question": {"id": "16119991", "title": "How to speed up python&#39;s &#39;turtle&#39; function and stop it freezing at the end", "content": "<p>I have written a turtle program in python, but there are two problems.</p>\n<ol>\n<li>It goes way too slow for larger numbers, I was wonder how I can speed up turtle.</li>\n<li>It freezes after it finishes and when clicked on, says 'not responding'</li>\n</ol>\n<p>This is my code so far:</p>\n<pre><code class=\"python\">import turtle\n\n#Takes user input to decide how many squares are needed\nf=int(input(\"How many squares do you want?\"))\nc=int(input(\"What colour would you like? red = 1, blue = 2 and green =3\"))\nn=int(input(\"What background colour would you like? red = 1, blue = 2 and green =3\"))\n\ni=1\n\nx=65\n\n#Draws the desired number of squares.\nwhile i &lt; f:\n    i=i+1\n    x=x*1.05\n    print (\"minimise this window ASAP\")\n    if c==1:\n        turtle.pencolor(\"red\")\n    elif c==2:\n        turtle.pencolor(\"blue\")\n    elif c==3:\n        turtle.pencolor(\"green\")\n    else:\n        turtle.pencolor(\"black\")\n    if n==1:\n        turtle.fillcolor(\"red\")\n    elif n==2:\n        turtle.fillcolor(\"blue\")\n    elif n==3:\n        turtle.fillcolor(\"green\")\n    else:\n        turtle.fillcolor(\"white\")\n    turtle.bk(x)\n    turtle.rt(90)\n    turtle.bk(x)\n    turtle.rt(90)\n    turtle.bk(x)\n    turtle.rt(90)\n    turtle.bk(x)\n    turtle.rt(90)\n    turtle.up()\n    turtle.rt(9)\n    turtle.down()\n</code></pre>\n<p>By the way: I am on version 3.2!</p>\n", "abstract": "I have written a turtle program in python, but there are two problems. This is my code so far: By the way: I am on version 3.2!"}, "answers": [{"id": 16120087, "score": 50, "vote": 0, "content": "<ol>\n<li>Set <code>turtle.speed()</code> to <code>fastest</code>.</li>\n<li>Use the <code>turtle.mainloop()</code> functionality to do work without screen refreshes.</li>\n<li>Disable screen refreshing with <code>turtle.tracer(0, 0)</code> then at the end do <code>turtle.update()</code></li>\n</ol>\n", "abstract": ""}, {"id": 31503663, "score": 17, "vote": 0, "content": "<p><strong>Python turtle goes very slowly because screen refreshes are performed after every modification is made to a turtle.</strong></p>\n<p>You can disable screen refreshing until all the work is done, then paint the screen, it will eliminate the millisecond delays as the screen furiously tries to update the screen from every turtle change.</p>\n<p><strong>For example:</strong></p>\n<pre><code class=\"python\">import turtle\nimport random\nimport time\nscreen = turtle.Screen()\n\nturtlepower = []\n\nturtle.tracer(0, 0)\nfor i in range(1000):\n    t = turtle.Turtle()\n    t.goto(random.random()*500, random.random()*1000)\n    turtlepower.append(t)\n\nfor i in range(1000):\n    turtle.stamp()\n\nturtle.update()\n\ntime.sleep(3)\n</code></pre>\n<p>This code makes a thousand turtles at random locations, and displays the picture in about 200 milliseconds.  </p>\n<p>Had you not disabled screen refreshing with <code>turtle.tracer(0, 0)</code> command, it would have taken several minutes as it tries to refresh the screen 3000 times.</p>\n<p><a href=\"https://docs.python.org/2/library/turtle.html#turtle.delay\" rel=\"noreferrer\">https://docs.python.org/2/library/turtle.html#turtle.delay</a></p>\n", "abstract": "Python turtle goes very slowly because screen refreshes are performed after every modification is made to a turtle. You can disable screen refreshing until all the work is done, then paint the screen, it will eliminate the millisecond delays as the screen furiously tries to update the screen from every turtle change. For example: This code makes a thousand turtles at random locations, and displays the picture in about 200 milliseconds.   Had you not disabled screen refreshing with turtle.tracer(0, 0) command, it would have taken several minutes as it tries to refresh the screen 3000 times. https://docs.python.org/2/library/turtle.html#turtle.delay"}, {"id": 19107306, "score": 3, "vote": 0, "content": "<p>For reference, turtle being slow is an existing problem.\nEven with speed set to max, turtle can take quite a long time on things like fractals.\nNick ODell reimplemented turtle for speed here: <a href=\"https://stackoverflow.com/questions/7236879/hide-turtle-window\">Hide Turtle Window?</a></p>\n<pre><code class=\"python\">import math\n\nclass UndrawnTurtle():\ndef __init__(self):\n    self.x, self.y, self.angle = 0.0, 0.0, 0.0\n    self.pointsVisited = []\n    self._visit()\n\ndef position(self):\n    return self.x, self.y\n\ndef xcor(self):\n    return self.x\n\ndef ycor(self):\n    return self.y\n\ndef forward(self, distance):\n    angle_radians = math.radians(self.angle)\n\n    self.x += math.cos(angle_radians) * distance\n    self.y += math.sin(angle_radians) * distance\n\n    self._visit()\n\ndef backward(self, distance):\n    self.forward(-distance)\n\ndef right(self, angle):\n    self.angle -= angle\n\ndef left(self, angle):\n    self.angle += angle\n\ndef setpos(self, x, y = None):\n    \"\"\"Can be passed either a tuple or two numbers.\"\"\"\n    if y == None:\n        self.x = x[0]\n        self.y = x[1]\n    else:\n        self.x = x\n        self.y = y\n    self._visit()\n\ndef _visit(self):\n    \"\"\"Add point to the list of points gone to by the turtle.\"\"\"\n    self.pointsVisited.append(self.position())\n\n# Now for some aliases. Everything that's implemented in this class\n# should be aliased the same way as the actual api.\nfd = forward\nbk = backward\nback = backward\nrt = right\nlt = left\nsetposition = setpos\ngoto = setpos\npos = position\n\nut = UndrawnTurtle()\n</code></pre>\n", "abstract": "For reference, turtle being slow is an existing problem.\nEven with speed set to max, turtle can take quite a long time on things like fractals.\nNick ODell reimplemented turtle for speed here: Hide Turtle Window?"}]}, {"link": "https://stackoverflow.com/questions/34255938/is-there-a-way-to-specify-the-width-of-a-rectangle-in-pil", "question": {"id": "34255938", "title": "Is there a way to specify the width of a rectangle in PIL?", "content": "<p>I'm trying to draw thick rectangles onto an image using ImageDraw Module of PIL/pillow. </p>\n<p>I tried using <code>draw.rectangle([x1, y1, x2, y2], outline='yellow', width=3)</code> but it doesn't seem to like the width parameter. </p>\n<p>I can emulate what I want to do with a bunch of lines, but I was wondering if there is a proper way of doing it.</p>\n<pre><code class=\"python\">'''\ncoordinates = [(x1, y1), (x2, y2)]\n\n    (x1, y1)\n        *--------------\n        |             |\n        |             |\n        |             |\n        |             |\n        |             |\n        |             |\n        --------------*\n                      (x2, y2)\n\n'''\n\ndef draw_rectangle(drawing, xy, outline='yellow', width=10):\n    top_left = xy[0]\n    bottom_right = xy[1]\n    top_right = (xy[1][0], xy[0][1])\n    bottom_left= (xy[0][0], xy[1][1])\n\n    drawing.line([top_left, top_right], fill=outline, width=width)\n    drawing.line([top_right, bottom_right], fill=outline, width=width)\n    drawing.line([bottom_right, bottom_left], fill=outline, width=width)\n    drawing.line([bottom_left, top_left], fill=outline, width=width)\n</code></pre>\n", "abstract": "I'm trying to draw thick rectangles onto an image using ImageDraw Module of PIL/pillow.  I tried using draw.rectangle([x1, y1, x2, y2], outline='yellow', width=3) but it doesn't seem to like the width parameter.  I can emulate what I want to do with a bunch of lines, but I was wondering if there is a proper way of doing it."}, "answers": [{"id": 41980290, "score": 21, "vote": 0, "content": "<p><strong>UPDATE</strong> - Pillow &gt;= 5.3.0 <code>rectangle</code> now supports the <code>width</code> argument:\n<code>PIL.ImageDraw.ImageDraw.rectangle(xy, fill=None, outline=None, width=0)</code></p>\n<p><strong>Previous answer:</strong></p>\n<p>Here is a method that draws a first initial rectangle, and then further rectangles going inwards - note, the line width is <strong>not</strong> centered along the border.</p>\n<pre><code class=\"python\">def draw_rectangle(draw, coordinates, color, width=1):\n    for i in range(width):\n        rect_start = (coordinates[0][0] - i, coordinates[0][1] - i)\n        rect_end = (coordinates[1][0] + i, coordinates[1][1] + i)\n        draw.rectangle((rect_start, rect_end), outline = color)\n\n# example usage\n\nim = Image.open(image_path)\ndrawing = ImageDraw.Draw(im)\n\ntop_left = (50, 50)\nbottom_right = (100, 100)\n\noutline_width = 10\noutline_color = \"black\"\n\ndraw_rectangle(drawing, (top_left, bottom_right), color=outline_color, width=outline_width)\n</code></pre>\n", "abstract": "UPDATE - Pillow >= 5.3.0 rectangle now supports the width argument:\nPIL.ImageDraw.ImageDraw.rectangle(xy, fill=None, outline=None, width=0) Previous answer: Here is a method that draws a first initial rectangle, and then further rectangles going inwards - note, the line width is not centered along the border."}, {"id": 54745335, "score": 9, "vote": 0, "content": "<p>PIL rectangle now support <code>width</code> parameter.</p>\n<pre><code class=\"python\">from PIL import Image, ImageDraw\n\nheight = width = 800\nimg = Image.new('RGB', (height, width), (255, 255, 255))\ndraw = ImageDraw.Draw(img)\ndraw.rectangle([100,100,500,400], width = 10, outline=\"#0000ff\")\nimg.show()\n</code></pre>\n", "abstract": "PIL rectangle now support width parameter."}, {"id": 52709470, "score": 5, "vote": 0, "content": "<p>Instead of four lines you can also draw one line with four points, making a rectangle:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">def drawrect(drawcontext, xy, outline=None, width=0):\n    (x1, y1), (x2, y2) = xy\n    points = (x1, y1), (x2, y1), (x2, y2), (x1, y2), (x1, y1)\n    drawcontext.line(points, fill=outline, width=width)\n\n# example\nfrom PIL import Image, ImageDraw\nim = Image.new(\"RGB\", (150, 150), color=\"white\")\ndraw = ImageDraw.Draw(im)\n\ndrawrect(draw, [(50, 50), (100, 100)], outline=\"red\", width=5)\n\nim.show()\n</code></pre>\n", "abstract": "Instead of four lines you can also draw one line with four points, making a rectangle:"}, {"id": 53542418, "score": 2, "vote": 0, "content": "<p>This method works with PIL v1.1.7 and pillow v 5.3.0 on Ubuntu 18.04. The corners are not square, but at least the are only off by 1/2 pixel as opposed to the approach of drawing 4 lines with a width parameter to create a rectangle, which is off by at least 1 pixel is each corner. I think there is still a bug in the line drawing algorithm in pillow/pil.</p>\n<pre><code class=\"python\">def drawrect(drawcontext, xy, color=None, width=1):\n    (x1, y1), (x2, y2) = xy\n    offset = 1\n    for i in range(0, width):\n        drawcontext.rectangle(((x1, y1), (x2, y2)), outline=color)\n        x1 = x1 - offset\n        y1 = y1 + offset\n        x2 = x2 + offset\n        y2 = y2 - offset\n</code></pre>\n<p>and then in your code you would have:</p>\n<pre><code class=\"python\"># example\nfrom PIL import Image, ImageDraw\nim = Image.new(\"RGB\", (150, 150), color=\"white\")\ndraw = ImageDraw.Draw(im)\n\ndrawrect(draw, [(50, 50), (100, 100)], outline=\"red\", width=5)\ndel draw\nim.show()\n</code></pre>\n<p>Thanks to gdwarf for his solution which put me on the path to this one. </p>\n", "abstract": "This method works with PIL v1.1.7 and pillow v 5.3.0 on Ubuntu 18.04. The corners are not square, but at least the are only off by 1/2 pixel as opposed to the approach of drawing 4 lines with a width parameter to create a rectangle, which is off by at least 1 pixel is each corner. I think there is still a bug in the line drawing algorithm in pillow/pil. and then in your code you would have: Thanks to gdwarf for his solution which put me on the path to this one. "}, {"id": 48353369, "score": 0, "vote": 0, "content": "<p>You can draw a view rects e.g:</p>\n<pre><code class=\"python\">draw.rectangle([(x, y),(x+w,y+h) ], outline=(0,0,255,255))\ndraw.rectangle([(x+1, y+1),(x+w-1,y+h-1) ], outline=(0,0,255,255))\ndraw.rectangle([(x+2, y+2),(x+w-2,y+h-2) ], outline=(0,0,255,255))\n...\n</code></pre>\n<p>of cause in a loop and a function.</p>\n", "abstract": "You can draw a view rects e.g: of cause in a loop and a function."}]}, {"link": "https://stackoverflow.com/questions/15261851/100x100-image-with-random-pixel-colour", "question": {"id": "15261851", "title": "100x100 image with random pixel colour", "content": "<p>I'm trying to make a <code>100x100</code> image with each pixel being a different random colour, like this example:</p>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/6CecU.jpg\"/></p>\n<p>I've tried to use <code>matplotlib</code> but I'm not having much luck. Should I maybe be using PIL?</p>\n", "abstract": "I'm trying to make a 100x100 image with each pixel being a different random colour, like this example:  I've tried to use matplotlib but I'm not having much luck. Should I maybe be using PIL?"}, "answers": [{"id": 15262028, "score": 37, "vote": 0, "content": "<p>If you want to create an image file (and display it elsewhere, with or without Matplotlib), you could use NumPy and Pillow as follows:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">import numpy\nfrom PIL import Image\n\nimarray = numpy.random.rand(100,100,3) * 255\nim = Image.fromarray(imarray.astype('uint8')).convert('RGBA')\nim.save('result_image.png')\n</code></pre>\n<p>The idea here is to create a numeric array, convert it to a RGB image, and save it to file. If you want grayscale image, you should use <code>convert('L')</code> instead of <code>convert('RGBA')</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/XG7Tn.png\" rel=\"noreferrer\"><img alt=\"\" src=\"https://i.stack.imgur.com/XG7Tn.png\"/></a></p>\n", "abstract": "If you want to create an image file (and display it elsewhere, with or without Matplotlib), you could use NumPy and Pillow as follows: The idea here is to create a numeric array, convert it to a RGB image, and save it to file. If you want grayscale image, you should use convert('L') instead of convert('RGBA'). "}, {"id": 15261887, "score": 28, "vote": 0, "content": "<p>This is simple with <code>numpy</code> and <code>pylab</code>. You can set the colormap to be whatever you like, here I use spectral.</p>\n<pre><code class=\"python\">from pylab import imshow, show, get_cmap\nfrom numpy import random\n\nZ = random.random((50,50))   # Test data\n\nimshow(Z, cmap=get_cmap(\"Spectral\"), interpolation='nearest')\nshow()\n</code></pre>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/vcsOT.png\"/></p>\n<p>Your target image looks to have a grayscale colormap with a higher pixel density than 100x100:</p>\n<pre><code class=\"python\">import pylab as plt\nimport numpy as np\n\nZ = np.random.random((500,500))   # Test data\nplt.imshow(Z, cmap='gray', interpolation='nearest')\nplt.show()\n</code></pre>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/aBdXvm.png\"/></p>\n", "abstract": "This is simple with numpy and pylab. You can set the colormap to be whatever you like, here I use spectral.  Your target image looks to have a grayscale colormap with a higher pixel density than 100x100: "}, {"id": 15262462, "score": 7, "vote": 0, "content": "<p>I wanted to write some simple BMP files, so I researched the format and wrote a very simple <a href=\"http://www.ptmcg.com/geo/python/bmp.py.txt\" rel=\"nofollow noreferrer\">bmp.py module</a>:</p>\n<pre><code class=\"python\"># get bmp.py at http://www.ptmcg.com/geo/python/bmp.py.txt\nfrom bmp import BitMap, Color\nfrom itertools import product\nfrom random import randint, choice\n\n# use a set to make 256 unique RGB tuples\nrgbs = set()\nwhile len(rgbs) &lt; 256:\n    rgbs.add((randint(0,255), randint(0,255), randint(0,255)))\n\n# convert to a list of 256 colors (all you can fit into an 8-bit BMP)\ncolors = [Color(*rgb) for rgb in rgbs]\n\nbmp = BitMap(100, 100)\nfor x,y in product(range(100), range(100)):\n    bmp.setPenColor(choice(colors))\n    bmp.plotPoint(x, y)\n\nbmp.saveFile(\"100x100.bmp\", compress=False)\n</code></pre>\n<p>Sample 100x100.bmp:</p>\n<p><img alt=\"100x100.bmp\" src=\"https://i.stack.imgur.com/jZhAM.png\"/></p>\n<p>For a slightly larger pixel size, use:</p>\n<pre><code class=\"python\">PIXEL_SIZE=5\nbmp = BitMap(PIXEL_SIZE*100, PIXEL_SIZE*100)\nfor x,y in product(range(100), range(100)):\n    bmp.setPenColor(choice(colors))\n    bmp.drawSquare(x*PIXEL_SIZE, y*PIXEL_SIZE, PIXEL_SIZE, fill=True)\n\nfilename = \"%d00x%d00.bmp\" % (PIXEL_SIZE, PIXEL_SIZE)\nbmp.saveFile(filename)\n</code></pre>\n<p><img alt=\"500x500.bmp\" src=\"https://i.stack.imgur.com/XDXXV.png\"/></p>\n<p>You may not want to use bmp.py, but this shows you the general idea of what you'll need to do.</p>\n", "abstract": "I wanted to write some simple BMP files, so I researched the format and wrote a very simple bmp.py module: Sample 100x100.bmp:  For a slightly larger pixel size, use:  You may not want to use bmp.py, but this shows you the general idea of what you'll need to do."}, {"id": 56274353, "score": 6, "vote": 0, "content": "<pre class=\"lang-py prettyprint-override\"><code class=\"python\">import numpy as np\nimport matplotlib.pyplot as plt\n\nimg = (np.random.standard_normal([28, 28, 3]) * 255).astype(np.uint8)\n\n# see the raw result (it is 'antialiased' by default)\n_ = plt.imshow(img, interpolation='none')\n# if you are not in a jupyter-notebook\nplt.show()\n</code></pre>\n<p>Will give you this 28x28 RGB image:</p>\n<p><img alt=\"img\" src=\"https://i.stack.imgur.com/2DCkg.png\"/></p>\n", "abstract": "Will give you this 28x28 RGB image: "}, {"id": 15279037, "score": 3, "vote": 0, "content": "<p>I believe the colour map of that array to be bone, i.e.</p>\n<pre><code class=\"python\">#import the modules\nimport numpy as np\nimport matplotlib.cm as cm\nimport matplotlib.pyplot as plt\n\nrand_array=np.random.rand(550,550) #create your array\nplt.imshow(rand_array,cmap=cm.bone) #show your array with the selected colour\nplt.show() #show the image\n</code></pre>\n<p>Change 550 to 100 if you want a 100x100 array</p>\n<p><a href=\"https://i.stack.imgur.com/GvVr0.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/GvVr0.png\"/></a></p>\n", "abstract": "I believe the colour map of that array to be bone, i.e. Change 550 to 100 if you want a 100x100 array "}]}, {"link": "https://stackoverflow.com/questions/597369/how-to-create-ms-paint-clone-with-python-and-pygame", "question": {"id": "597369", "title": "How to create MS Paint clone with Python and pygame", "content": "<p>As I see it, there are two ways to handle mouse events to draw a picture.</p>\n<p>The first is to detect when the mouse moves and draw a line to where the mouse is, shown <a href=\"http://www.cs.iupui.edu/~aharris/pygame/ch05/paint.py\" rel=\"noreferrer\">here</a>.  However, the problem with this is that  with a large brush size, many gaps appear between each \"line\" that is not straight since it is using the line's stroke size to create thick lines.</p>\n<p>The other way is to draw circles when the mouse moves as is shown <a href=\"http://www.ida.liu.se/~ETE257/timetable/LecturePythonPygame2.html\" rel=\"noreferrer\">here</a>.  The problem with this is that gaps appear between each circle if the mouse moves faster than the computer detects mouse input.</p>\n<p>Here's a screenshot with my issues with both:</p>\n<p><img alt=\"http://imgur.com/32DXN.jpg\" src=\"https://i.stack.imgur.com/7ILzZ.png\"/></p>\n<p>What is the best way to implement a brush like MS Paint's, with a decently-big brush size with no gaps in the stroke of the line or no gaps between each circle?</p>\n", "abstract": "As I see it, there are two ways to handle mouse events to draw a picture. The first is to detect when the mouse moves and draw a line to where the mouse is, shown here.  However, the problem with this is that  with a large brush size, many gaps appear between each \"line\" that is not straight since it is using the line's stroke size to create thick lines. The other way is to draw circles when the mouse moves as is shown here.  The problem with this is that gaps appear between each circle if the mouse moves faster than the computer detects mouse input. Here's a screenshot with my issues with both:  What is the best way to implement a brush like MS Paint's, with a decently-big brush size with no gaps in the stroke of the line or no gaps between each circle?"}, "answers": [{"id": 597401, "score": 16, "vote": 0, "content": "<p>Why not do both?</p>\n<p>Draw a circle at each endpoint and a line between the two.</p>\n<p><strong>EDIT</strong> rofl, just couldn't stop myself.  </p>\n<p>Actually, you don't want to use <code>pygame.draw.line</code> because it cheats. It fills a 1 pixel wide row or column (depending on angle of attack) of pixels. If you do go at a roughly perpendicular angle, 0 deg or 90 deg, this isn't an issue, but at 45's, you'll notice a sort of <em>string bean</em> effect.</p>\n<p>The only solution is to draw a circle at every pixel's distance. Here...</p>\n<pre><code class=\"python\">import pygame, random\n\nscreen = pygame.display.set_mode((800,600))\n\ndraw_on = False\nlast_pos = (0, 0)\ncolor = (255, 128, 0)\nradius = 10\n\ndef roundline(srf, color, start, end, radius=1):\n    dx = end[0]-start[0]\n    dy = end[1]-start[1]\n    distance = max(abs(dx), abs(dy))\n    for i in range(distance):\n        x = int( start[0]+float(i)/distance*dx)\n        y = int( start[1]+float(i)/distance*dy)\n        pygame.draw.circle(srf, color, (x, y), radius)\n\ntry:\n    while True:\n        e = pygame.event.wait()\n        if e.type == pygame.QUIT:\n            raise StopIteration\n        if e.type == pygame.MOUSEBUTTONDOWN:\n            color = (random.randrange(256), random.randrange(256), random.randrange(256))\n            pygame.draw.circle(screen, color, e.pos, radius)\n            draw_on = True\n        if e.type == pygame.MOUSEBUTTONUP:\n            draw_on = False\n        if e.type == pygame.MOUSEMOTION:\n            if draw_on:\n                pygame.draw.circle(screen, color, e.pos, radius)\n                roundline(screen, color, e.pos, last_pos,  radius)\n            last_pos = e.pos\n        pygame.display.flip()\n\nexcept StopIteration:\n    pass\n\npygame.quit()\n</code></pre>\n", "abstract": "Why not do both? Draw a circle at each endpoint and a line between the two. EDIT rofl, just couldn't stop myself.   Actually, you don't want to use pygame.draw.line because it cheats. It fills a 1 pixel wide row or column (depending on angle of attack) of pixels. If you do go at a roughly perpendicular angle, 0 deg or 90 deg, this isn't an issue, but at 45's, you'll notice a sort of string bean effect. The only solution is to draw a circle at every pixel's distance. Here..."}, {"id": 5900836, "score": 3, "vote": 0, "content": "<p>Not blitting at each loop step can improve the speed of the drawing (using this code adapted from the previous one allow to remove lag problem on my machine)</p>\n<pre><code class=\"python\">import pygame, random\n\nscreen = pygame.display.set_mode((800,600))\n\ndraw_on = False\nlast_pos = (0, 0)\ncolor = (255, 128, 0)\nradius = 10\n\ndef roundline(srf, color, start, end, radius=1):\n    dx = end[0]-start[0]\n    dy = end[1]-start[1]\n    distance = max(abs(dx), abs(dy))\n    for i in range(distance):\n        x = int( start[0]+float(i)/distance*dx)\n        y = int( start[1]+float(i)/distance*dy)\n        pygame.display.update(pygame.draw.circle(srf, color, (x, y), radius))\n\ntry:\n    while True:\n        e = pygame.event.wait()\n        if e.type == pygame.QUIT:\n            raise StopIteration\n        if e.type == pygame.MOUSEBUTTONDOWN:\n            color = (random.randrange(256), random.randrange(256), random.randrange(256))\n            pygame.draw.circle(screen, color, e.pos, radius)\n            draw_on = True\n        if e.type == pygame.MOUSEBUTTONUP:\n            draw_on = False\n        if e.type == pygame.MOUSEMOTION:\n            if draw_on:\n                pygame.display.update(pygame.draw.circle(screen, color, e.pos, radius))\n                roundline(screen, color, e.pos, last_pos,  radius)\n            last_pos = e.pos\n        #pygame.display.flip()\n\nexcept StopIteration:\n    pass\n\npygame.quit()\n</code></pre>\n", "abstract": "Not blitting at each loop step can improve the speed of the drawing (using this code adapted from the previous one allow to remove lag problem on my machine)"}, {"id": 5690387, "score": 2, "vote": 0, "content": "<p>For the first problem, you need have a background, even if its just a color. I had the same problem with a replica pong game i made. Here is an example of a replica paint program I made, left click to draw, right click to erase, click on the color image to choose a color, and up button to clear screen:</p>\n<pre><code class=\"python\">import os\nos.environ['SDL_VIDEO_CENTERED'] = '1'\nfrom pygamehelper import *\nfrom pygame import *\nfrom pygame.locals import *\nfrom vec2d import *\nfrom math import e, pi, cos, sin, sqrt\nfrom random import uniform\n\nclass Starter(PygameHelper):\n    def __init__(self):\n        self.w, self.h = 800, 600\n        PygameHelper.__init__(self, size=(self.w, self.h), fill=((255,255,255)))\n\n        self.img= pygame.image.load(\"colors.png\")\n        self.screen.blit(self.img, (0,0))\n\n        self.drawcolor= (0,0,0)\n        self.x= 0\n\n    def update(self):\n        pass\n\n    def keyUp(self, key):\n        if key==K_UP:\n            self.screen.fill((255,255,255))\n            self.screen.blit(self.img, (0,0))\n\n\n\n\n    def mouseUp(self, button, pos):\n        pass\n\n    def mouseMotion(self, buttons, pos, rel):\n        if pos[1]&gt;=172: \n            if buttons[0]==1:\n                #pygame.draw.circle(self.screen, (0,0,0), pos, 5)\n                pygame.draw.line(self.screen, self.drawcolor, pos, (pos[0]-rel[0], pos[1]-rel[1]),5)                \n            if buttons[2]==1:\n                pygame.draw.circle(self.screen, (255,255,255), pos, 30)\n            if buttons[1]==1:\n                #RAINBOW MODE\n                color= self.screen.get_at((self.x, 0))\n                pygame.draw.line(self.screen, color, pos, (pos[0]-rel[0], pos[1]-rel[1]), 5)\n\n                self.x+= 1\n                if self.x&gt;172: self.x=0\n\n        else:\n            if pos[0]&lt;172:\n                if buttons[0]==1:\n                    self.drawcolor= self.screen.get_at(pos)\n                    pygame.draw.circle(self.screen, self.drawcolor, (250, 100), 30)\n\n    def draw(self):\n        pass\n        #self.screen.fill((255,255,255))\n        #pygame.draw.circle(self.screen, (0,0,0), (50,100), 20)\n\ns = Starter()\ns.mainLoop(40)\n</code></pre>\n", "abstract": "For the first problem, you need have a background, even if its just a color. I had the same problem with a replica pong game i made. Here is an example of a replica paint program I made, left click to draw, right click to erase, click on the color image to choose a color, and up button to clear screen:"}, {"id": 50068400, "score": 1, "vote": 0, "content": "<p>Here's a simplified version of Matthew's <a href=\"https://stackoverflow.com/a/5690387/6220679\">example</a> which is unfortunately not runnable.</p>\n<p>When the mouse is moved, <code>pygame.MOUSEMOTION</code> events are added to the event queue which contain the position and the relative movement. You can use these to calculate the previous position and then pass the two points to <code>pygame.draw.line</code>.</p>\n<p><code>pygame.MOUSEMOTION</code> events also have a <code>buttons</code>  attribute which you can use to check which mouse button is currently down.</p>\n<pre><code class=\"python\">import os\nimport random\n\nimport pygame as pg\n\n\nclass App:\n\n    def __init__(self):\n        os.environ['SDL_VIDEO_CENTERED'] = '1'\n        pg.init()\n        self.w, self.h = 800, 600\n        self.screen = pg.display.set_mode((self.w, self.h))\n        self.screen.fill(pg.Color('white'))\n        self.clock = pg.time.Clock()\n        self.drawcolor = (0, 0, 0)\n\n    def mainloop(self):\n        while True:\n            for event in pg.event.get():\n                if event.type == pg.QUIT:\n                    return\n                elif event.type == pg.MOUSEBUTTONDOWN:\n                    if event.button == 2:  # Color picker (middle mouse button).\n                        self.drawcolor = self.screen.get_at(pos)\n                        # Pick a random color.\n                        # self.drawcolor = [random.randrange(256) for _ in range(3)]\n                elif event.type == pg.MOUSEMOTION:\n                    pos, rel = event.pos, event.rel\n                    if event.buttons[0]:  # If the left mouse button is down.\n                        # Draw a line from the pos to the previous pos.\n                        pg.draw.line(self.screen, self.drawcolor, pos, (pos[0]-rel[0], pos[1]-rel[1]), 5)\n                    elif event.buttons[2]:  # If the right mouse button is down.\n                        # Erase by drawing a circle.\n                        pg.draw.circle(self.screen, (255, 255, 255), pos, 30)\n\n            pg.display.flip()\n            self.clock.tick(30)\n\n\nif __name__ == '__main__':\n    app = App()\n    app.mainloop()\n    pg.quit()\n</code></pre>\n", "abstract": "Here's a simplified version of Matthew's example which is unfortunately not runnable. When the mouse is moved, pygame.MOUSEMOTION events are added to the event queue which contain the position and the relative movement. You can use these to calculate the previous position and then pass the two points to pygame.draw.line. pygame.MOUSEMOTION events also have a buttons  attribute which you can use to check which mouse button is currently down."}, {"id": 66404559, "score": 0, "vote": 0, "content": "<p>I have made a more efficient version of the roundline funktion.</p>\n<pre><code class=\"python\">import pygame as pg,random,math\n\n\nscreen = pg.display.set_mode((800,600))\n\ndraw_on = False\nlast_pos = (0, 0)\ncolor = (255, 128, 0)\nradius = 10\n\ndef roundline(srf, color, start, end, radius=1):\n    pg.display.update([drawline(srf,color,start,end,radius),\n                       pg.draw.circle(srf, color, end, radius),\n                       pg.draw.circle(srf, color, start, radius)])\n\ndef drawline(srf, color,start,end,width):\n    v=(start[0]- end[0],start[1]- end[1])\n    betrag=width/math.sqrt(v[0]*v[0]+v[1]*v[1])\n    v_=(v[1]*betrag,-betrag*v[0])\n    return pg.draw.polygon(srf, color,(\n            (int(start[0]+v_[0]),int(start[1]+v_[1])),\n            (int(start[0]-v_[0]),int(start[1]-v_[1])),\n            (int(end[0]-v_[0]),int(end[1]-v_[1])),\n            (int(end[0]+v_[0]),int(end[1]+v_[1]))\n            ))\n\ntry:\n    while True:\n        e = pg.event.wait()\n        if e.type == pg.QUIT:\n            raise StopIteration\n        elif e.type == pg.MOUSEBUTTONDOWN:\n            color = (random.randrange(256), random.randrange(256), random.randrange(256))\n            #pg.draw.circle(screen, color, e.pos, radius)\n            draw_on = True\n            start=e.pos\n        elif e.type == pg.MOUSEBUTTONUP:\n            draw_on = False\n        elif e.type == pg.MOUSEMOTION:\n            if draw_on:\n                roundline(screen, color, e.pos, last_pos,  radius)\n            last_pos = e.pos\n        elif e.type == pg.MOUSEWHEEL:\n            radius=max(1,radius+e.y)\nfinally:\n    pg.quit()\n\n</code></pre>\n", "abstract": "I have made a more efficient version of the roundline funktion."}]}, {"link": "https://stackoverflow.com/questions/2504143/how-to-resize-and-draw-an-image-using-wxpython", "question": {"id": "2504143", "title": "How to resize and draw an image using wxpython?", "content": "<p>I want to load an image, resize it to a given size and after draw it in a specific position in a panel.</p>\n<p>All this using wxpython.</p>\n<p>How can I do it?</p>\n<p>Thanks in advance!</p>\n", "abstract": "I want to load an image, resize it to a given size and after draw it in a specific position in a panel. All this using wxpython. How can I do it? Thanks in advance!"}, "answers": [{"id": 2504607, "score": 33, "vote": 0, "content": "<p><code>wx.Image</code> has a <code>Scale</code> method that will do the resizing.  The rest is normal wx coding.</p>\n<p>Here's a complete example for you.</p>\n<pre><code class=\"python\">import wx\n\ndef scale_bitmap(bitmap, width, height):\n    image = wx.ImageFromBitmap(bitmap)\n    image = image.Scale(width, height, wx.IMAGE_QUALITY_HIGH)\n    result = wx.BitmapFromImage(image)\n    return result\n\nclass Panel(wx.Panel):\n    def __init__(self, parent, path):\n        super(Panel, self).__init__(parent, -1)\n        bitmap = wx.Bitmap(path)\n        bitmap = scale_bitmap(bitmap, 300, 200)\n        control = wx.StaticBitmap(self, -1, bitmap)\n        control.SetPosition((10, 10))\n\nif __name__ == '__main__':\n    app = wx.PySimpleApp()\n    frame = wx.Frame(None, -1, 'Scaled Image')\n    panel = Panel(frame, 'input.jpg')\n    frame.Show()\n    app.MainLoop()\n</code></pre>\n", "abstract": "wx.Image has a Scale method that will do the resizing.  The rest is normal wx coding. Here's a complete example for you."}, {"id": 2504531, "score": 1, "vote": 0, "content": "<p>First off I think the wxPython Docs and Demos do a <em>great</em> job explaining how to use  their libraries, especially because the demos can be played with on the fly to see the affect or you can revert to the original.  Here is the Windows link to download all the files:</p>\n<p><a href=\"http://www.wxpython.org/download.php#binaries\" rel=\"nofollow noreferrer\">http://www.wxpython.org/download.php#binaries</a></p>\n<p>That said, here is the example code from the demo:</p>\n<pre><code class=\"python\">def runTest(frame, nb, log):\n    bmp = wx.Image(opj('bitmaps/image.bmp'), wx.BITMAP_TYPE_BMP).ConvertToBitmap()\n    gif = wx.Image(opj('bitmaps/image.gif'), wx.BITMAP_TYPE_GIF).ConvertToBitmap()\n    png = wx.Image(opj('bitmaps/image.png'), wx.BITMAP_TYPE_PNG).ConvertToBitmap()\n    jpg = wx.Image(opj('bitmaps/image.jpg'), wx.BITMAP_TYPE_JPEG).ConvertToBitmap()\n\n    panel = wx.Panel(nb, -1)\n\n    pos = 10\n    wx.StaticBitmap(panel, -1, bmp, (10, pos), (bmp.GetWidth(), bmp.GetHeight()))\n\n    pos = pos + bmp.GetHeight() + 10\n    wx.StaticBitmap(panel, -1, gif, (10, pos), (gif.GetWidth(), gif.GetHeight()))\n\n    pos = pos + gif.GetHeight() + 10\n    wx.StaticBitmap(panel, -1, png, (10, pos), (png.GetWidth(), png.GetHeight()))\n\n    pos = pos + png.GetHeight() + 10\n    wx.StaticBitmap(panel, -1, jpg, (10, pos), (jpg.GetWidth(), jpg.GetHeight()))\n\n    return panel\n</code></pre>\n<p>Here it shows how to load an image and displays it on a panel.  There are some objects not explained here, but it should give you the general gist.</p>\n", "abstract": "First off I think the wxPython Docs and Demos do a great job explaining how to use  their libraries, especially because the demos can be played with on the fly to see the affect or you can revert to the original.  Here is the Windows link to download all the files: http://www.wxpython.org/download.php#binaries That said, here is the example code from the demo: Here it shows how to load an image and displays it on a panel.  There are some objects not explained here, but it should give you the general gist."}, {"id": 8466013, "score": 1, "vote": 0, "content": "<p>If you mean adding the image to a toolbar / listbook / toolbook etc.. you will have to convert it to a bitmap (usually only bitmaps allowed).</p>\n<p>As far as i know you can't re-size a bitmap, therefore you will have to resize an image before and then convert it.</p>\n<p>Here is a good example <a href=\"http://markandclick.com/1/post/2011/12/wxpython-resize-embedded-bitmap-before-adding-it-as-a-tool.html\" rel=\"nofollow\">http://markandclick.com/1/post/2011/12/wxpython-resize-embedded-bitmap-before-adding-it-as-a-tool.html</a></p>\n<p>Here is a copy from the example:</p>\n<pre><code class=\"python\">def getFolderBitmap():\n  img = folder_icon.GetImage().Rescale(scaleW, scaleH)\n  return img.ConvertToBitmap()\n</code></pre>\n", "abstract": "If you mean adding the image to a toolbar / listbook / toolbook etc.. you will have to convert it to a bitmap (usually only bitmaps allowed). As far as i know you can't re-size a bitmap, therefore you will have to resize an image before and then convert it. Here is a good example http://markandclick.com/1/post/2011/12/wxpython-resize-embedded-bitmap-before-adding-it-as-a-tool.html Here is a copy from the example:"}]}, {"link": "https://stackoverflow.com/questions/26690932/opencv-rectangle-with-dotted-or-dashed-lines", "question": {"id": "26690932", "title": "opencv rectangle with dotted or dashed lines", "content": "<p>I have a line of code here that uses the python binding for opencv:</p>\n<pre><code class=\"python\">cv2.rectangle(img, (box[1], box[0]), (box[3], box[2]), (255,0,0), 4)\n</code></pre>\n<p>This draws a red rectangle on image <code>img</code> of thickness <code>4</code>.</p>\n<p>But is there a way the lines of the rectangles can be stylized? Not too much. Just dotted, or dashed, that's it really. </p>\n", "abstract": "I have a line of code here that uses the python binding for opencv: This draws a red rectangle on image img of thickness 4. But is there a way the lines of the rectangles can be stylized? Not too much. Just dotted, or dashed, that's it really. "}, "answers": [{"id": 26711359, "score": 19, "vote": 0, "content": "<pre><code class=\"python\">import cv2\nimport numpy as np\ndef drawline(img,pt1,pt2,color,thickness=1,style='dotted',gap=20):\n    dist =((pt1[0]-pt2[0])**2+(pt1[1]-pt2[1])**2)**.5\n    pts= []\n    for i in  np.arange(0,dist,gap):\n        r=i/dist\n        x=int((pt1[0]*(1-r)+pt2[0]*r)+.5)\n        y=int((pt1[1]*(1-r)+pt2[1]*r)+.5)\n        p = (x,y)\n        pts.append(p)\n\n    if style=='dotted':\n        for p in pts:\n            cv2.circle(img,p,thickness,color,-1)\n    else:\n        s=pts[0]\n        e=pts[0]\n        i=0\n        for p in pts:\n            s=e\n            e=p\n            if i%2==1:\n                cv2.line(img,s,e,color,thickness)\n            i+=1\n\ndef drawpoly(img,pts,color,thickness=1,style='dotted',):\n    s=pts[0]\n    e=pts[0]\n    pts.append(pts.pop(0))\n    for p in pts:\n        s=e\n        e=p\n        drawline(img,s,e,color,thickness,style)\n\ndef drawrect(img,pt1,pt2,color,thickness=1,style='dotted'):\n    pts = [pt1,(pt2[0],pt1[1]),pt2,(pt1[0],pt2[1])] \n    drawpoly(img,pts,color,thickness,style)\n\nim = np.zeros((800,800,3),dtype='uint8')\ns=(234,222)\ne=(500,700)\ndrawrect(im,s,e,(0,255,255),1,'dotted')\n\ncv2.imshow('im',im)\ncv2.waitKey()      \n</code></pre>\n", "abstract": ""}, {"id": 26693167, "score": 7, "vote": 0, "content": "<p>OpenCV does not (currently) support line properties beyond thickness and anti-aliasing.</p>\n", "abstract": "OpenCV does not (currently) support line properties beyond thickness and anti-aliasing."}, {"id": 26704073, "score": 5, "vote": 0, "content": "<ul>\n<li>openCV is opensource library so you can find source code for drawing and modify it slightly</li>\n<li><p>you can use <a href=\"http://docs.opencv.org/modules/core/doc/drawing_functions.html\" rel=\"nofollow noreferrer\">LineIterator</a> and get any style you want in a few lines of code</p>\n<pre><code class=\"python\">void lineDot(OutputArray img, const Point&amp; pt1, const Point&amp; pt2, const Scalar&amp; color, const vector&lt;bool&gt;&amp; pattern){\n    LineIterator it(img.getMat(), pt1, pt2, LINE_8); // LINE_AA is not supported here\n    for(auto i=0; i&lt;it.count; i++, it++){\n        if(pattern[i%pattern.size()]){ // use any pattern of any length, dotted is {0,0,1}, dashed is {0,0,0,1,1,1} etc\n            (*it)[0] = color.val[0];\n            (*it)[1] = color.val[1];\n            (*it)[2] = color.val[2];\n        }\n    }\n}\n</code></pre></li>\n</ul>\n", "abstract": "you can use LineIterator and get any style you want in a few lines of code"}, {"id": 56167305, "score": -2, "vote": 0, "content": "<p>Try something like this:</p>\n<pre><code class=\"python\">cv::Point P1, P2;\n\nP1.y = 50;\nP2.y = 50;\n\nint dot_gap = 50;\nint dot_width = 50;\n\nfor( int i=0 ; i &lt; in_img.cols; (i = i+d_width) ) {\n\n    P1.x = i;\n    P2.x = i + dot_width;\n    cv::line(in_img, P1, P2, cv::Scalar(0, 255, 255), 2, cv::LINE_8);\n}\n</code></pre>\n", "abstract": "Try something like this:"}]}, {"link": "https://stackoverflow.com/questions/15026178/pil-draw-text-with-different-colors", "question": {"id": "15026178", "title": "pil draw text with different colors", "content": "<p>Hi to draw three different text with different options for ex:</p>\n<ol>\n<li>text-number-1 , font=arial, color=red</li>\n<li>text-number-2 , font=veranda, color=blue, size=30</li>\n<li>text-number-3 , font=tahoma, color=green, size=40 , align=center </li>\n</ol>\n<p>text must go in new lines.</p>\n<pre><code class=\"python\">def pil_image(request):\ntext = request.GET.get('text', None)\nfont = str(request.GET.get('font', 'arial'))\nfontsize = int(request.GET.get('fontsize', '20'))\ntextcolor = str(request.GET.get('textcolor', '000'))\n\nimport Image, ImageDraw, ImageFont, textwrap\n\nimg = Image.open('media/text/transparent.png')\nimg = img.convert(\"RGBA\")\ndatas = img.getdata()\nw, h = img.size\n\nnewData = []\nfor item in datas:\n    if item[0] == 255 and item[1] == 255 and item[2] == 255:\n        newData.append((255, 255, 255, 0))\n    else:\n        newData.append(item)\n\nimg.putdata(newData)\n\ndraw = ImageDraw.Draw(img)\nfont = ImageFont.truetype(\"media/text/fonts/\" + font + \".ttf\", fontsize, encoding=\"unic\")\n\n\nmargin = offset = 40\nfor line in textwrap.wrap(text, width=48):\n    w, h = draw.textsize(line)\n    draw.text((margin, offset), line, font=font, fill='#'+textcolor)\n    offset += font.getsize(line)[1]\n\ndel draw \n\nimg.save(\"media/text/custom.png\", \"PNG\")\n\nreturn HttpResponse(\"&lt;img src='/media/text/custom.png'&gt;\");\n</code></pre>\n", "abstract": "Hi to draw three different text with different options for ex: text must go in new lines."}, "answers": [{"id": 15026978, "score": 21, "vote": 0, "content": "<p>The \"fill\" parameter should be a tuple with 4 number, as you use a RGBA colormode.</p>\n<p>For opaque red:</p>\n<pre><code class=\"python\">draw.text((margin, offset), line, font=font, fill=(255,0,0,255) )\n</code></pre>\n", "abstract": "The \"fill\" parameter should be a tuple with 4 number, as you use a RGBA colormode. For opaque red:"}, {"id": 61679147, "score": 5, "vote": 0, "content": "<p>Use hex value for colour, as follows:</p>\n<pre><code class=\"python\">draw.text((margin, offset), line, font=font, fill=\"#000\")\n</code></pre>\n", "abstract": "Use hex value for colour, as follows:"}, {"id": 41919902, "score": 3, "vote": 0, "content": "<p>simply do this</p>\n<pre><code class=\"python\"># thicker border\ndraw.text((x-1, y-1), text, font=font, fill=shadowcolor)\ndraw.text((x+1, y-1), text, font=font, fill=shadowcolor)\ndraw.text((x-1, y+1), text, font=font, fill=shadowcolor)\ndraw.text((x+1, y+1), text, font=font, fill=shadowcolor)\n</code></pre>\n", "abstract": "simply do this"}]}, {"link": "https://stackoverflow.com/questions/49340520/matplotlib-and-networkx-drawing-a-self-loop-node", "question": {"id": "49340520", "title": "Matplotlib and Networkx - drawing a self loop node", "content": "<p>I have this function and I want to draw a self loop. How can I do that?<br/>\nThe edge exists but I think it's just a point in this exemple is (1,1) and I couldn't add the name of nodes. \nMy goal is from adjacency matrix draw a graph. Is there there is better way to do this? </p>\n<pre><code class=\"python\">import networkx as nx\nimport matplotlib.pyplot as plt\nfrom matplotlib.patches import FancyArrowPatch, Circle\nimport numpy as np\n\ndef draw_network(G,pos,ax,sg=None):\n\n    for n in G:\n        c=Circle(pos[n],radius=0.05,alpha=0.7)\n        ax.add_patch(c)\n        G.node[n]['patch']=c\n        x,y=pos[n]\n    seen={}\n    for (u,v,d) in G.edges(data=True):\n        n1=G.node[u]['patch']\n        n2=G.node[v]['patch']\n        rad=0.1\n        if (u,v) in seen:\n            rad=seen.get((u,v))\n            rad=(rad+np.sign(rad)*0.1)*-1\n        alpha=0.5\n        color='k'\n\n        e = FancyArrowPatch(n1.center,n2.center,patchA=n1,patchB=n2,\n                            arrowstyle='-|&gt;',\n                            connectionstyle='arc3,rad=%s'%rad,\n                            mutation_scale=10.0,\n                            lw=2,\n                            alpha=alpha,\n                            color=color)\n        seen[(u,v)]=rad\n        ax.add_patch(e)\n    return e\n\n\nG=nx.MultiDiGraph([(1,2),(1,1),(1,2),(2,3),(3,4),(2,4),\n                (1,2),(1,2),(1,2),(2,3),(3,4),(2,4)]\n                )\n\npos=nx.spring_layout(G)\nax=plt.gca()\ndraw_network(G,pos,ax)\nax.autoscale()\nplt.axis('equal')\nplt.axis('off')\n\nplt.show()\n</code></pre>\n", "abstract": "I have this function and I want to draw a self loop. How can I do that?\nThe edge exists but I think it's just a point in this exemple is (1,1) and I couldn't add the name of nodes. \nMy goal is from adjacency matrix draw a graph. Is there there is better way to do this? "}, "answers": [{"id": 49386888, "score": 9, "vote": 0, "content": "<p>It seems that your approach is quite advanced a use of matplotlib, but I would still recommend using a specialized graph plotting library (<a href=\"https://networkx.github.io/documentation/networkx-1.11/reference/drawing.html\" rel=\"nofollow noreferrer\">as does the networkx documentation</a>).  As graphs get bigger, more problems arise -- but problems that have already been solved in those libraries.</p>\n<p>A \"go-to\" option is <a href=\"https://www.graphviz.org/gallery/\" rel=\"nofollow noreferrer\">graphviz</a>, which handles drawing multi-graphs reasonably well.  You can write dot files from networkx graphs, and then use one of the graph drawing tools (e.g. dot, neato, etc).</p>\n<p>Here is an example, building on <a href=\"https://stackoverflow.com/a/39662097\">graph attributes</a> and <a href=\"https://stackoverflow.com/a/26694158\">multigraph edge attributes</a>:</p>\n<pre><code class=\"python\">import networkx as nx\nfrom networkx.drawing.nx_agraph import to_agraph \n\n# define the graph as per your question\nG=nx.MultiDiGraph([(1,2),(1,1),(1,2),(2,3),(3,4),(2,4), \n    (1,2),(1,2),(1,2),(2,3),(3,4),(2,4)])\n\n# add graphviz layout options (see https://stackoverflow.com/a/39662097)\nG.graph['edge'] = {'arrowsize': '0.6', 'splines': 'curved'}\nG.graph['graph'] = {'scale': '3'}\n                                                                                \n# adding attributes to edges in multigraphs is more complicated but see\n# https://stackoverflow.com/a/26694158                    \nG[1][1][0]['color']='red'\n                                                                                \nA = to_agraph(G) \nA.layout('dot')                                                                 \nA.draw('multi.png')   \n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gqAsn.png\" rel=\"nofollow noreferrer\"><img alt=\"multi-graph with self loops\" src=\"https://i.stack.imgur.com/gqAsn.png\"/></a></p>\n<p>Note that you can also easily invoke the drawing from within an ipython shell:\n<a href=\"https://stackoverflow.com/a/14945560\">https://stackoverflow.com/a/14945560</a></p>\n", "abstract": "It seems that your approach is quite advanced a use of matplotlib, but I would still recommend using a specialized graph plotting library (as does the networkx documentation).  As graphs get bigger, more problems arise -- but problems that have already been solved in those libraries. A \"go-to\" option is graphviz, which handles drawing multi-graphs reasonably well.  You can write dot files from networkx graphs, and then use one of the graph drawing tools (e.g. dot, neato, etc). Here is an example, building on graph attributes and multigraph edge attributes:  Note that you can also easily invoke the drawing from within an ipython shell:\nhttps://stackoverflow.com/a/14945560"}]}, {"link": "https://stackoverflow.com/questions/47213650/changing-arrowhead-type-in-networkx", "question": {"id": "47213650", "title": "changing arrowhead type in networkx", "content": "<p>I am plotting directed graph using networkx in python. However, I found that arrow head of edge is thick from one end instead of pointed arrow. I want to change the thick edge to pointed arrow. Here is my code, actual output, and desired output:</p>\n<pre><code class=\"python\">import networkx as nx\nimport matplotlib.pyplot as plt\n\nG=nx.DiGraph()\n\nitem = [1,2]\n\nG.add_edge(*item) #color = item[-1], weight = 2)\n\npos = nx.circular_layout(G)    \nnx.draw(G, pos, with_labels = True, edge_color = 'b')   \nplt.show()\n</code></pre>\n<p>Output\n<a href=\"https://i.stack.imgur.com/kXP95.png\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/kXP95.png\"/></a></p>\n<p>Desired output:\n<a href=\"https://i.stack.imgur.com/W9vHt.png\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/W9vHt.png\"/></a></p>\n<p>Any suggestion would be really helpful?</p>\n", "abstract": "I am plotting directed graph using networkx in python. However, I found that arrow head of edge is thick from one end instead of pointed arrow. I want to change the thick edge to pointed arrow. Here is my code, actual output, and desired output: Output\n Desired output:\n Any suggestion would be really helpful?"}, "answers": [{"id": 51262925, "score": 12, "vote": 0, "content": "<p>This may be a late answer, but in the new version networkx 2.1 you can set the arrow type by using the <strong>arrowstyle</strong> and <strong>arrowsize</strong> parameter.</p>\n<pre><code class=\"python\">import networkx as nx\nimport matplotlib.pyplot as plt\n\nG=nx.DiGraph()\n\nitem = [1,2]\n\nG.add_edge(*item) #color = item[-1], weight = 2)\n\npos = nx.circular_layout(G)    \nnx.draw(G, pos, with_labels = True, edge_color = 'b', arrowsize=20, arrowstyle='fancy')   \nplt.show()\n</code></pre>\n<p>You can go to the documentation for details: <a href=\"https://networkx.github.io/documentation/stable/reference/generated/networkx.drawing.nx_pylab.draw_networkx_edges.html#networkx.drawing.nx_pylab.draw_networkx_edges\" rel=\"noreferrer\">https://networkx.github.io/documentation/stable/reference/generated/networkx.drawing.nx_pylab.draw_networkx_edges.html#networkx.drawing.nx_pylab.draw_networkx_edges</a></p>\n", "abstract": "This may be a late answer, but in the new version networkx 2.1 you can set the arrow type by using the arrowstyle and arrowsize parameter. You can go to the documentation for details: https://networkx.github.io/documentation/stable/reference/generated/networkx.drawing.nx_pylab.draw_networkx_edges.html#networkx.drawing.nx_pylab.draw_networkx_edges"}, {"id": 47996686, "score": 3, "vote": 0, "content": "<p>Good news.  This is possible now with the development version of networkx (will be networkx-2.1).  Your code now now draws arrows</p>\n<pre><code class=\"python\">In [5]: import networkx as nx\n   ...: import matplotlib.pyplot as plt\n   ...: \n   ...: G=nx.DiGraph()\n   ...: \n   ...: item = [1,2]\n   ...: \n   ...: G.add_edge(*item) #color = item[-1], weight = 2)\n   ...: \n   ...: pos = nx.circular_layout(G)    \n   ...: nx.draw(G, pos, with_labels = True, edge_color = 'b')   \n   ...: plt.show()\n   ...: \n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/N6RJN.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/N6RJN.png\"/></a></p>\n", "abstract": "Good news.  This is possible now with the development version of networkx (will be networkx-2.1).  Your code now now draws arrows "}, {"id": 47338796, "score": 2, "vote": 0, "content": "<p>This is not possible with nx.draw for now. According to <a href=\"https://github.com/networkx/networkx/blob/master/networkx/drawing/nx_pylab.py#L584\" rel=\"nofollow noreferrer\">https://github.com/networkx/networkx/blob/master/networkx/drawing/nx_pylab.py#L584</a> , it hasn't been implemented yet.</p>\n<p>However, you can try to use graphviz to plot your graph. Networkx has an interface to convert your graph to graphviz object easily. See <a href=\"https://networkx.github.io/documentation/stable/reference/drawing.html#module-networkx.drawing.nx_agraph\" rel=\"nofollow noreferrer\">https://networkx.github.io/documentation/stable/reference/drawing.html#module-networkx.drawing.nx_agraph</a>.</p>\n", "abstract": "This is not possible with nx.draw for now. According to https://github.com/networkx/networkx/blob/master/networkx/drawing/nx_pylab.py#L584 , it hasn't been implemented yet. However, you can try to use graphviz to plot your graph. Networkx has an interface to convert your graph to graphviz object easily. See https://networkx.github.io/documentation/stable/reference/drawing.html#module-networkx.drawing.nx_agraph."}]}, {"link": "https://stackoverflow.com/questions/12250117/how-to-draw-images-in-tkinter-window", "question": {"id": "12250117", "title": "How to draw images in tkinter window", "content": "<p>How do I draw an image in a tkinter window (I'm using python 3.3)? I'm looking for a statement which would draw an image at a given position on a tkinter window.</p>\n<p>yeah...</p>\n<p>Any answers would be appreciated. And here's the source code of the program (if it can be called that) that I want to use the code in, in case you need it.</p>\n<pre><code class=\"python\">from tkinter import *\n\nclass craftClass():\n    def __init__(self, x = 80, y = 80, xmotion = 0, ymotion = 0, health = 20):\n        self.xPos, self.yPos = x, y\n        self.dx, self.dy = xmotion, ymotion\n    def moveCraft(self):\n        self.xPos += self.dx\n        self.yPos += self.dy\n\nclass missileClass():\n    def __init__(self, x = 0 , y = 0):\n        self.xPos, self.yPos = x, y\n\nclass alienClass():\n    def __init__(self, x, y):\n        self.xPos, self.yPos = x, y\n\n    def moveForCraft(self, craftX, craftY):\n        if self.xPos &lt; craftX:\n            self.xPos += 2\n        elif self.xPos &gt; craftX:\n            self.xPos -= 2\n        else:\n            pass\n\n    if self.yPos &lt; craftY:\n        self.yPos += 2\n    elif self.yPos &gt; craftY:\n        self.yPos -= 2\n    else:\n        pass\n\ncraft = craftClass()\nmissileArray = []\nalienArray = []\n\ndef keypress(event):\n    if event.keysym == 'Escape':\n        root.destroy()\nx = event.char\nif x == \"w\":\n    craft.dy = 1\nelif x == \"s\":\n    craft.dy = -1\nelif x == \"a\":\n    craft.dx = -1\nelif x == \"d\":\n    craft.dx = 1\nelse:\n    print(x)\n\nroot = Tk()\nprint(craft.dx)\nwhile True:\ntry:\n    root.bind_all('&lt;Key&gt;', keypress)\n    craft.moveCraft()\n    root.update()\nexcept TclError:\n    print(\"exited. tcl error thrown. llop broken\")\n    break\n</code></pre>\n<p>I'm well aware that the spacing is sorta messed up, but that's something that happened while copying</p>\n", "abstract": "How do I draw an image in a tkinter window (I'm using python 3.3)? I'm looking for a statement which would draw an image at a given position on a tkinter window. yeah... Any answers would be appreciated. And here's the source code of the program (if it can be called that) that I want to use the code in, in case you need it. I'm well aware that the spacing is sorta messed up, but that's something that happened while copying"}, "answers": [{"id": 12254442, "score": 10, "vote": 0, "content": "<p>You will need to use a <code>Canvas</code> widget to put your images in specified (x,y) positions.</p>\n<p>In Python 3, you can do like this:</p>\n<pre><code class=\"python\">import tkinter\n\ntk = tkinter.Tk()\ncan = tkinter.Canvas(tk)\ncan.pack()\nimg = tkinter.PhotoImg(\"&lt;path/to/image_file&gt;.gif\")\ncan.create_image((x_coordinate, y_coordinate), img)\n</code></pre>\n<p>Please note that due to Python 3 not having an official <code>PIL</code><strong>*</strong> release, you are limited to read images of type <code>GIF</code>, <code>PGM</code> or <code>PPM</code> - if you need other file types, check <a href=\"https://stackoverflow.com/questions/11068872/pil-imagetk-equivalent-in-python-3-x\">this answer</a>.</p>\n<p>The Canvas widget is quite powerfull, and allows you to position your images, shows what is on it through an <code>\"canvas.update\"</code> call, and remove an item displayer with a <code>\"canvas.delete(item_id)\"</code> call. Check its <a href=\"http://effbot.org/tkinterbook/canvas.htm\" rel=\"nofollow noreferrer\">documentation</a>. </p>\n<p>While Tkinter should be enough for your simple game, consider taking a look at <a href=\"http://pygame.org\" rel=\"nofollow noreferrer\"><code>Pygame</code></a>, for a better multimedia support, or maybe <a href=\"http://www.pyglet.org/\" rel=\"nofollow noreferrer\">Pyglet</a>, or even higher level multimedia framework called <a href=\"http://kivy.org/\" rel=\"nofollow noreferrer\">Kivy</a>.</p>\n<p><strong>*</strong>(update): As of 2015, there is Pillow - a fork that is a drop in replacement of the old PIL project, and which resumed proper development of the project, including support for Python 3.x</p>\n", "abstract": "You will need to use a Canvas widget to put your images in specified (x,y) positions. In Python 3, you can do like this: Please note that due to Python 3 not having an official PIL* release, you are limited to read images of type GIF, PGM or PPM - if you need other file types, check this answer. The Canvas widget is quite powerfull, and allows you to position your images, shows what is on it through an \"canvas.update\" call, and remove an item displayer with a \"canvas.delete(item_id)\" call. Check its documentation.  While Tkinter should be enough for your simple game, consider taking a look at Pygame, for a better multimedia support, or maybe Pyglet, or even higher level multimedia framework called Kivy. *(update): As of 2015, there is Pillow - a fork that is a drop in replacement of the old PIL project, and which resumed proper development of the project, including support for Python 3.x"}, {"id": 58369666, "score": 3, "vote": 0, "content": "<h2><strong>The example displays an image on the canvas.</strong></h2>\n<pre><code class=\"python\">from PIL import Image, ImageTk\n</code></pre>\n<blockquote>\n<p>From the PIL (Python Imaging Library) module, we import the Image and\n  ImageTk modules.</p>\n</blockquote>\n<pre><code class=\"python\">self.img = Image.open(\"tatras.jpg\") //your image name :)\nself.tatras = ImageTk.PhotoImage(self.img)\n</code></pre>\n<blockquote>\n<p>Tkinter does not support JPG images internally. As a workaround, we\n  use the Image and ImageTk modules.</p>\n</blockquote>\n<pre><code class=\"python\">canvas = Canvas(self, width=self.img.size[0]+20,\n    height=self.img.size[1]+20)\n</code></pre>\n<p>We create the Canvas widget. It takes the size of the image into account. It is 20px wider and 20px higher than the actual image size.</p>\n<pre><code class=\"python\">canvas.create_image(10, 10, anchor=NW, image=self.tatras)\n</code></pre>\n<hr/>\n<p>Reference see: <a href=\"https://tutorialspoint.com/python/tk_canvas.htm\" rel=\"nofollow noreferrer\">https://tutorialspoint.com/python/tk_canvas.htm</a></p>\n", "abstract": "From the PIL (Python Imaging Library) module, we import the Image and\n  ImageTk modules. Tkinter does not support JPG images internally. As a workaround, we\n  use the Image and ImageTk modules. We create the Canvas widget. It takes the size of the image into account. It is 20px wider and 20px higher than the actual image size. Reference see: https://tutorialspoint.com/python/tk_canvas.htm"}, {"id": 12250215, "score": 1, "vote": 0, "content": "<p>This depends a lot on the file format.  Tkinter has a <a href=\"http://effbot.org/tkinterbook/photoimage.htm\" rel=\"nofollow\">PhotoImage</a> class which can be used in <code>Labels</code> quite easily if your image is a <code>.gif</code>.  You can also add them to canvas widgets reasonably easily.  Otherwise, you might want to use PIL to convert an image to a <code>PhotoImage</code>.</p>\n", "abstract": "This depends a lot on the file format.  Tkinter has a PhotoImage class which can be used in Labels quite easily if your image is a .gif.  You can also add them to canvas widgets reasonably easily.  Otherwise, you might want to use PIL to convert an image to a PhotoImage."}]}, {"link": "https://stackoverflow.com/questions/8792570/draw-simple-shapes-and-save-to-file-pdf", "question": {"id": "8792570", "title": "Draw simple shapes and save to file (pdf)", "content": "<p>I am looking for a python library that I can use to draw simple shapes and characters and then save to a file (in a format convertible to pdf). I would prefer if I did not need an X-server running.</p>\n<p>E.g. could look something like this</p>\n<pre><code class=\"python\">import drawing_lib\nobj = drawing_lib.Object()\nfor i in range(5):\n    obj.draw_line(from=(i*10, 20), to=(i*10+10, 35))\nobj.save_pdf('five_inclined_lines.pdf')\n</code></pre>\n<p>Any Ideas?</p>\n", "abstract": "I am looking for a python library that I can use to draw simple shapes and characters and then save to a file (in a format convertible to pdf). I would prefer if I did not need an X-server running. E.g. could look something like this Any Ideas?"}, "answers": [{"id": 8792758, "score": 10, "vote": 0, "content": "<p>You can do this with cairo.</p>\n<pre><code class=\"python\">import math,cairo\n\nwidth, height = 768,768\nsurface = cairo.PDFSurface (\"circle.pdf\", width, height)\nctx = cairo.Context (surface)\nctx.set_source_rgb(1,1,1)\nctx.rectangle(0,0,width,height)\nctx.fill()\nctx.set_source_rgb(1,0,0)\nctx.move_to(width/2,height/2)\nctx.arc(width/2,height/2,512*0.25,0,math.pi*2)\nctx.fill()\nctx.show_page()\n</code></pre>\n<p>See also:</p>\n<ul>\n<li><a href=\"http://www.tortall.net/mu/wiki/CairoTutorial\" rel=\"nofollow noreferrer\">http://www.tortall.net/mu/wiki/CairoTutorial</a></li>\n</ul>\n", "abstract": "You can do this with cairo. See also:"}, {"id": 8792790, "score": 2, "vote": 0, "content": "<p>There are several such libraries.</p>\n<p>Personally I would recommend <a href=\"https://bitbucket.org/rptlab/reportlab\" rel=\"nofollow noreferrer\">reportlab</a> for its highly versatile nature.</p>\n", "abstract": "There are several such libraries. Personally I would recommend reportlab for its highly versatile nature."}, {"id": 64586439, "score": 1, "vote": 0, "content": "<p>There are indeed, as Roman Susu and Dov Grobgeld state, a couple of libraries to do that.</p>\n<p>I have experimented with a few myself. I feel three of them are worth mentioning here too, apart from (as mentioned before), Cairo and reportlab</p>\n<ol>\n<li>FPDF port for python: <a href=\"https://pyfpdf.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://pyfpdf.readthedocs.io/en/latest/</a></li>\n<li>PyX (<a href=\"https://pyx-project.org/\" rel=\"nofollow noreferrer\">https://pyx-project.org/</a>) Which is a LaTeX way of working with PDF</li>\n<li>Writing PostScripts (PS) files and converting them using Ghostscript.</li>\n</ol>\n<p>Number 3 is more efficient than you would think. PS is at the lowest level quite understandable and gives you a lot of control. Everything is of course very dependent on the your case.</p>\n", "abstract": "There are indeed, as Roman Susu and Dov Grobgeld state, a couple of libraries to do that. I have experimented with a few myself. I feel three of them are worth mentioning here too, apart from (as mentioned before), Cairo and reportlab Number 3 is more efficient than you would think. PS is at the lowest level quite understandable and gives you a lot of control. Everything is of course very dependent on the your case."}]}, {"link": "https://stackoverflow.com/questions/46843897/how-to-draw-a-circle-in-pygame", "question": {"id": "46843897", "title": "How to draw a circle in PyGame?", "content": "<p>Hi I am having a problem with drawing a circle <code>ERROR: module object has no attribute 'circle'</code>. what am I doing wrong?</p>\n<p>And also how can I put numbers in circles?</p>\n<p>For example: (first click is circle with 0 second is circle with 1 and so on)</p>\n<pre><code class=\"python\">import pygame\n\nWHITE =     (255, 255, 255)\nBLUE =      (  0,   0, 255)\nGREEN =     (  0, 255,   0)\nRED =       (255,   0,   0)\nTEXTCOLOR = (  0,   0,  0)\n(width, height) = (200, 300)\n\nrunning = True\n\ndef main():\n    global running, screen\n    \n    pygame.init()\n    screen = pygame.display.set_mode((width, height))\n    pygame.display.set_caption(\"TUFF\")\n    screen.fill(background_color)\n    pygame.display.update()\n    \n    while running:\n        ev = pygame.event.get()\n\n        for event in ev:\n            if event.type == pygame.MOUSEBUTTONUP:\n                draw_circle()\n                pygame.display.update()\n\n            if event.type == pygame.QUIT:\n                running = False\n\ndef get_pos():\n    pos = pygame.mouse.get_pos()\n    return (pos)\n\ndef draw_circle():\n    pos=get_pos()\n    pygame.draw.circle(screen, BLUE, pos, 20)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n", "abstract": "Hi I am having a problem with drawing a circle ERROR: module object has no attribute 'circle'. what am I doing wrong? And also how can I put numbers in circles? For example: (first click is circle with 0 second is circle with 1 and so on)"}, "answers": [{"id": 46843934, "score": 15, "vote": 0, "content": "<p>You've mistyped the name of the function. The correct name is <a href=\"https://www.pygame.org/docs/ref/draw.html#pygame.draw.circle\" rel=\"noreferrer\">pygame.draw.circle</a>.</p>\n<pre><code class=\"python\">def drawCircle():\n    pos=getPos()\n    pygame.draw.circle(screen, BLUE, pos, 20) # Here &lt;&lt;&lt;\n</code></pre>\n", "abstract": "You've mistyped the name of the function. The correct name is pygame.draw.circle."}, {"id": 65050164, "score": 3, "vote": 0, "content": "<p>Here is how you can draw a circle in pygame;</p>\n<pre><code class=\"python\">import pygame\npygame.init()\nscreen = pygame.display.set_mode((x, y)) #x and y are height and width\n\npygame.draw.circle(screen, (r,g,b), (x, y), R, w) #(r, g, b) is color, (x, y) is center, R is radius and w is the thickness of the circle border.\n</code></pre>\n", "abstract": "Here is how you can draw a circle in pygame;"}, {"id": 67986949, "score": 2, "vote": 0, "content": "<p><strong>Here is how you can draw a circle properly</strong></p>\n<pre><code class=\"python\">import pygame\n\nwindow = pygame.display.set_mode((500,500))\nred = (200,0,0)\n\ncircleX = 100\ncircleY = 100\nradius = 10\n\nactive = True\n\nwhile active:\n   for event in pygame.event.get():\n      if event.type == pygame.QUIT:\n         active = False\n\n   pygame.draw.circle(window,red,(circleX,circleY),radius) # DRAW CIRCLE\n\n   pygame.display.update()\n</code></pre>\n", "abstract": "Here is how you can draw a circle properly"}, {"id": 58263732, "score": 1, "vote": 0, "content": "<p>Mainter a counter for the number of circles you have drawn and write the number with the co-ordinates same as the centre of the circle.\nAlso the command is pygame.draw.circle and not pygame.draw.circl</p>\n", "abstract": "Mainter a counter for the number of circles you have drawn and write the number with the co-ordinates same as the centre of the circle.\nAlso the command is pygame.draw.circle and not pygame.draw.circl"}]}, {"link": "https://stackoverflow.com/questions/22777049/how-can-i-draw-a-circle-in-a-data-array-map-in-python", "question": {"id": "22777049", "title": "How can I draw a circle in a data array/map in python", "content": "<p>I have an array that will be 100 * 100, I can access any point like</p>\n<p><code>map[x][y]</code></p>\n<p>It kinda will look like this:</p>\n<pre><code class=\"python\">for i in map:\n    for ii in i:\n        print ii,\n    print '\\n',\n</code></pre>\n<p>output:</p>\n<pre><code class=\"python\">. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n. . . . . . . . . . .\n</code></pre>\n<p>I want to make a circle in it like:</p>\n<pre><code class=\"python\">. . . . . # . . . . .\n. . . # # . # # . . .\n. . # . . . . . # . .\n. # . . . . . . . # .\n. # . . . . . . . # .\n# . . . . . . . . . #\n. # . . . . . . . # .\n. # . . . . . . . # .\n. . # . . . . . # . .\n. . . # # . # # . . .\n. . . . . # . . . . .\n</code></pre>\n<p>How can i do this?</p>\n<p>I want to try and make a triangulation system where i will find the point that 3 circles will overlap.\nIs there any other way I can achieve this.</p>\n<p>I just want to get the distance (dots from center) and the direction.</p>\n", "abstract": "I have an array that will be 100 * 100, I can access any point like map[x][y] It kinda will look like this: output: I want to make a circle in it like: How can i do this? I want to try and make a triangulation system where i will find the point that 3 circles will overlap.\nIs there any other way I can achieve this. I just want to get the distance (dots from center) and the direction."}, "answers": [{"id": 22778207, "score": 11, "vote": 0, "content": "<p>The basic formula for a circle is</p>\n<pre><code class=\"python\">(x - a)**2 + (y - b)**2 = r**2\n</code></pre>\n<p>Where (x, y) is a point, (a, b) is the center of the circle and r is the radius.</p>\n<pre><code class=\"python\">width, height = 11, 11\na, b = 5, 5\nr = 5\nEPSILON = 2.2\n\nmap_ = [['.' for x in range(width)] for y in range(height)]\n\n# draw the circle\nfor y in range(height):\n    for x in range(width):\n        # see if we're close to (x-a)**2 + (y-b)**2 == r**2\n        if abs((x-a)**2 + (y-b)**2 - r**2) &lt; EPSILON**2:\n            map_[y][x] = '#'\n\n# print the map\nfor line in map_:\n    print ' '.join(line)\n</code></pre>\n<p>This results in</p>\n<pre><code class=\"python\">. . . # # # # # . . .\n. . # . . . . . # . .\n. # . . . . . . . # .\n# . . . . . . . . . #\n# . . . . . . . . . #\n# . . . . . . . . . #\n# . . . . . . . . . #\n# . . . . . . . . . #\n. # . . . . . . . # .\n. . # . . . . . # . .\n. . . # # # # # . . .\n</code></pre>\n<p>You'll have to fiddle with the value for <code>EPSILON</code> with this method.</p>\n<p>Alternatively, iterate by angle and calculate the (x,y) coordinate as you go</p>\n<pre><code class=\"python\">import math\n# draw the circle\nfor angle in range(0, 360, 5):\n    x = r * math.sin(math.radians(angle)) + a\n    y = r * math.cos(math.radians(angle)) + b\n    map_[int(round(y))][int(round(x))] = '#'\n</code></pre>\n<p>Gives:</p>\n<pre><code class=\"python\">. . . # # # # # . . .\n. # # . . . . . # # .\n. # . . . . . . . # .\n# . . . . . . . . # #\n# . . . . . . . . . #\n# . . . . . . . . . #\n# . . . . . . . . . #\n# . . . . . . . . . #\n. # . . . . . . . # .\n. # # . . . . . # # .\n. . . # # # # # . . .\n</code></pre>\n", "abstract": "The basic formula for a circle is Where (x, y) is a point, (a, b) is the center of the circle and r is the radius. This results in You'll have to fiddle with the value for EPSILON with this method. Alternatively, iterate by angle and calculate the (x,y) coordinate as you go Gives:"}, {"id": 22778095, "score": 4, "vote": 0, "content": "<p>The formula of circle is </p>\n<pre><code class=\"python\">(x-a)^2 + (y-b)^2 - r^2 = 0\n</code></pre>\n<p>where <em>x,y</em> are coodrinates of point, <em>a,b</em> are coordinates of center and <em>r</em> is the circle radius. Just find all points for which this equation is true. Since your field is integer, you will need to replace <code>=0</code> with <code>&lt;1</code> or even <code>&lt;= 1</code> whatever looks best.</p>\n", "abstract": "The formula of circle is  where x,y are coodrinates of point, a,b are coordinates of center and r is the circle radius. Just find all points for which this equation is true. Since your field is integer, you will need to replace =0 with <1 or even <= 1 whatever looks best."}]}, {"link": "https://stackoverflow.com/questions/42351302/draw-two-sided-arrow-on-image-using-opencv-python", "question": {"id": "42351302", "title": "Draw two-sided arrow on image using opencv python", "content": "<p>I want to draw two sided arrow between two points using opencv. I have got one function for single arrow plot which is follows</p>\n<pre><code class=\"python\">import cv2\n\nimg = cv2.imread('image.jpg', cv2.IMREAD_COLOR)\npt1 = (x1, y1)\npt2 = (x2, y2)\ncv2.arrowedLine(img_, pt1, pt2, (0,0,255), 5)\ncv2.imshow('Image with arrow', img)\ncv2.waitKey(0)\n</code></pre>\n<p>But is there any method for plotting two sided arrows between two points? I have read the documentation but did not find any. Please guide. Thanks.</p>\n", "abstract": "I want to draw two sided arrow between two points using opencv. I have got one function for single arrow plot which is follows But is there any method for plotting two sided arrows between two points? I have read the documentation but did not find any. Please guide. Thanks."}, "answers": [{"id": 42351333, "score": 10, "vote": 0, "content": "<p>Well This may not be the best way, but with minimal effort I would use the same <code>cv2.arrowedLine</code> method twice with the points order reversed as :</p>\n<pre><code class=\"python\">cv2.arrowedLine(img_, pt1, pt2, (0,0,255), 5)\ncv2.arrowedLine(img_, pt2, pt1, (0,0,255), 5)\n</code></pre>\n", "abstract": "Well This may not be the best way, but with minimal effort I would use the same cv2.arrowedLine method twice with the points order reversed as :"}]}, {"link": "https://stackoverflow.com/questions/10549634/how-to-draw-a-line-in-python-mayavi", "question": {"id": "10549634", "title": "How to draw a line in Python Mayavi?", "content": "<p>How to draw a line in 3D space in Python Mayavi? Is there a function from MLAB module that allows me to specify the start and end point of the line which will be drawn?</p>\n", "abstract": "How to draw a line in 3D space in Python Mayavi? Is there a function from MLAB module that allows me to specify the start and end point of the line which will be drawn?"}, "answers": [{"id": 25864803, "score": 6, "vote": 0, "content": "<p>One important feature you can use when drawing lines is to represent them as a tube. The following example I used to draw the X, Y, Z axis along with the 3D figure (note that in my case the dimensions are big, so that you might want to adjust them):</p>\n<pre><code class=\"python\">import mayavi.mlab as mlab\n\nblack = (0,0,0)\nwhite = (1,1,1)\nmlab.figure(bgcolor=white)\nmlab.plot3d([0, 1000], [0, 0], [0, 0], color=black, tube_radius=10.)\nmlab.plot3d([0, 0], [0, 1500], [0, 0], color=black, tube_radius=10.)\nmlab.plot3d([0, 0], [0, 0], [0, 1500], color=black, tube_radius=10.)\nmlab.text3d(1050, -50, +50, 'X', color=black, scale=100.)\nmlab.text3d(0, 1550, +50, 'Y', color=black, scale=100.)\nmlab.text3d(0, -50, 1550, 'Z', color=black, scale=100.)\n</code></pre>\n", "abstract": "One important feature you can use when drawing lines is to represent them as a tube. The following example I used to draw the X, Y, Z axis along with the 3D figure (note that in my case the dimensions are big, so that you might want to adjust them):"}, {"id": 11586587, "score": 5, "vote": 0, "content": "<p>Check the documentation for mayavi; 3d plotting is in the tutorials and documented <a href=\"http://docs.enthought.com/mayavi/mayavi/auto/mlab_helper_functions.html#mayavi.mlab.plot3d\" rel=\"noreferrer\">here</a>.\nIt's part of <code>mlab</code>, <code>mayavi.mlab.plot3d(*args, **kwargs)</code>.</p>\n<p>The syntax is</p>\n<pre><code class=\"python\">plot3d(x, y, z, ...)\n</code></pre>\n", "abstract": "Check the documentation for mayavi; 3d plotting is in the tutorials and documented here.\nIt's part of mlab, mayavi.mlab.plot3d(*args, **kwargs). The syntax is"}]}, {"link": "https://stackoverflow.com/questions/18064041/drawing-diagonal-lines-across-a-picture", "question": {"id": "18064041", "title": "Drawing Diagonal Lines Across a Picture", "content": "<p>I am trying to draw parallel lines diagonally from the top right corner to the bottom left corner of a picture. I want it to look like this (lovely paint pic)</p>\n<p><img alt=\"diag paint pic\" src=\"https://i.stack.imgur.com/2o5js.png\"/></p>\n<pre><code class=\"python\">def diagTopLBottomR():\n  pic=makePicture(pickAFile())\n  w=getWidth(pic)\n  h=getHeight(pic)\n  x1=0\n  y1=0\n  x2=0\n  y2=0\n  i=0\n  while i&lt;11:\n    x1=10*i\n    y2=10*i\n    i+=1\n    for y in range (y1,y2):\n      x = (y-y1)*(x2-x1)/(y2-y1) +x1\n      px=getPixel(pic,x,y)\n      color=makeColor(0,0,0)\n      setColor(px, color)\n  x3=0\n  y3=h\n  x4=w\n  y4=0\n  j=0\n  while j&lt;10:\n    x3=10*j\n    y4=10*j\n    j+=1\n    for y in range (y3,y4):\n      x = (y-y3)*(x4-x3)/(y4-y3) +x3\n      px=getPixel(pic,x,y)\n      color=makeColor(0,0,0)\n      setColor(px, color)\n\n  return(pic)\n</code></pre>\n<p><strong>You'll note</strong> that the x3 will either be max value, causing an outof range exception, or the y range will start with a higher value ie (y3&gt;y4) and doesn't work in reverse, or when I decrement it. It's like a paradox.</p>\n<p>The first loop is working, no matter what I try I cannot get the second loop to work. This is what I'm ending up with.</p>\n<p><img alt=\"diag lines\" src=\"https://i.stack.imgur.com/BjagA.png\"/></p>\n<p>Any ideas? Thanks.</p>\n<hr/>\n<p><strong>Edit</strong></p>\n<p>I have played around with the ranges, and either get no result for the second loop, as shown above of an out of range exception.</p>\n<p>I have tried:</p>\n<pre><code class=\"python\">  x3=0\n  y3=h\n  x4=w\n  y4=0\n  j=0\n  while j&lt;10:\n    x3=10*j\n    y4=10*j\n    j+=1\n    for x in range (x3,x4):\n      y = (x-x3)*(y4-y3)/(x4-x3) +y3\n</code></pre>\n<hr/>\n<p><em>Stole Unicorns <a href=\"https://meta.stackexchange.com/questions/37328/my-godits-full-of-unicorns\">from here</a>.</em></p>\n", "abstract": "I am trying to draw parallel lines diagonally from the top right corner to the bottom left corner of a picture. I want it to look like this (lovely paint pic)  You'll note that the x3 will either be max value, causing an outof range exception, or the y range will start with a higher value ie (y3>y4) and doesn't work in reverse, or when I decrement it. It's like a paradox. The first loop is working, no matter what I try I cannot get the second loop to work. This is what I'm ending up with.  Any ideas? Thanks. Edit I have played around with the ranges, and either get no result for the second loop, as shown above of an out of range exception. I have tried: Stole Unicorns from here."}, "answers": [{"id": 18064451, "score": 8, "vote": 0, "content": "<p>In the first part, <code>y1</code> is set to 0 and <code>y2</code> increases from 0 in the loop, so <code>y1 &lt; y2</code>. This is fine because you use</p>\n<pre><code class=\"python\">for y in range (y1,y2)\n</code></pre>\n<p>In the second part, <code>y3</code> is set to <code>h</code> (128 in your case, I guess) and <code>y4</code> increases from 0 in the loop, so <code>y3 &gt; y4</code>. This is NOT fine because you use</p>\n<pre><code class=\"python\">for y in range (y3,y4)\n</code></pre>\n<p>You could try stepping backwards by giving <code>range()</code> a third parameter indicating a step size of -1. Or you could switch <code>y3</code> and <code>y4</code> (be cautious of what this does to the rest of your code).</p>\n", "abstract": "In the first part, y1 is set to 0 and y2 increases from 0 in the loop, so y1 < y2. This is fine because you use In the second part, y3 is set to h (128 in your case, I guess) and y4 increases from 0 in the loop, so y3 > y4. This is NOT fine because you use You could try stepping backwards by giving range() a third parameter indicating a step size of -1. Or you could switch y3 and y4 (be cautious of what this does to the rest of your code)."}, {"id": 18064441, "score": 5, "vote": 0, "content": "<p><code>range()</code> assumes the first parameter is less than the second parameter, and it goes in an ascending order.  You have:</p>\n<pre><code class=\"python\">for y in range (y3,y4):\n</code></pre>\n<p>where <code>y3=h</code> and <code>y4=0</code> (on the first pass).  Since y3 &gt; y4, this loop does nothing.\nYou can use either:</p>\n<pre><code class=\"python\">for y in range(y4,y3):\n</code></pre>\n<p>or</p>\n<pre><code class=\"python\">for y in range(y3,y4,-1):\n</code></pre>\n", "abstract": "range() assumes the first parameter is less than the second parameter, and it goes in an ascending order.  You have: where y3=h and y4=0 (on the first pass).  Since y3 > y4, this loop does nothing.\nYou can use either: or"}, {"id": 18064534, "score": 5, "vote": 0, "content": "<p>In the second loop, <code>y3</code> is greater (or equal) than <code>y4</code>.  So, try <code>range (y4,y3)</code>.</p>\n", "abstract": "In the second loop, y3 is greater (or equal) than y4.  So, try range (y4,y3)."}, {"id": 18064977, "score": 2, "vote": 0, "content": "<p>I solved it by making <code>px=getPixel(pic,x,y-1)</code>  and using the suggested answers of decrementing y range.</p>\n<pre><code class=\"python\">def diagTopLBottomR():\n  pic=makePicture(pickAFile())\n  w=getWidth(pic)\n  h=getHeight(pic)\n  x1=0\n  y1=0\n  x2=0\n  y2=0\n  i=0\n  while i&lt;10:\n    x1=10*i\n    y2=10*i\n    i+=1\n    for y in range (y1,y2):\n      x = (y-y1)*(x2-x1)/(y2-y1) +x1\n      px=getPixel(pic,x,y)\n      color=makeColor(0,0,0)\n      setColor(px, color)\n  x3=0\n  y3=h\n  x4=w\n  y4=0\n  j=0\n  while j&lt;10:\n    x3=10*j\n    y4=10*j\n    j+=1\n    for y in range (y3,y4,-1):#change here\n      x = abs((y-y3)*(x4-x3)/(y4-y3) +x3)\n      px=getPixel(pic,x,y-1)#change here\n      color=makeColor(0,0,0)\n      setColor(px, color)\n\n  return(pic)\n</code></pre>\n<p><img alt=\"pic\" src=\"https://i.stack.imgur.com/KBaZI.png\"/></p>\n", "abstract": "I solved it by making px=getPixel(pic,x,y-1)  and using the suggested answers of decrementing y range. "}]}, {"link": "https://stackoverflow.com/questions/7462958/cant-use-variables-in-pygame-draw-circle", "question": {"id": "7462958", "title": "Can&#39;t use variables in pygame.draw.circle?", "content": "<p>When I try to make a shape using variables, I keep getting this error message:</p>\n<p>\"TypeError: integer argument expected, got float\"</p>\n<pre><code class=\"python\">import pygame._view\nimport pygame, sys\nfrom pygame.locals import *\nimport random\n\npygame.init()\n</code></pre>\n<p>...</p>\n<pre><code class=\"python\">barrel = pygame.image.load(\"images\\Barrel.gif\")\nbarrel_create = 0\nbarrelx = screen.get_height()- barrel.get_height()\nbarrely = screen.get_width()/2 - barrel.get_width()/2\nbarrel_exist = 0\nexplosion_delay = 0\n</code></pre>\n<p>...</p>\n<pre><code class=\"python\">while running:\n\n    if barrel_exist == 0:\n        if barrel_create == 500:\n            barrely = 200\n        barrelx = random.randint(0,400)\n        barrel_exist = 1\n    if barrel_exist == 1:\n        barrely = barrely + 0.1\n        if barrely &gt; 400:\n            barrel_exist = 0\n\n    if explosion_delay &gt; 0:\n        pygame.draw.circle(screen, (0,255,0), (barrelx, barrely), 64, 0)\n    explosion_delay = explosion_delay + 1\n\n    if explosion_delay == 100:\n    explosion_delay = 0\n</code></pre>\n<p>The explosion_delay &gt; 0 when the barrel is \"shot\".</p>\n", "abstract": "When I try to make a shape using variables, I keep getting this error message: \"TypeError: integer argument expected, got float\" ... ... The explosion_delay > 0 when the barrel is \"shot\"."}, "answers": [{"id": 7463185, "score": 8, "vote": 0, "content": "<p><code>barrely = barrely + 0.1</code></p>\n<p><code>barrely</code> must be a float at some point because of this line.</p>\n<p>I think you should do <code>pygame.draw.circle(screen, (0,255,0), (int(barrelx), int(barrely)), 64, 0)</code> to truncate the variables to integers as the function requires.</p>\n", "abstract": "barrely = barrely + 0.1 barrely must be a float at some point because of this line. I think you should do pygame.draw.circle(screen, (0,255,0), (int(barrelx), int(barrely)), 64, 0) to truncate the variables to integers as the function requires."}, {"id": 7462981, "score": 2, "vote": 0, "content": "<p>You don't say which line is giving the error, but if you're using Python 3, <code>/</code> gives a <code>float</code> result. Use <code>//</code> for an integer.</p>\n", "abstract": "You don't say which line is giving the error, but if you're using Python 3, / gives a float result. Use // for an integer."}, {"id": 59518696, "score": 1, "vote": 0, "content": "<p>I change from </p>\n<pre><code class=\"python\">pygame.draw.circle(win, self.color,(self.x, self.y), \n           self.radius)\n</code></pre>\n<p>to </p>\n<pre><code class=\"python\">pygame.draw.circle(win, self.color, (int(self.x), \n          int(self.y)), int(self.radius))\n</code></pre>\n<p>and it work fine. I use python 2.7</p>\n", "abstract": "I change from  to  and it work fine. I use python 2.7"}, {"id": 7866416, "score": 0, "vote": 0, "content": "<p>Thanks for all the answers - just wanted to note, that I also bumped in the very same problem, in respect to <a href=\"http://pyode.sourceforge.net/tutorials/tutorial2.html\" rel=\"nofollow\">PyODE Tutorial 2</a> (which is done with <code>pygame</code>); thanks to the notes in this thread, I modified it so it works, and it's here: <a href=\"http://sdaaubckp.svn.sourceforge.net/viewvc/sdaaubckp/single-scripts/pyode-pygame-example2.py?view=markup\" rel=\"nofollow\">pyode-pygame-example2.py</a>. </p>\n<p>Note, however, that is <em>does</em> matter where you cast to int - if you have a function calculating coordinates, you'd want to \"integerize\" its return (the 'final' coordinates), not its arguments :) (<em>mistake I made in the script above</em>)</p>\n", "abstract": "Thanks for all the answers - just wanted to note, that I also bumped in the very same problem, in respect to PyODE Tutorial 2 (which is done with pygame); thanks to the notes in this thread, I modified it so it works, and it's here: pyode-pygame-example2.py.  Note, however, that is does matter where you cast to int - if you have a function calculating coordinates, you'd want to \"integerize\" its return (the 'final' coordinates), not its arguments :) (mistake I made in the script above)"}]}, {"link": "https://stackoverflow.com/questions/5940935/pygame-how-to-draw-in-non-rectangle-clipping-area", "question": {"id": "5940935", "title": "Pygame: How to draw in non rectangle clipping area", "content": "<p>Hi I would like to set in pygame non rectangle clipping area (in this case as character \"P\"), where it would be strict limited, where to draw another objects.</p>\n<p>Is there any option?</p>\n<p>thanks a lot</p>\n", "abstract": "Hi I would like to set in pygame non rectangle clipping area (in this case as character \"P\"), where it would be strict limited, where to draw another objects. Is there any option? thanks a lot"}, "answers": [{"id": 5941661, "score": 7, "vote": 0, "content": "<p>Let's see if I correctly understand your question: you want to \"blit\" an image onto a surface, but do it through a mask which would only allow certain pixels of the source to actually end up on the surface? </p>\n<p>I had this precise problem and at first I thought it would only be doable through PIL. However after some reading and experimentation, it turns out that it can actually be done with the help of pygame's rather obscure \"special flags\". Below is a function which hopefully does what you want.</p>\n<pre><code class=\"python\">def blit_mask(source, dest, destpos, mask, maskrect):\n    \"\"\"\n    Blit an source image to the dest surface, at destpos, with a mask, using\n    only the maskrect part of the mask.\n    \"\"\"\n    tmp = source.copy()\n    tmp.blit(mask, maskrect.topleft, maskrect, special_flags=pygame.BLEND_RGBA_MULT)\n    dest.blit(tmp, destpos, dest.get_rect().clip(maskrect))\n</code></pre>\n<p>The mask should be white where you want it to be transparent and black otherwise.</p>\n", "abstract": "Let's see if I correctly understand your question: you want to \"blit\" an image onto a surface, but do it through a mask which would only allow certain pixels of the source to actually end up on the surface?  I had this precise problem and at first I thought it would only be doable through PIL. However after some reading and experimentation, it turns out that it can actually be done with the help of pygame's rather obscure \"special flags\". Below is a function which hopefully does what you want. The mask should be white where you want it to be transparent and black otherwise."}, {"id": 5957013, "score": 4, "vote": 0, "content": "<p>And here is full code, that blits 2 rects on \"Hello World! :D\" text. Enjoy.</p>\n<pre><code class=\"python\">import pygame, sys, time\nfrom pygame.constants import QUIT\npygame.init()\n\nwindowSurface = pygame.display.set_mode((800, 600), 0, 32)\npygame.display.set_caption('Hello World!')\n\nWHITE = (255, 255, 255)\nRED = (255, 0, 0)\nGREEN = (0, 255, 0)\n\nbasicFont = pygame.font.SysFont(\"Times New Roman\", 100)\n\ntext = basicFont.render('Hello world! :D', True, WHITE)\n\ndef blit_mask(source, dest, destpos, mask, maskrect):\n\n        \"\"\"\n        Blit an source image to the dest surface, at destpos, with a mask, using\n        only the maskrect part of the mask.\n        \"\"\"\n        windowSurface.fill(WHITE)\n        tmp = source.copy()\n\n        tmp.blit(mask, destpos, maskrect, special_flags=pygame.BLEND_RGBA_MULT)  # mask 1 green\n\n\n        tmp.blit(red, (destpos[0]+100,0), maskrect, special_flags=pygame.BLEND_RGBA_MULT)  # mask 2 red\n\n        dest.blit(tmp, (0,0), dest.get_rect().clip(maskrect))\n\n        pygame.display.update()\n\nred = pygame.Surface((200,100))\nred.fill(RED)\n\ngreen = pygame.Surface((100,100),0)\ngreen.fill(GREEN)\n\nfor a in range(700):\n    blit_mask(text, windowSurface , (a,0), green, (0,0,800,600))\n\nwhile True:\n    for event in pygame.event.get():\n        if event.type == QUIT:\n            pygame.quit()\n            sys.exit()\n</code></pre>\n", "abstract": "And here is full code, that blits 2 rects on \"Hello World! :D\" text. Enjoy."}]}, {"link": "https://stackoverflow.com/questions/7704281/explicit-vertex-position-in-python-graph-tool", "question": {"id": "7704281", "title": "Explicit vertex position in python graph-tool", "content": "<p>I am using python graph-tool. To draw graphs, it uses <a href=\"http://projects.skewed.de/graph-tool/doc/draw.html\" rel=\"nofollow noreferrer\"><code>graph_draw</code> function</a>. I want to send vertex positions explicitly to dot engine. It turns out that I can pass a property map named <code>pos</code>. I tried defining it as <code>v_pos = g.new_vertex_property(\"vector&lt;double&gt;\")</code> where <code>g</code> is my graph. I am not sure if it is the right way to do it.</p>\n<p>There is one code snippet which you might find helpful.</p>\n<pre><code class=\"python\">pos = gt.random_layout(g, shape=shape, dim=3)\n&gt;&gt;&gt; pos[g.vertex(0)].a\narray([ 86.59969709,   1.31435598,   0.64651486])\ngraph_draw(g, pos=pos, output=\"graph-draw-random.pdf\")\n</code></pre>\n<p>What should I do if I were to define my vertex position at (0,2), (0,4) ... (0,8)?</p>\n<p>In above code snippet, I can change dim to 2. But I don't want random layout.</p>\n<p>For reference, here is the home-page of this tool I am using. <a href=\"http://projects.skewed.de/graph-tool/\" rel=\"nofollow noreferrer\">http://projects.skewed.de/graph-tool/</a></p>\n", "abstract": "I am using python graph-tool. To draw graphs, it uses graph_draw function. I want to send vertex positions explicitly to dot engine. It turns out that I can pass a property map named pos. I tried defining it as v_pos = g.new_vertex_property(\"vector<double>\") where g is my graph. I am not sure if it is the right way to do it. There is one code snippet which you might find helpful. What should I do if I were to define my vertex position at (0,2), (0,4) ... (0,8)? In above code snippet, I can change dim to 2. But I don't want random layout. For reference, here is the home-page of this tool I am using. http://projects.skewed.de/graph-tool/"}, "answers": [{"id": 10073999, "score": 6, "vote": 0, "content": "<p>You can set the positions trivially as follows:</p>\n<pre><code class=\"python\">   pos = g.new_vertex_property(\"vector&lt;double&gt;\")\n   pos[g.vertex(0)] = (0, 2)\n   pos[g.vertex(1)] = (0, 4)\n   ...\n</code></pre>\n", "abstract": "You can set the positions trivially as follows:"}]}, {"link": "https://stackoverflow.com/questions/29419973/in-python-how-can-i-change-the-font-size-of-leaf-nodes-when-generating-phylogen", "question": {"id": "29419973", "title": "In python, how can I change the font size of leaf nodes when generating phylogenetic trees using Bio.Phylo.draw()?", "content": "<p>I am using the Phylo package from Biopython to create phylogenetic trees.</p>\n<p>For big trees, I need to decrease the fontsize of the leaf nodes. It has been suggested to change matplotlib.pyplot.rcParams['font.size'] but this only allows me to change axes names and titles, as Phylo defines its own font sizes.\nI can not change Phylo source code as I am using it at the University.\nDefining figures or axes is not an option as Phylo.draw() creates its own.</p>\n<p>Does anyone have any suggestions on how to solve the problem, maybe stretching the y-axis?</p>\n<p>So far I was using the following code to produce the tree:</p>\n<pre><code class=\"python\">import matplotlib\nimport matplotlib.pyplot as plt\nfrom Bio import Phylo\nfrom cStringIO import StringIO\n\ndef plot_tree(treedata, output_file):\n\n    handle = StringIO(treedata) # parse the newick string\n    tree = Phylo.read(handle, \"newick\")\n    matplotlib.rc('font', size=6)\n    Phylo.draw(tree)\n    plt.savefig(output_file)\n\n    return\n</code></pre>\n<p><img alt=\"Plot\" src=\"https://i.stack.imgur.com/Y14OQ.png\"/></p>\n", "abstract": "I am using the Phylo package from Biopython to create phylogenetic trees. For big trees, I need to decrease the fontsize of the leaf nodes. It has been suggested to change matplotlib.pyplot.rcParams['font.size'] but this only allows me to change axes names and titles, as Phylo defines its own font sizes.\nI can not change Phylo source code as I am using it at the University.\nDefining figures or axes is not an option as Phylo.draw() creates its own. Does anyone have any suggestions on how to solve the problem, maybe stretching the y-axis? So far I was using the following code to produce the tree: "}, "answers": [{"id": 29495670, "score": 5, "vote": 0, "content": "<p><code>Phylo.draw()</code> can take the axes as an argument. From the method's documentation in Biopython you can read the following</p>\n<blockquote>\n<p>axes : matplotlib/pylab axes\nIf a valid matplotlib.axes.Axes instance, the phylogram is plotted in that Axes. By default (None), a new figure is created.</p>\n</blockquote>\n<p>This means that you can load your own axes with your size of choice. For example:</p>\n<pre><code class=\"python\">import matplotlib\nimport matplotlib.pyplot as plt\nfrom Bio import Phylo\nfrom io import StringIO\n\ndef plot_tree(treedata, output_file):\n    handle = StringIO(treedata)  # parse the newick string\n    tree = Phylo.read(handle, \"newick\")\n    matplotlib.rc('font', size=6)\n    # set the size of the figure\n    fig = plt.figure(figsize=(10, 20), dpi=100)\n    # alternatively\n    # fig.set_size_inches(10, 20)\n    axes = fig.add_subplot(1, 1, 1)\n    Phylo.draw(tree, axes=axes)\n    plt.savefig(output_file, dpi=100)\n\n    return\n</code></pre>\n", "abstract": "Phylo.draw() can take the axes as an argument. From the method's documentation in Biopython you can read the following axes : matplotlib/pylab axes\nIf a valid matplotlib.axes.Axes instance, the phylogram is plotted in that Axes. By default (None), a new figure is created. This means that you can load your own axes with your size of choice. For example:"}]}, {"link": "https://stackoverflow.com/questions/42616214/syntaxwarning-name-color-is-assigned-to-before-global-declaration-global-colo", "question": {"id": "42616214", "title": "SyntaxWarning: name &#39;color&#39; is assigned to before global declaration global color Python", "content": "<p>In the code below it says: \n\"SyntaxWarning: name 'color' is assigned to before global declaration\n  global color\" \nHowever, I declared global color before I assign it? I am very confused. I ran it and it works but I just don't understand what the syntax warning is pointing to...</p>\n<pre><code class=\"python\">from Tkinter import *\nfrom sys     import exit\nfrom random import *\n\ncolor = \"black\" #Sets default color to black\nw,h=640,480 #Width, height of canvas\nroot=Tk()\npixelcount = 0 #Sets the inital pixelcount to 1\ntool = 1 #Sets deafu\nptX, ptY, ptX2, ptY2 = 0, 0, 0, 0\ncnvs=Canvas(root,width=w,height=h,bg='#D2B48C') # 210 180 140\ncnvs.pack(side = RIGHT)\nbuttons = Frame(root, width = 80, height = h) #Creates region for buttons\nbuttons.pack(side = LEFT) #Put button region on left\n\ndef quit(evt):\n    exit(0)       \n\ndef menu(arg): #Accepts arguments from button clicks and binds appropriate stimulus to appropriate tool function\n    print arg\n    global tool\n    cnvs.unbind('&lt;Button-1&gt;')\n    if arg == 1:\n       cnvs.bind('&lt;Button-1&gt;', line)\n    elif arg == 2:  \n       cnvs.bind('&lt;Button-1&gt;', poly) \n    elif arg == 3:\n       cnvs.bind('&lt;Button-1&gt;', rect)\n    elif arg == 4:\n       cnvs.bind('&lt;B1-Motion&gt;', pencil)\n    elif arg == 5:\n       cnvs.bind('&lt;B1-Motion&gt;', spray)\n    elif arg == 6:\n       cnvs.bind('&lt;B1-Motion&gt;', blotter)   \n    elif arg == 7:\n       global color\n       color = \"red\"\n    elif arg == 8:\n       global color \n       color = \"black\"\n    elif arg == 9:\n       global color\n       color = \"blue\"\n    elif arg == 10:\n       global color\n       color = \"purple\"\n\ndef line(evt): #Line function\n   global pixelcount   \n   global color\n   pixelcount += 1\n   if pixelcount % 2 == 1:\n      ptX, ptY, = (evt.x, evt.y)\n      global ptX, ptY\n      print ptX, ptY\n\n   else:\n      ptX2, ptY2, = (evt.x, evt.y)\n      cnvs.create_line(ptX, ptY, ptX2, ptY2, fill = color)\n\ndef lineButtonClick(): #Activated when line button clicked\n   menu(1)  \n\nlineButton = Button(root, text = \"line\", command = lineButtonClick)  \nlineButton.pack()\nlineButton.config(width = 10)\n\ndef poly(evt): #Poly function\n\n   global pixelcount\n   pixelcount += 1\n   global color\n   print str(pixelcount) + \"pixel\"\n   if pixelcount == 1:\n      global ptX, ptY\n      ptX, ptY, = (evt.x, evt.y)\n      print ptX, ptY\n\n   else:\n      global ptX2, ptY2\n      ptX2, ptY2, = (evt.x, evt.y)\n      print str(ptX2) + \" \" + \" \" +str(ptY2) + \"pt2\"\n      cnvs.create_line(ptX, ptY, ptX2, ptY2, fill = color)\n      ptX, ptY = ptX2, ptY2\n\ndef polyButtonClick(): #Activated when poly button clicked\n\n   menu(2)  \npolyButton = Button(root, text = \"poly\", command = polyButtonClick)  \npolyButton.pack()\npolyButton.config(width = 10)\n\ndef rect(evt): #Rectangle function\n   global pixelcount\n   if pixelcount % 2 == 0:\n      global ptX, ptY      \n      ptX, ptY, = (evt.x, evt.y)\n      print ptX, ptY\n      pixelcount += 1\n\n   else:\n      global ptX2, ptY2\n      ptX2, ptY2, = (evt.x, evt.y)\n      pixelcount += 1\n      cnvs.create_rectangle(ptX, ptY, ptX2, ptY2, fill = color, outline = color)\n\ndef rectButtonClick(): #Activated when rectangle button clicked\n\n   menu(3)\nrectButton = Button(root, text = \"rect\", command = rectButtonClick)  \nrectButton.pack()\nrectButton.config(width = 10)\n\ndef pencil(evt):#Pencil function\n   global pixelcount\n   if cnvs.bind('&lt;ButtonRelease-1&gt;'):\n      pixelcount = 0\n   pixelcount += 1\n   print str(pixelcount) + \"pixel\"\n   if pixelcount == 1:\n      global ptX, ptY\n      ptX, ptY, = (evt.x, evt.y)\n      print ptX, ptY\n\n   else:\n      global ptX2, ptY2\n      ptX2, ptY2, = (evt.x, evt.y)\n      print str(ptX2) + \" \" + \" \" +str(ptY2) + \"pt2\"\n      cnvs.create_line(ptX, ptY, ptX2, ptY2, fill = color)\n      ptX, ptY = ptX2, ptY2\n\n\ndef pencilButtonClick(): \n   menu(4)   \npencilButton = Button(root, text = \"pencil\", command = pencilButtonClick)\npencilButton.pack()\npencilButton.config(width = 10)   \n\ndef spray(evt): #Spray function\n   global pixelcount\n   if cnvs.bind('&lt;ButtonRelease-1&gt;'):\n      pixelcount = 0\n   pixelcount += 1\n   print str(pixelcount) + \"pixel\"\n   ptX, ptY, = (evt.x, evt.y)\n   randomX = evt.x + randint(-10, 10)\n   randomY = evt.y + randint(-10, 10)\n   cnvs.create_oval(randomX -1, randomY-1, randomX + 1, randomY + 1, fill = color)\n\ndef sprayButtonClick():#Activated when spray button clicked\n\n   menu(5)\nsprayButton = Button(root, text = \"spray\", command = sprayButtonClick)\nsprayButton.pack()\nsprayButton.config(width = 10)  \n\ndef blotter(evt): #Blotter function\n   global pixelcount\n   if cnvs.bind('&lt;ButtonRelease-1&gt;'):\n      pixelcount = 0\n   pixelcount += 1\n   print str(pixelcount) + \"pixel\"\n   ptX, ptY, = (evt.x, evt.y)\n   cnvs.create_oval(ptX-5, ptY-5,ptX + 5, ptY + 5, fill = color)\n\ndef blotterButtonClick():#Activated when blotter button clicked\n\n   menu(6)\nblotterButton = Button(root, text = \"blotter\", command = blotterButtonClick)\nblotterButton.pack()\nblotterButton.config(width = 10)\n\ndef red(): #Red color function\n   menu(7)\nredButton = Button(root, text = \"red\", command = red)\nredButton.pack()\nredButton.config(width = 10)\n\ndef black(): #Black color function\n   menu(8)\nblackButton = Button(root, text = \"black\", command = black)\nblackButton.pack()\nblackButton.config(width = 10)\n\ndef blue(): #Blue color function\n   menu(9)\nblueButton = Button(root, text = \"blue\", command = blue)\nblueButton.pack()\nblueButton.config(width = 10)\n\ndef purple(): #Purple color function\n   menu(10)\npurpleButton = Button(root, text = \"purple\", command = purple)\npurpleButton.pack()\npurpleButton.config(width = 10)\n\nmainloop()\n</code></pre>\n<p>Thank you so much!!!</p>\n", "abstract": "In the code below it says: \n\"SyntaxWarning: name 'color' is assigned to before global declaration\n  global color\" \nHowever, I declared global color before I assign it? I am very confused. I ran it and it works but I just don't understand what the syntax warning is pointing to... Thank you so much!!!"}, "answers": [{"id": 42616250, "score": 9, "vote": 0, "content": "<p>You don't put a <code>global</code> declaration immediately before every use of the variable; you use it <em>once</em>, at the beginning of the function in which the variable is declared global:</p>\n<pre><code class=\"python\">def menu(arg): \n    global tool\n    global color\n\n    cnvs.unbind('&lt;Button-1&gt;')\n    if arg == 1:\n       cnvs.bind('&lt;Button-1&gt;', line)\n    elif arg == 2:  \n       cnvs.bind('&lt;Button-1&gt;', poly) \n    elif arg == 3:\n       cnvs.bind('&lt;Button-1&gt;', rect)\n    elif arg == 4:\n       cnvs.bind('&lt;B1-Motion&gt;', pencil)\n    elif arg == 5:\n       cnvs.bind('&lt;B1-Motion&gt;', spray)\n    elif arg == 6:\n       cnvs.bind('&lt;B1-Motion&gt;', blotter)   \n    elif arg == 7:\n       color = \"red\"\n    elif arg == 8:\n       color = \"black\"\n    elif arg == 9:\n       color = \"blue\"\n    elif arg == 10:\n       color = \"purple\"\n</code></pre>\n", "abstract": "You don't put a global declaration immediately before every use of the variable; you use it once, at the beginning of the function in which the variable is declared global:"}]}, {"link": "https://stackoverflow.com/questions/58452078/how-to-draw-a-large-amont-of-signal-faster-in-matplotlib-embedded-within-qt-envi", "question": {"id": "58452078", "title": "How to draw a large amont of signal faster in matplotlib embedded within Qt environment?", "content": "<p>I'm trying to plot a large among of signal in a matplotlib figure which is embedded in a Qt environment.\nThe plots are updated according to QScrollBar which modify the part of signals that I need to show.\nMy issue is the update of the figure takes a pretty long time, especially because I have 250 signals to update. So, I'm seeking for a way to  optimize the EEG_plot.update function to reduce its draw time.\nI don't know how I could use an animate function to speed up the process or something else.\nMy concern is I need to update the time axis ticks and probably also the y axis label positions.\nThe other thing is if the last segment that I need to plot does not correspond exactly with the window size chosen I need to plot only a part of the window (for instance the last segment will be 5s but the window size is 10s)</p>\n<p>I give the entire script right below </p>\n<pre><code class=\"python\">from PyQt5.QtGui import *\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtWidgets import *\nimport sys\nimport matplotlib\nmatplotlib.use('Qt5Agg')\nimport matplotlib.pyplot as plt\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\nimport numpy as np\n\n\nclass Viewer(QMainWindow):\n    def __init__(self, parent=None):\n        super(Viewer, self).__init__()\n        self.parent = parent\n        #######################################\n        self.centralWidget = QWidget()\n        self.setCentralWidget(self.centralWidget)\n        self.mainVBOX_param_scene = QVBoxLayout()\n        self.mascene = plot(self)\n\n\n        self.paramPlotV = QVBoxLayout()\n        self.horizontalSliders  = QScrollBar(Qt.Horizontal)\n        self.horizontalSliders.setFocusPolicy(Qt.StrongFocus)\n        self.horizontalSliders.valueChanged.connect(self.update_plot)\n        self.horizontalSliders.setMinimum(0)\n        self.horizontalSliders.setMaximum(1)\n\n\n        self.paramPlot = QHBoxLayout()\n        l_gain = QLabel('Gain')\n        self.e_gain = QLineEdit('5')\n        l_win = QLabel('Window')\n        self.e_win = QLineEdit('10')\n        l_spacing = QLabel('vertical spacing')\n        self.e_spacing = QLineEdit('10')\n        l_linewidth = QLabel('linewidth')\n        self.e_linewidth = QLineEdit('1')\n\n        self.e_gain.returnPressed.connect(self.update_plot)\n        self.e_win.returnPressed.connect(self.udpate_plot_plus_slider)\n        self.e_spacing.returnPressed.connect(self.update_plot)\n        self.e_linewidth.returnPressed.connect(self.update_plot)\n\n        self.paramPlot.addWidget(l_gain)\n        self.paramPlot.addWidget(self.e_gain)\n        self.paramPlot.addWidget(l_win)\n        self.paramPlot.addWidget(self.e_win)\n        self.paramPlot.addWidget(l_spacing)\n        self.paramPlot.addWidget(self.e_spacing)\n        self.paramPlot.addWidget(l_linewidth)\n        self.paramPlot.addWidget(self.e_linewidth)\n\n        self.paramPlotV.addWidget(self.horizontalSliders)\n        self.paramPlotV.addLayout(self.paramPlot)\n\n        self.mainVBOX_param_scene.addWidget(self.mascene)\n        self.mainVBOX_param_scene.addLayout(self.paramPlotV)\n\n        self.centralWidget.setLayout(self.mainVBOX_param_scene)\n\n        self.Fs = 1024\n        self.Sigs_dict = np.random.rand(250,105*self.Fs)\n        self.t = np.arange(self.Sigs_dict.shape[1])/self.Fs\n        self.parent.processEvents()\n        self.update()\n\n    def updateslider(self):\n        self.horizontalSliders.setMinimum(0)\n        self.horizontalSliders.setMaximum(np.ceil(self.t[-1]/int(self.e_win.text()))-1)\n        self.horizontalSliders.setPageStep(1)\n        self.horizontalSliders.update()\n\n    def udpate_plot_plus_slider(self):\n        self.updateslider()\n        self.mascene.update()\n\n    def update_plot(self):\n        self.mascene.update()\n\n    def update(self):\n        self.updateslider()\n        self.mascene.modify_sigs()\n        self.mascene.update()\n\nclass plot(QGraphicsView):\n    def __init__(self, parent=None):\n        super(plot, self).__init__(parent)\n        self.parent = parent\n        self.scene = QGraphicsScene(self)\n        self.setScene(self.scene)\n        self.figure = plt.figure(facecolor='white')#Figure()\n        self.canvas = FigureCanvas(self.figure)\n\n        self.widget = QWidget()\n        self.widget.setLayout(QVBoxLayout())\n        self.widget.layout().setContentsMargins(0, 0, 0, 0)\n        self.widget.layout().setSpacing(0)\n        self.scroll = QScrollArea(self.widget)\n        self.scroll.setWidget(self.canvas)\n\n        layout = QVBoxLayout()\n        layout.addWidget(self.scroll)\n        self.setLayout(layout)\n\n    def modify_sigs(self):\n        self.Sigs_dict = self.parent.Sigs_dict\n        self.t = self.parent.t\n        self.Fs= self.parent.Fs\n\n\n    def update(self):\n        win_num = self.parent.horizontalSliders.value()\n        self.figure.clear()\n        plt.figure(self.figure.number)\n        plt.subplots_adjust(left=0.1, bottom=0.01, right=1, top=1, wspace=0.0 , hspace=0.0 )\n        self.axes = plt.subplot(1, 1, 1)\n        gain = float(self.parent.e_gain.text())\n        win= float(self.parent.e_win.text())\n        self.spacing = float(self.parent.e_spacing.text())\n        linewidth = float(self.parent.e_linewidth.text())\n        ts = int(win*(win_num) * self.Fs)\n        te = ts + int(win * self.Fs)\n        if te &gt; len(self.t):\n            te=len(self.t)\n        for i in range(self.Sigs_dict.shape[0]):\n            line, = plt.plot(self.t[ts:te], gain*(self.Sigs_dict[i,ts:te]-np.mean(self.Sigs_dict[i,ts:te]))+i*self.spacing, linewidth=linewidth  )\n\n\n        self.axes.autoscale(enable=True, axis='both', tight=True)\n        self.axes.set_ylim((-self.spacing,(self.Sigs_dict.shape[0]+1)*self.spacing))\n        self.axes.set_xlim((ts/ self.Fs, ts / self.Fs + win ))\n\n        self.axes.set_yticks(np.arange(self.Sigs_dict.shape[0]) * self.spacing)\n        self.axes.set_yticklabels([str(n) for n in np.arange(self.Sigs_dict.shape[0])])\n\n\n\n        self.canvas.setGeometry(0, 0, self.parent.width()-100, (self.parent.height()-100)*self.spacing)\n        self.canvas.draw_idle()\n\n\ndef main():\n    app = QApplication(sys.argv)\n    app.setStyle('Windows')\n    ex = Viewer(app)\n    ex.showMaximized()\n    sys.exit(app.exec())\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n<h2>Update</h2>\n<p>I made a new implementation where I try to update data instead of reploting all the figure each time (<code>update_set_data</code> function), I don't plot all the point of the curve (for instance if the number of point &gt; 10000 points, I take only 50% of them) I used <code>decimate = len(self.t[ts:te]) // 10000 + 1</code> to compute the decimation, and last I don't replot the figure when the user is draging the slider.</p>\n<p>When I use the old version I get thos time to update the figure: </p>\n<pre><code class=\"python\">time old: 4.148899078369141\ntime old: 4.117990255355835\ntime old: 4.152893781661987\n</code></pre>\n<p>With the new version I get: </p>\n<pre><code class=\"python\">time new: 2.0400094985961914\ntime new: 2.0248610973358154\ntime new: 2.0305933952331543\n</code></pre>\n<p>I have to say, I expected more than a 50% time reduction. \nDoes someone have idea to optimize this more?</p>\n<pre><code class=\"python\">from PyQt5.QtGui import *\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtWidgets import *\nimport sys\nimport matplotlib\nmatplotlib.use('Qt5Agg')\nimport matplotlib.pyplot as plt\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\nimport numpy as np\nimport time\n\nclass Viewer(QMainWindow):\n    def __init__(self, parent=None):\n        super(Viewer, self).__init__()\n        self.parent = parent\n        #######################################\n        self.centralWidget = QWidget()\n        self.setCentralWidget(self.centralWidget)\n        self.mainVBOX_param_scene = QVBoxLayout()\n        self.mascene = plot(self)\n\n\n        self.paramPlotV = QVBoxLayout()\n        self.horizontalSliders  = QScrollBar(Qt.Horizontal)\n        self.horizontalSliders.setFocusPolicy(Qt.StrongFocus)\n        self.horizontalSliders.valueChanged.connect(self.sliderReleasedfun)\n        self.horizontalSliders.sliderPressed.connect(self.sliderPressedfun)\n        self.horizontalSliders.sliderMoved.connect(self.sliderMovedfun)\n        self.horizontalSliders.sliderReleased.connect(self.sliderReleasedfun)\n        self.horizontalSliders.setMinimum(0)\n        self.horizontalSliders.setMaximum(1)\n\n\n        self.paramPlot = QHBoxLayout()\n        l_gain = QLabel('Gain')\n        self.e_gain = QLineEdit('5')\n        l_win = QLabel('Window')\n        self.e_win = QLineEdit('10')\n        l_spacing = QLabel('vertical spacing')\n        self.e_spacing = QLineEdit('10')\n        l_linewidth = QLabel('linewidth')\n        self.e_linewidth = QLineEdit('1')\n\n        self.e_gain.returnPressed.connect(self.update_plot)\n        self.e_win.returnPressed.connect(self.udpate_plot_plus_slider)\n        self.e_spacing.returnPressed.connect(self.update_plot)\n        self.e_linewidth.returnPressed.connect(self.update_plot)\n\n        self.paramPlot.addWidget(l_gain)\n        self.paramPlot.addWidget(self.e_gain)\n        self.paramPlot.addWidget(l_win)\n        self.paramPlot.addWidget(self.e_win)\n        self.paramPlot.addWidget(l_spacing)\n        self.paramPlot.addWidget(self.e_spacing)\n        self.paramPlot.addWidget(l_linewidth)\n        self.paramPlot.addWidget(self.e_linewidth)\n\n        self.paramPlotV.addWidget(self.horizontalSliders)\n        self.paramPlotV.addLayout(self.paramPlot)\n\n        self.mainVBOX_param_scene.addWidget(self.mascene)\n        self.mainVBOX_param_scene.addLayout(self.paramPlotV)\n\n        self.centralWidget.setLayout(self.mainVBOX_param_scene)\n\n        self.Fs = 1024\n        self.Sigs_dict = np.random.rand(250,105*self.Fs)\n        self.t = np.arange(self.Sigs_dict.shape[1])/self.Fs\n        self.parent.processEvents()\n        self.update()\n\n    def sliderPressedfun(self):\n        self.horizontalSliders.valueChanged.disconnect()\n\n    def sliderMovedfun(self,e):\n        self.horizontalSliders.setValue(e)\n\n    def sliderReleasedfun(self):\n        self.horizontalSliders.valueChanged.connect(self.movesliderfun)\n        self.movesliderfun()\n\n    def movesliderfun(self):\n        t0 = time.time()\n\n        self.horizontalSliders.setEnabled(False)\n        self.update_data()\n        self.horizontalSliders.setEnabled(True)\n        print('time new:', time.time()-t0)\n\n    def updateslider(self):\n        self.horizontalSliders.setMinimum(0)\n        self.horizontalSliders.setMaximum(np.ceil(self.t[-1]/int(self.e_win.text()))-1)\n        self.horizontalSliders.setPageStep(1)\n        self.horizontalSliders.update()\n\n    def udpate_plot_plus_slider(self):\n        self.updateslider()\n        self.mascene.update()\n\n    def update_plot(self):\n        self.mascene.update()\n\n    def update_data(self):\n        self.mascene.update_set_data()\n\n    def update(self):\n        self.updateslider()\n        self.mascene.modify_sigs()\n        self.mascene.update()\n\nclass plot(QGraphicsView):\n    def __init__(self, parent=None):\n        super(plot, self).__init__(parent)\n        self.parent = parent\n        self.scene = QGraphicsScene(self)\n        self.setScene(self.scene)\n        self.figure = plt.figure(facecolor='white')#Figure()\n        self.canvas = FigureCanvas(self.figure)\n\n        self.widget = QWidget()\n        self.widget.setLayout(QVBoxLayout())\n        self.widget.layout().setContentsMargins(0, 0, 0, 0)\n        self.widget.layout().setSpacing(0)\n        self.scroll = QScrollArea(self.widget)\n        self.scroll.setWidget(self.canvas)\n\n        layout = QVBoxLayout()\n        layout.addWidget(self.scroll)\n        self.setLayout(layout)\n        self.win=10\n\n    def modify_sigs(self):\n        self.Sigs_dict = self.parent.Sigs_dict\n        self.t = self.parent.t\n        self.Fs= self.parent.Fs\n\n    def update_set_data(self):\n        win_num = self.parent.horizontalSliders.value()\n        gain = float(self.parent.e_gain.text())\n        win= float(self.parent.e_win.text())\n        if not self.spacing == float(self.parent.e_spacing.text()):\n            self.spacing = float(self.parent.e_spacing.text())\n            spacing = True\n        else:\n            spacing = False\n        self.linewidth = float(self.parent.e_linewidth.text())\n\n        ts = int(self.win * (win_num) * self.Fs)\n        te = ts + int(self.win * self.Fs)\n        if te &gt; len(self.t):\n            diff = te - len(self.t)\n            ts = ts - diff\n            te = len(self.t)\n\n        decimate = len(self.t[ts:te]) // 10000 + 1\n\n        for i in range(self.Sigs_dict.shape[0]):\n            self.Lines[i].set_data(self.t[ts:te:decimate], gain*(self.Sigs_dict[i,ts:te:decimate]-np.mean(self.Sigs_dict[i,ts:te:decimate]))+i*self.spacing )\n            self.Lines[i].set_linewidth(self.linewidth)\n\n        if spacing:\n            self.axes.set_ylim((-self.spacing,(self.Sigs_dict.shape[0]+1)*self.spacing))\n            self.axes.set_yticks(np.arange(self.Sigs_dict.shape[0]) * self.spacing)\n            self.axes.set_yticklabels([str(n) for n in np.arange(self.Sigs_dict.shape[0])])\n\n\n\n        self.axes.set_xlim((ts/ self.Fs, ts / self.Fs + win ))\n        # self.canvas.draw_idle()\n        self.canvas.draw()\n\n    def update(self):\n        win_num = self.parent.horizontalSliders.value()\n        self.figure.clear()\n        plt.figure(self.figure.number)\n        plt.subplots_adjust(left=0.1, bottom=0.01, right=1, top=1, wspace=0.0 , hspace=0.0 )\n        self.axes = plt.subplot(1, 1, 1)\n        gain = float(self.parent.e_gain.text())\n        win= float(self.parent.e_win.text())\n        self.spacing = float(self.parent.e_spacing.text())\n        linewidth = float(self.parent.e_linewidth.text())\n        ts = int(self.win * (win_num) * self.Fs)\n        te = ts + int(self.win * self.Fs)\n        if te &gt; len(self.t):\n            diff = te - len(self.t)\n            ts = ts - diff\n            te = len(self.t)\n        decimate = len(self.t[ts:te]) // 10000 + 1\n        self.Lines = []\n        for i in range(self.Sigs_dict.shape[0]):\n            line, = plt.plot(self.t[ts:te:decimate], gain*(self.Sigs_dict[i,ts:te:decimate]-np.mean(self.Sigs_dict[i,ts:te:decimate]))+i*self.spacing, linewidth=linewidth  )\n            self.Lines.append(line)\n\n        self.axes.autoscale(enable=True, axis='both', tight=True)\n        self.axes.set_ylim((-self.spacing,(self.Sigs_dict.shape[0]+1)*self.spacing))\n        self.axes.set_xlim((ts/ self.Fs, ts / self.Fs + win ))\n\n        self.axes.set_yticks(np.arange(self.Sigs_dict.shape[0]) * self.spacing)\n        self.axes.set_yticklabels([str(n) for n in np.arange(self.Sigs_dict.shape[0])])\n\n\n\n        self.canvas.setGeometry(0, 0, self.parent.width()-100, (self.parent.height()-100)*self.spacing)\n        self.canvas.draw_idle()\n\n\ndef main():\n    app = QApplication(sys.argv)\n    app.setStyle('Windows')\n    ex = Viewer(app)\n    ex.showMaximized()\n    sys.exit(app.exec())\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n", "abstract": "I'm trying to plot a large among of signal in a matplotlib figure which is embedded in a Qt environment.\nThe plots are updated according to QScrollBar which modify the part of signals that I need to show.\nMy issue is the update of the figure takes a pretty long time, especially because I have 250 signals to update. So, I'm seeking for a way to  optimize the EEG_plot.update function to reduce its draw time.\nI don't know how I could use an animate function to speed up the process or something else.\nMy concern is I need to update the time axis ticks and probably also the y axis label positions.\nThe other thing is if the last segment that I need to plot does not correspond exactly with the window size chosen I need to plot only a part of the window (for instance the last segment will be 5s but the window size is 10s) I give the entire script right below  I made a new implementation where I try to update data instead of reploting all the figure each time (update_set_data function), I don't plot all the point of the curve (for instance if the number of point > 10000 points, I take only 50% of them) I used decimate = len(self.t[ts:te]) // 10000 + 1 to compute the decimation, and last I don't replot the figure when the user is draging the slider. When I use the old version I get thos time to update the figure:  With the new version I get:  I have to say, I expected more than a 50% time reduction. \nDoes someone have idea to optimize this more?"}, "answers": [{"id": 58900835, "score": 1, "vote": 0, "content": "<p>You can try this with multi threading,\nso that you can break the whole code in many sub code\nand your all code will run in same time with multi threading </p>\n", "abstract": "You can try this with multi threading,\nso that you can break the whole code in many sub code\nand your all code will run in same time with multi threading "}]}, {"link": "https://stackoverflow.com/questions/18838994/why-wont-my-curses-box-draw", "question": {"id": "18838994", "title": "Why won&#39;t my curses box draw?", "content": "<p>I am toying with curses and I can't get a box to draw on the screen.\nI created a border which works but I want to draw a box in the border</p>\n<p>here is my code </p>\n<pre><code class=\"python\">import curses \n\nscreen = curses.initscr()\n\ntry:\n    screen.border(0)\n    box1 = curses.newwin(20, 20, 5, 5)\n    box1.box()\n    screen.getch()\n\nfinally:\n    curses.endwin()\n</code></pre>\n<p>any advice?</p>\n", "abstract": "I am toying with curses and I can't get a box to draw on the screen.\nI created a border which works but I want to draw a box in the border here is my code  any advice?"}, "answers": [{"id": 43381467, "score": 12, "vote": 0, "content": "<p>The suggested answer is more complicated than necessary.  Rather than use <a href=\"http://invisible-island.net/ncurses/man/curs_window.3x.html#h3-newwin\" rel=\"noreferrer\"><strong>newwin</strong></a>, if you use <a href=\"http://invisible-island.net/ncurses/man/curs_window.3x.html#h3-subwin\" rel=\"noreferrer\"><strong>subwin</strong></a>, it shares memory with the original window, and will be repainted without additional work.</p>\n<p>Here is the original program modified to do that (a one-line change):</p>\n<pre><code class=\"python\">import curses\n\nscreen = curses.initscr()\n\ntry:\n    screen.border(0)\n    box1 = screen.subwin(20, 20, 5, 5)\n    box1.box()\n    screen.getch()\n\nfinally:\n    curses.endwin()\n</code></pre>\n", "abstract": "The suggested answer is more complicated than necessary.  Rather than use newwin, if you use subwin, it shares memory with the original window, and will be repainted without additional work. Here is the original program modified to do that (a one-line change):"}, {"id": 18840318, "score": 9, "vote": 0, "content": "<p>From <a href=\"http://docs.python.org/2/howto/curses.html\" rel=\"noreferrer\">curses docs</a>:</p>\n<blockquote>\n<p>When you call a method to display or erase text, the effect doesn\u2019t\nimmediately show up on the display. ...</p>\n<p>Accordingly, curses requires that you explicitly tell it to redraw windows, using the  <strong>refresh()</strong> method of window objects. ...</p>\n</blockquote>\n<p>You need <code>screen.refresh()</code> and <code>box1.refresh()</code> in correct order.</p>\n<p>Working example</p>\n<pre><code class=\"python\">#!/usr/bin/env python\n\nimport curses \n\nscreen = curses.initscr()\n\ntry:\n    screen.border(0)\n\n    box1 = curses.newwin(20, 20, 5, 5)\n    box1.box()    \n\n    screen.refresh()\n    box1.refresh()\n\n    screen.getch()\n\nfinally:\n    curses.endwin()\n</code></pre>\n<p>or</p>\n<pre><code class=\"python\">#!/usr/bin/env python\n\nimport curses \n\nscreen = curses.initscr()\n\ntry:\n    screen.border(0)\n    screen.refresh()\n\n    box1 = curses.newwin(20, 20, 5, 5)\n    box1.box()    \n    box1.refresh()\n\n    screen.getch()\n\nfinally:\n    curses.endwin()\n</code></pre>\n<p>You can use <code>immedok(True)</code> to automatically refresh window</p>\n<pre><code class=\"python\">#!/usr/bin/env python\n\nimport curses \n\nscreen = curses.initscr()\nscreen.immedok(True)\n\ntry:\n    screen.border(0)\n\n    box1 = curses.newwin(20, 20, 5, 5)\n    box1.immedok(True)\n\n    box1.box()    \n    box1.addstr(\"Hello World of Curses!\")\n\n    screen.getch()\n\nfinally:\n    curses.endwin()\n</code></pre>\n", "abstract": "From curses docs: When you call a method to display or erase text, the effect doesn\u2019t\nimmediately show up on the display. ... Accordingly, curses requires that you explicitly tell it to redraw windows, using the  refresh() method of window objects. ... You need screen.refresh() and box1.refresh() in correct order. Working example or You can use immedok(True) to automatically refresh window"}]}, {"link": "https://stackoverflow.com/questions/32766062/how-to-determine-the-colours-when-using-matplotlib-pyplot-imshow", "question": {"id": "32766062", "title": "How to determine the colours when using matplotlib.pyplot.imshow()?", "content": "<p>I'm using <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow\" rel=\"nofollow noreferrer\">imshow()</a> to draw a 2D numpy array, so for example:</p>\n<pre><code class=\"python\">my_array = [[ 2.  0.  5.  2.  5.]\n            [ 3.  2.  0.  1.  4.]\n            [ 5.  0.  5.  4.  4.]\n            [ 0.  5.  2.  3.  4.]\n            [ 0.  0.  3.  5.  2.]]\n\nplt.imshow(my_array, interpolation='none', vmin=0, vmax=5)\n</code></pre>\n<p>which plots this image:</p>\n<p><a href=\"https://i.stack.imgur.com/C4941.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/C4941.png\"/></a></p>\n<p>What I want to do however, is change the colours, so that for example 0 is RED, 1 is GREEN, 2 is ORANGE, you get what I mean. Is there a way to do this, and if so, how?</p>\n<p>I've tried doing this by changing the entries in the colourmap, like so:</p>\n<pre><code class=\"python\">    cmap = plt.cm.jet\n    cmaplist = [cmap(i) for i in range(cmap.N)]\n    cmaplist[0] = (1,1,1,1.0)\n    cmaplist[1] = (.1,.1,.1,1.0)\n    cmaplist[2] = (.2,.2,.2,1.0)\n    cmaplist[3] = (.3,.3,.3,1.0)\n    cmaplist[4] = (.4,.4,.4,1.0)\n    cmap = cmap.from_list('Custom cmap', cmaplist, cmap.N)\n</code></pre>\n<p>but it did not work as I expected, because 0 = the first entry in the colour map, but 1 for example != the second entry in the colour map, and so only 0 is drawn diffrently:</p>\n<p><a href=\"https://i.stack.imgur.com/H6UBN.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/H6UBN.png\"/></a></p>\n", "abstract": "I'm using imshow() to draw a 2D numpy array, so for example: which plots this image:  What I want to do however, is change the colours, so that for example 0 is RED, 1 is GREEN, 2 is ORANGE, you get what I mean. Is there a way to do this, and if so, how? I've tried doing this by changing the entries in the colourmap, like so: but it did not work as I expected, because 0 = the first entry in the colour map, but 1 for example != the second entry in the colour map, and so only 0 is drawn diffrently: "}, "answers": [{"id": 32776626, "score": 10, "vote": 0, "content": "<p>I think the easiest way is to use a <code>ListedColormap</code>, and optionally with a <code>BoundaryNorm</code> to define the <code>bins</code>. Given your array above:</p>\n<pre><code class=\"python\">import matplotlib.pyplot as plt\nimport matplotlib as mpl\n\ncolors = ['red', 'green', 'orange', 'blue', 'yellow', 'purple']\nbounds = [0,1,2,3,4,5,6]\n\ncmap = mpl.colors.ListedColormap(colors)\nnorm = mpl.colors.BoundaryNorm(bounds, cmap.N)\n\nplt.imshow(my_array, interpolation='none', cmap=cmap, norm=norm)\n</code></pre>\n<p>Because your data values map 1-on-1 with the boundaries of the colors, the <code>normalizer</code> is redundant. But i have included it to show how it can be used. For example when you want the values 0,1,2 to be red, 3,4,5 green etc, you would define the boundaries as [0,3,6...]. </p>\n<p><a href=\"https://i.stack.imgur.com/cSS11.png\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/cSS11.png\"/></a></p>\n", "abstract": "I think the easiest way is to use a ListedColormap, and optionally with a BoundaryNorm to define the bins. Given your array above: Because your data values map 1-on-1 with the boundaries of the colors, the normalizer is redundant. But i have included it to show how it can be used. For example when you want the values 0,1,2 to be red, 3,4,5 green etc, you would define the boundaries as [0,3,6...].  "}]}, {"link": "https://stackoverflow.com/questions/53359745/python-can-you-plot-a-histogram-with-a-contour", "question": {"id": "53359745", "title": "Python - can you plot a histogram with a contour?", "content": "<p>I want to plot a histogram with a contour like this <a href=\"https://i.stack.imgur.com/TBlN1.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/TBlN1.png\"/></a></p>\n<p>I found this picture in <a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/04.05-histograms-and-binnings.html\" rel=\"nofollow noreferrer\">here</a>, but after following the same procedure there I don't get the contour. </p>\n<p>I saw <a href=\"https://stackoverflow.com/questions/42741687/python-histogram-outline\">this</a> question in stack overflow but it draws an edge over each bar, and I want only the outer contour.</p>\n<p>How can I draw this outer contour? (I'm running python 3)</p>\n", "abstract": "I want to plot a histogram with a contour like this  I found this picture in here, but after following the same procedure there I don't get the contour.  I saw this question in stack overflow but it draws an edge over each bar, and I want only the outer contour. How can I draw this outer contour? (I'm running python 3)"}, "answers": [{"id": 53360100, "score": 8, "vote": 0, "content": "<p>The plot is probably produced with a different (i.e. older) matplotlib version. This can also be seen from the use of <code>normed</code>, which is deprecated in newer versions. </p>\n<p>Here, you would explicitely set the edgecolor to black. \n<code>ec=\"k\"</code>, or longer, <code>edgecolor=\"black\"</code>.</p>\n<pre><code class=\"python\">import numpy as np\nimport matplotlib.pyplot as plt\nplt.style.use('seaborn-white')\n\nx1 = np.random.normal(0, 0.8, 1000)\nx2 = np.random.normal(-2, 1, 1000)\nx3 = np.random.normal(3, 2, 1000)\n\nkwargs = dict(histtype='stepfilled', alpha=0.3, density=True, bins=40, ec=\"k\")\n\nplt.hist(x1, **kwargs)\nplt.hist(x2, **kwargs)\nplt.hist(x3, **kwargs);\n\nplt.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/COOZE.png\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/COOZE.png\"/></a></p>\n", "abstract": "The plot is probably produced with a different (i.e. older) matplotlib version. This can also be seen from the use of normed, which is deprecated in newer versions.  Here, you would explicitely set the edgecolor to black. \nec=\"k\", or longer, edgecolor=\"black\". "}]}, {"link": "https://stackoverflow.com/questions/24682797/python-opencv-drawing-line-width", "question": {"id": "24682797", "title": "Python OpenCV Drawing Line Width", "content": "<p>When specifying a line thickness greater than 1, the resulting line width drawn by cv2.line() is wider than specified. Specifying a thickness of 1,2,3,4,5,6 produces a line width of 1,3,5,5,7,7 respectively. I have tried using different lineType values (4,8,16) and sub-pixel point locations with the shift parameter with no effect on the line width. Am I doing something wrong?</p>\n<p>For example:</p>\n<pre><code class=\"python\">import numpy as np\nimport cv2\n\na = np.zeros((10,10), dtype=np.uint8)\ncv2.line(a, (0,4), (9,4), 1, 2)\nprint(a)\n</code></pre>\n<p>produces:</p>\n<pre><code class=\"python\"> [[0 0 0 0 0 0 0 0 0 0]\n [0 0 0 0 0 0 0 0 0 0]\n [0 0 0 0 0 0 0 0 0 0]\n [1 1 1 1 1 1 1 1 1 1]\n [1 1 1 1 1 1 1 1 1 1]\n [1 1 1 1 1 1 1 1 1 1]\n [0 0 0 0 0 0 0 0 0 0]\n [0 0 0 0 0 0 0 0 0 0]\n [0 0 0 0 0 0 0 0 0 0]\n [0 0 0 0 0 0 0 0 0 0]]\n</code></pre>\n", "abstract": "When specifying a line thickness greater than 1, the resulting line width drawn by cv2.line() is wider than specified. Specifying a thickness of 1,2,3,4,5,6 produces a line width of 1,3,5,5,7,7 respectively. I have tried using different lineType values (4,8,16) and sub-pixel point locations with the shift parameter with no effect on the line width. Am I doing something wrong? For example: produces:"}, "answers": [{"id": 24687564, "score": 7, "vote": 0, "content": "<p>Your question is a simple one, and the answer is a simple one, as well: No, you are not doing anything wrong. The implementation of the line drawing in OpenCV seems to be quite basic.</p>\n<p>I tried this with several line widths and also with fractional starting and ending positions. The line width parameter does not really work. The simple Brezenham lines (single-pixel lines from integer pixel positions) are fine, but the thicker lines are not good.</p>\n<p>See this test code:</p>\n<pre><code class=\"python\">import numpy as np\nimport cv2\n\na = np.zeros((200,200),dtype=np.uint8)\nfor u in np.exp(np.linspace(0,1j*2*np.pi,25)):\n    cv2.line(a, (100, 100), (int(100+100*u.real+.5), int(100+100*u.imag+.5)), 255, 2)\ncv2.imwrite('lines.png', a)\n</code></pre>\n<p>What you get is this:</p>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/x8FpI.png\"/></p>\n<p>The line thickness depends heavily on the angle; diagonal lines are much thicker than horizontal or vertical lines. Also, the thickness of the lines is anyway wrong (3 at thinnest) as you noticed. Using anti-alias does not make a significant change.</p>\n<p>However, if this is done with fractional coordinates, the thickness variation is smaller (but the thickness is still wrong):</p>\n<pre><code class=\"python\">import numpy as np\nimport cv2\n\na = np.zeros((200,200),dtype=np.uint8)\nfor u in np.exp(np.linspace(0,1j*2*np.pi,25)):\n    cv2.line(a, (1600, 1600), (int(1600+1600*u.real+.5), int(1600+1600*u.imag+.5)), 255, 2, shift=4)\ncv2.imwrite('lines_shift.png', a)\n</code></pre>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/h0duA.png\"/></p>\n<p>Also, the problem seems to vanish with thick lines (thickness set to 5, real thickness 7, no fractional coordinates). This suggest that the rotation-dependent error is additive:</p>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/rwLpQ.png\"/></p>\n<p>Then let's try to draw overlapping files with widths 10, 11, and 12 with different shades of gray:</p>\n<pre><code class=\"python\">import numpy as np\nimport cv2\n\na = np.zeros((200,200),dtype=np.uint8)\nfor u in np.exp(np.linspace(0,1j*2*np.pi,25)):\n    cv2.line(a, (100, 100), (int(100+100*u.real+.5), int(100+100*u.imag+.5)), 255, 12)\n    cv2.line(a, (100, 100), (int(100+100*u.real+.5), int(100+100*u.imag+.5)), 128, 11)\n    cv2.line(a, (100, 100), (int(100+100*u.real+.5), int(100+100*u.imag+.5)), 64, 10)\ncv2.imwrite('lines_variation.png', a)\n</code></pre>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/lWRVC.png\"/></p>\n<p>In principle there should be three colours seen, but in practice only two are visible. This means that the lines with widths 11 and 12 are drawn with the same width (13). Any tricks with the fractional coordinates produce the same result.</p>\n<p><strong>Summary:</strong> Only odd line widths are available. Narrow lines have large relative width errors if fractional (shifted) coordinates are not used. If you need to have more control, draw thicker line at a higher resolution and then downsample. (Clumsy, I know.)</p>\n<p>The tests above have been carried ouy with OpenCV version 2.4.9.</p>\n", "abstract": "Your question is a simple one, and the answer is a simple one, as well: No, you are not doing anything wrong. The implementation of the line drawing in OpenCV seems to be quite basic. I tried this with several line widths and also with fractional starting and ending positions. The line width parameter does not really work. The simple Brezenham lines (single-pixel lines from integer pixel positions) are fine, but the thicker lines are not good. See this test code: What you get is this:  The line thickness depends heavily on the angle; diagonal lines are much thicker than horizontal or vertical lines. Also, the thickness of the lines is anyway wrong (3 at thinnest) as you noticed. Using anti-alias does not make a significant change. However, if this is done with fractional coordinates, the thickness variation is smaller (but the thickness is still wrong):  Also, the problem seems to vanish with thick lines (thickness set to 5, real thickness 7, no fractional coordinates). This suggest that the rotation-dependent error is additive:  Then let's try to draw overlapping files with widths 10, 11, and 12 with different shades of gray:  In principle there should be three colours seen, but in practice only two are visible. This means that the lines with widths 11 and 12 are drawn with the same width (13). Any tricks with the fractional coordinates produce the same result. Summary: Only odd line widths are available. Narrow lines have large relative width errors if fractional (shifted) coordinates are not used. If you need to have more control, draw thicker line at a higher resolution and then downsample. (Clumsy, I know.) The tests above have been carried ouy with OpenCV version 2.4.9."}]}, {"link": "https://stackoverflow.com/questions/23941738/python-draw-rectangle-in-basemap", "question": {"id": "23941738", "title": "Python. Draw rectangle in basemap", "content": "<p>I need to add several rectangles in my basemap. I nee four rectangles with lat and log ranges as below.</p>\n<p>1) llcrnrlon=-10,  urcrnrlon=10, llcrnrlat=35,urcrnrlat=60</p>\n<p>2) llcrnrlon=10.5,  urcrnrlon=35, llcrnrlat=35,urcrnrlat=60</p>\n<p>3) llcrnrlon=35.5,  urcrnrlon=52, llcrnrlat=30,urcrnrlat=55</p>\n<p>4) llcrnrlon=-20,  urcrnrlon=35, llcrnrlat=20,urcrnrlat=34.5</p>\n<p>My script is below. I found \"polygon\" packages to add lines but I do not exactly know how to do. Please help me!! Thanks a lot for your help in advance!</p>\n<pre><code class=\"python\">    from mpl_toolkits.basemap import Basemap\n\n     m=basemaputpart.Basemap(llcrnrlon=-60, llcrnrlat=20, urcrnrlon=60, urcrnrlat=70, resolution='i', projection='cyl', lon_0=0, lat_0=45)\n\n    lon1=np.array([[-180.+j*0.5 for j in range(721)]  for i in range(181)])\n    lat1=np.array([[i*0.5 for j in range(721)]  for i in range(181)  ])\n    Nx1,Ny1=m(lon1,lat1,inverse=False)\n\n    toplot=data[:,:]\n    toplot[data==0]=np.nan\n    toplot=np.ma.masked_invalid(toplot)\n    plt.pcolor(Nx1,Ny1,np.log(toplot),vmin=0, vmax=5)\n    cbar=plt.colorbar()\n\n    m.drawcoastlines(zorder=2)\n    m.drawcountries(zorder=2)\n\n    llcrnrlon = -10\n    urcrnrlon =  10\n    llcrnrlat =  35\n    urcrnrlat =  60\n    lower_left = (llcrnrlon, llcrnrlat)\n    lower_right= (urcrnrlon, llcrnrlat)\n    upper_left = (llcrnrlon, urcrnrlat)\n    upper_right= (urcrnrlon, urcrnrlat)\n\n    plot_rec(m, lower_left, upper_left, lower_right, upper_right)\n</code></pre>\n<p>Then I see \"Type Error: 'tuple' object is not callable\"</p>\n<p>Instead of this part, I added one  you suggested first.</p>\n<pre><code class=\"python\">    ..\n    m.drawcoastlines(zorder=2)\n    m.drawcountries(zorder=2)\n\n    def plot_rec(m, lower_left, upper_left, lower_right, upper_right):\n        xs = [lower_left[-10], upper_left[-10],\n              lower_right[10], upper_right[10]]\n        ys = [lower_left[35], upper_left[60],\n              lower_right[35], upper_right[60]]\n        m.plot(xs,ys,latlon=True)\n\n    plt.show()\n</code></pre>\n<p>Then I do not see any box in my plot. I have to put another, not plt.show()??</p>\n<p>Also, would you let me know how to put number in the box (e.g., 1 in the upper left conner of the box) ? How to get sum of values in all points of my data and get percentage of (sume of values in the box) over (sum of values in all points of my data)? I ask too much.. Just let me know what you can give me, it would be anyway great!!! </p>\n<p>THanks a lot!!</p>\n", "abstract": "I need to add several rectangles in my basemap. I nee four rectangles with lat and log ranges as below. 1) llcrnrlon=-10,  urcrnrlon=10, llcrnrlat=35,urcrnrlat=60 2) llcrnrlon=10.5,  urcrnrlon=35, llcrnrlat=35,urcrnrlat=60 3) llcrnrlon=35.5,  urcrnrlon=52, llcrnrlat=30,urcrnrlat=55 4) llcrnrlon=-20,  urcrnrlon=35, llcrnrlat=20,urcrnrlat=34.5 My script is below. I found \"polygon\" packages to add lines but I do not exactly know how to do. Please help me!! Thanks a lot for your help in advance! Then I see \"Type Error: 'tuple' object is not callable\" Instead of this part, I added one  you suggested first. Then I do not see any box in my plot. I have to put another, not plt.show()?? Also, would you let me know how to put number in the box (e.g., 1 in the upper left conner of the box) ? How to get sum of values in all points of my data and get percentage of (sume of values in the box) over (sum of values in all points of my data)? I ask too much.. Just let me know what you can give me, it would be anyway great!!!  THanks a lot!!"}, "answers": [{"id": 23942045, "score": 4, "vote": 0, "content": "<p>The tricky thing about this is that a 'rectangle' isn't really a 'rectangle' on many, many projection types. So when you say 'rectangle', do you mean an actual rectangle in map-space, or simply a rectangle in pixel-space? The two require very different</p>\n<p>But let's assume you want it in map-space. The quickest way is to just use Basemap's <a href=\"http://matplotlib.org/basemap/api/basemap_api.html#mpl_toolkits.basemap.Basemap.plot\" rel=\"nofollow\">plot</a> method, like so:</p>\n<pre><code class=\"python\">def plot_rec(bmap, lower_left, upper_left, lower_right, upper_right):\n    xs = [lower_left[0], upper_left[0],\n          lower_right[0], upper_right[0],\n          lower_left[0], lower_right[0],\n          upper_left[0], upper_right[0]]\n    ys = [lower_left[1], upper_left[1],\n          lower_right[1], upper_right[1],\n          lower_left[1], lower_right[1],\n          upper_left[1], upper_right[1]]\n    bmap.plot(xs, ys, latlon = True)\n</code></pre>\n<p>where <code>bmap</code> is your map, and <code>lower_left</code> etc. are lon-lat tuples at those corners.</p>\n<p><strong>Update with use examples:</strong></p>\n<p>You asked for a usage example, so here you go:</p>\n<pre><code class=\"python\">m=basemaputpart.Basemap(llcrnrlon=-60, llcrnrlat=20, urcrnrlon=60, urcrnrlat=70, resolution='i', projection='cyl', lon_0=0, lat_0=45)\n\n# your other setting up the map code here\n\n# here I draw the first rectangle\nllcrnrlon = -10\nurcrnrlon =  10\nllcrnrlat =  35\nurcrnrlat =  60\nlower_left = (llcrnrlon, llcrnrlat)\nlower_right= (urcrnrlon, llcrnrlat)\nupper_left = (llcrnrlon, urcrnrlat)\nupper_right= (urcrnrlon, urcrnrlat)\n\nplot_rec(m, lower_left, upper_left, lower_right, upper_right) # This calls the function I defined before\n\n# Rinse and repeat for the other lat/lon combos\n\nplt.show()\n</code></pre>\n<p>You can definitely do this more elegantly using list comprehensions to generate the correct corner-point sets, but this should get you started.</p>\n<p><strong>Update 2</strong></p>\n<p>So it appears there is some confusion here. <code>plot_rec</code> is a <a href=\"http://www.tutorialspoint.com/python/python_functions.htm\" rel=\"nofollow\">function</a>. It should be placed somewhere not inline with the rest of your script. By itself, it doesn't do anything. It does when you <strong>call</strong> it here:</p>\n<pre><code class=\"python\">...\nupper_left = (llcrnrlon, urcrnrlat)\nupper_right= (urcrnrlon, urcrnrlat)\n# This next line is where we call the function\nplot_rec(m, lower_left, upper_left, lower_right, upper_right)\n</code></pre>\n", "abstract": "The tricky thing about this is that a 'rectangle' isn't really a 'rectangle' on many, many projection types. So when you say 'rectangle', do you mean an actual rectangle in map-space, or simply a rectangle in pixel-space? The two require very different But let's assume you want it in map-space. The quickest way is to just use Basemap's plot method, like so: where bmap is your map, and lower_left etc. are lon-lat tuples at those corners. Update with use examples: You asked for a usage example, so here you go: You can definitely do this more elegantly using list comprehensions to generate the correct corner-point sets, but this should get you started. Update 2 So it appears there is some confusion here. plot_rec is a function. It should be placed somewhere not inline with the rest of your script. By itself, it doesn't do anything. It does when you call it here:"}, {"id": 26423103, "score": 3, "vote": 0, "content": "<p>This function bellow should do what you need. <em>bmap</em> is your basemap object, and <em>lonmin,lonmax,latmin,latmax</em> defines your domain in latitude/longitude terms. You need to call the <code>plot_rectangle</code> function after <em>bmap</em> has been generated in your code by a call to <em>Basemap(...).</em></p>\n<pre><code class=\"python\">def plot_rectangle(bmap, lonmin,lonmax,latmin,latmax):\n    xs = [lonmin,lonmax,lonmax,lonmin,lonmin]\n    ys = [latmin,latmin,latmax,latmax,latmin]\n    bmap.plot(xs, ys,latlon = True)\n</code></pre>\n", "abstract": "This function bellow should do what you need. bmap is your basemap object, and lonmin,lonmax,latmin,latmax defines your domain in latitude/longitude terms. You need to call the plot_rectangle function after bmap has been generated in your code by a call to Basemap(...)."}, {"id": 54796608, "score": 0, "vote": 0, "content": "<p>If, instead, your are looking for rectangles in the map space, whose borders follows paralleles and meridians, the following function works for me. m is the basemap object.</p>\n<pre><code class=\"python\"> def draw_screen_poly( minlat, maxlat, minlon, maxlon, m):\n      lons=np.hstack((np.repeat(minlon,10),\\\n                      np.linspace(minlon,maxlon, num=10),\\\n                      np.repeat(maxlon,10),\\\n                      np.linspace(maxlon,minlon, num=10)))\n\n      lats=np.hstack((np.linspace(minlat,maxlat, num=10),\\\n                      np.repeat(maxlat,10),\\\n                      np.linspace(maxlat,minlat, num=10),\n                      np.repeat(minlat,10)))\n\n      m.plot(y=lats,x=lons,latlon=True, lw=2, color='navy', alpha=0.8)\n\n      x, y = m(lons, lats)\n      xy = zip(x,y)\n      poly = Polygon( np.asarray(xy), linewidth=3) \n      ax.add_patch(poly)\n</code></pre>\n", "abstract": "If, instead, your are looking for rectangles in the map space, whose borders follows paralleles and meridians, the following function works for me. m is the basemap object."}]}, {"link": "https://stackoverflow.com/questions/48500162/drawing-a-circle-to-a-surface-in-pygame", "question": {"id": "48500162", "title": "Drawing a circle to a surface in pygame", "content": "<p>I'm writing a program in pygame in which I want to draw circles on several surfaces, so that when I erase a circle (redraw it with the transparent colorkey) I get the picture that was in the layer below back. However, I seem to be stuck at an early step and can't seem to draw a circle on a surface (as opposed to the background display). Here is a minimal example: </p>\n<pre><code class=\"python\">import pygame\n\npygame.init()\nwidth  = 400\nheight = 400\nscreen = pygame.display.set_mode((width, height))\nsurf1 = pygame.Surface((width,height))\nsurf1.fill((0,255,0))\npygame.draw.circle(surf1, (0,0,0), (200,2000), 5)\nscreen.blit(surf1, (0,0))\nexit = False\n\nwhile not exit:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            exit = True\n    pygame.display.update()\npygame.quit()\n</code></pre>\n<p>I expected to get a green surface with a black circle in the middle, but I only get a green surface. What am I doing wrong?\nThanks!</p>\n", "abstract": "I'm writing a program in pygame in which I want to draw circles on several surfaces, so that when I erase a circle (redraw it with the transparent colorkey) I get the picture that was in the layer below back. However, I seem to be stuck at an early step and can't seem to draw a circle on a surface (as opposed to the background display). Here is a minimal example:  I expected to get a green surface with a black circle in the middle, but I only get a green surface. What am I doing wrong?\nThanks!"}, "answers": [{"id": 48502346, "score": 6, "vote": 0, "content": "<p>You have a typo in the coordinates for the circle, it should be </p>\n<pre><code class=\"python\">pygame.draw.circle(surf1, (0,0,0), (200,200), 5)\n</code></pre>\n<p>i.e. a <code>200</code> instead of a <code>2000</code>.</p>\n", "abstract": "You have a typo in the coordinates for the circle, it should be  i.e. a 200 instead of a 2000."}]}, {"link": "https://stackoverflow.com/questions/9693934/cant-draw-sprites-in-pyglet", "question": {"id": "9693934", "title": "Can&#39;t draw() sprites in pyglet", "content": "<p>For some reason, I can't get pyglet to draw sprites. Here's my code:</p>\n<pre><code class=\"python\">import pyglet\n\ngame = pyglet.window.Window(640, 480, \"I'm a window\")\n\nbatch = pyglet.graphics.Batch()\n\npyglet.resource.path = [\".\"]\npyglet.resource.reindex()\n\nimage = pyglet.resource.image(\"hextile.png\")\npyglet.sprite.Sprite(image, x=200, y=300, batch=batch)\npyglet.text.Label('DING', font_name='Arial', font_size=24, x=100, y=100, batch=batch)\n\n@game.event\ndef on_draw():\n\n    game.clear()\n    batch.draw()\n    #image.blit(0, 0)\n\npyglet.app.run()\n</code></pre>\n<p>Now, when I draw the batch, the text label is shown correctly. I see \"DING\" on the window. However, the image \"hextile.png\" is not shown. I tried drawing the sprite independently, but that didn't work either. Blitting the image (as shown in the commented line), however, seems to work just fine, but obviously that's not quite the functionality I'm after here. I can't figure this one out. What am I missing?</p>\n", "abstract": "For some reason, I can't get pyglet to draw sprites. Here's my code: Now, when I draw the batch, the text label is shown correctly. I see \"DING\" on the window. However, the image \"hextile.png\" is not shown. I tried drawing the sprite independently, but that didn't work either. Blitting the image (as shown in the commented line), however, seems to work just fine, but obviously that's not quite the functionality I'm after here. I can't figure this one out. What am I missing?"}, "answers": [{"id": 9808097, "score": 5, "vote": 0, "content": "<p><em>Assuming you and your friends have ATI graphics cards:</em></p>\n<p>Sprite.draw() uses the <code>v2i</code> format and VertexDomain.draw() internally. For some reason this combination doesn't work on Windows Vista/7 Catalyst drivers 11.9 and above, and consequently Sprite drawing fails as well. See also: <a href=\"https://stackoverflow.com/questions/9369357/pyglet-vertex-list-not-rendered-amd-driver\">pyglet vertex list not rendered (AMD driver?)</a></p>\n<p>There is a pyglet issue you might want to follow: <a href=\"http://code.google.com/p/pyglet/issues/detail?id=544\" rel=\"nofollow noreferrer\">http://code.google.com/p/pyglet/issues/detail?id=544</a></p>\n<p>Your options for the moment seem to be either to patch pyglet.sprite.Sprite as mentioned in <a href=\"http://code.google.com/p/pyglet/issues/detail?id=544#c3\" rel=\"nofollow noreferrer\">the third comment</a> on that issue or downgrade your video driver.</p>\n<p><strong>Update:</strong> No need to patch Sprite or downgrade your video driver. This problem seems to be fixed with Catalyst 12.4 (video driver 8.961.0.0).</p>\n", "abstract": "Assuming you and your friends have ATI graphics cards: Sprite.draw() uses the v2i format and VertexDomain.draw() internally. For some reason this combination doesn't work on Windows Vista/7 Catalyst drivers 11.9 and above, and consequently Sprite drawing fails as well. See also: pyglet vertex list not rendered (AMD driver?) There is a pyglet issue you might want to follow: http://code.google.com/p/pyglet/issues/detail?id=544 Your options for the moment seem to be either to patch pyglet.sprite.Sprite as mentioned in the third comment on that issue or downgrade your video driver. Update: No need to patch Sprite or downgrade your video driver. This problem seems to be fixed with Catalyst 12.4 (video driver 8.961.0.0)."}, {"id": 9694080, "score": 1, "vote": 0, "content": "<p>The sprite is getting garbage collected because you don't hold a reference to it. Do this:</p>\n<pre><code class=\"python\">sprite = pyglet.sprite.Sprite(image, x=200, y=300, batch=batch)\n</code></pre>\n<p>For what it's worth, I prefer using a subclass of Window, like this: (this code works for me too)</p>\n<pre><code class=\"python\">import pyglet\n\nclass Window(pyglet.window.Window):\n    def __init__(self, *args, **kwargs):\n        super(Window, self).__init__(*args, **kwargs)\n        self.batch = pyglet.graphics.Batch()\n        image = pyglet.resource.image('hextile.png')\n        self.sprite = pyglet.sprite.Sprite(image, batch=self.batch)\n    def on_draw(self):\n        self.clear()\n        self.batch.draw()\n\ndef main():\n    window = Window(width=640, height=480, caption='Pyglet')\n    pyglet.app.run()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n", "abstract": "The sprite is getting garbage collected because you don't hold a reference to it. Do this: For what it's worth, I prefer using a subclass of Window, like this: (this code works for me too)"}]}, {"link": "https://stackoverflow.com/questions/44092699/pyglet-update-batch-data", "question": {"id": "44092699", "title": "Pyglet update batch data", "content": "<p>I am using Pyglet batches to draw hundreds of quads. I would like to update the position of the verticies and the color values of the quads while the game is running. How can I do this? I have looked through a lot of the Pyglet Documentation and the closest thing I could find is:</p>\n<pre><code class=\"python\">    'c4f/static'\n</code></pre>\n<p>versus</p>\n<pre><code class=\"python\">    'c4f/dynamic'\n</code></pre>\n<p>My batch usage looks like this:</p>\n<pre><code class=\"python\">    self.batch.add(4, GL_QUADS, self.texture, \n      ('v3f/dynamic', self.verticies), ('c4f/dynamic', ((1.0,1.0,1.0,1.0)*4))\n\n    ...\n    def on_draw(self):\n      self.batch.draw()\n</code></pre>\n", "abstract": "I am using Pyglet batches to draw hundreds of quads. I would like to update the position of the verticies and the color values of the quads while the game is running. How can I do this? I have looked through a lot of the Pyglet Documentation and the closest thing I could find is: versus My batch usage looks like this:"}, "answers": [{"id": 44098212, "score": 4, "vote": 0, "content": "<p>Pyglets <code>batch.add</code> returns a vertice object that you can manipulate.<br/>\nSwitch your code to looks like the following:</p>\n<pre><code class=\"python\">v = self.batch.add(4, GL_QUADS, self.texture, ('v3f/dynamic', self.verticies), ('c4f/dynamic', ((1.0,1.0,1.0,1.0)*4))\n\n...\ndef on_draw(self):\n    for index in range(len(v.vertices)):\n        v.vertices[index] = v.vertices[index] +1\n    self.batch.draw()\n</code></pre>\n<p>This is a crude example of how to manipulate it, ultimately you want to step in your <code>range()</code> call and update x,y pairs.</p>\n", "abstract": "Pyglets batch.add returns a vertice object that you can manipulate.\nSwitch your code to looks like the following: This is a crude example of how to manipulate it, ultimately you want to step in your range() call and update x,y pairs."}]}, {"link": "https://stackoverflow.com/questions/20287152/wxpython-draw-text-onto-existing-bitmap-or-image", "question": {"id": "20287152", "title": "wxPython draw text onto EXISTING bitmap or image", "content": "<p>I'm trying to add a background image to some text, I'm hoping to do this by using MemoryDC to write text to an image which will then be placed in my GridSizer.</p>\n<p>Everything works as I want it to with the exception that I cannot use an existing image to draw text onto, I have to create a new, empty, bitmap which is pointless for me because it puts me back where I started.</p>\n<p>Here is my code, it places a white box into my GridSizer with text drawn onto it:</p>\n<pre><code class=\"python\">    w, h = 150,64\n    bmp = wx.EmptyBitmap(w,h)\n    dc = wx.MemoryDC()\n    dc.SelectObject(bmp)\n    dc.Clear()\n    text = 'whatever'\n    tw, th = dc.GetTextExtent(text)\n    dc.DrawText(text, (w-tw)/2, (h-th)/2)\n    dc.SelectObject(wx.NullBitmap)\n    output_bitmap = wx.StaticBitmap(self, -1, bmp)\n    return output_bitmap\n</code></pre>\n<p>Now here is the same code changed to try and use an existing image:</p>\n<pre><code class=\"python\">    png = wx.Image(location, wx.BITMAP_TYPE_PNG).ConvertToBitmap()\n    bmp = wx.StaticBitmap(self, -1, bitmap = png, size=(150, 64))\n\n    dc = wx.MemoryDC()\n    dc.SelectObject(bmp)\n    dc.Clear()\n    text = 'whatever'\n    tw, th = dc.GetTextExtent(text)\n    dc.DrawText(text, (w-tw)/2, (h-th)/2)\n    dc.SelectObject(wx.NullBitmap)\n    output_bitmap = wx.StaticBitmap(self, -1, bmp)\n    return output_bitmap\n</code></pre>\n<p>That gives the following error message:</p>\n<pre><code class=\"python\">File \"/home/user/projects/project/base.py\", line 267, in online_indicator\ndc.SelectObject(bmp)\n\nFile \"/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode/wx/_gdi.py\", line 4783, in SelectObject\nreturn _gdi_.MemoryDC_SelectObject(*args, **kwargs)\n\nTypeError: in method 'MemoryDC_SelectObject', expected argument 2 of type 'wxBitmap &amp;'\n</code></pre>\n<p>I've also tried using dc.DrawLabel but that won't accept my bitmap image.</p>\n<p>EDIT:</p>\n<p>Think I might be nearly there, started using dc.DrawImageLabel, now I can draw <em>either</em> an image <em>or</em> text, from what I can see it <strong>should</strong> be able to draw both but for some reason it won't, here is my new code:</p>\n<p>To draw text:</p>\n<pre><code class=\"python\">    png = wx.Image(location, wx.BITMAP_TYPE_PNG).ConvertToBitmap()\n    want_bmp = wx.StaticBitmap(self, -1, bitmap = png, )\n    w, h = 150,64\n    bmp = wx.EmptyBitmap(w,h)\n    dc = wx.MemoryDC()\n    dc.SelectObject(bmp)\n    dc.Clear()\n    rect = bmp.GetRect()\n    dc.DrawImageLabel(text='this',image=wx.NullBitmap, rect=rect, alignment=10)\n    dc.SelectObject(wx.NullBitmap)\n    output_bitmap = wx.StaticBitmap(self, -1, bmp)\n    return output_bitmap\n</code></pre>\n<p>to draw image:</p>\n<pre><code class=\"python\">    png = wx.Image(location, wx.BITMAP_TYPE_PNG).ConvertToBitmap()\n    want_bmp = wx.StaticBitmap(self, -1, bitmap = png, )\n    w, h = 150,64\n    bmp = wx.EmptyBitmap(w,h)\n    dc = wx.MemoryDC()\n    dc.SelectObject(bmp)\n    dc.Clear()\n    rect = bmp.GetRect()\n    dc.DrawImageLabel(text='this',image=wx.Bitmap(location), rect=rect, alignment=10)\n    dc.SelectObject(wx.NullBitmap)\n    output_bitmap = wx.StaticBitmap(self, -1, bmp)\n    return output_bitmap\n</code></pre>\n", "abstract": "I'm trying to add a background image to some text, I'm hoping to do this by using MemoryDC to write text to an image which will then be placed in my GridSizer. Everything works as I want it to with the exception that I cannot use an existing image to draw text onto, I have to create a new, empty, bitmap which is pointless for me because it puts me back where I started. Here is my code, it places a white box into my GridSizer with text drawn onto it: Now here is the same code changed to try and use an existing image: That gives the following error message: I've also tried using dc.DrawLabel but that won't accept my bitmap image. EDIT: Think I might be nearly there, started using dc.DrawImageLabel, now I can draw either an image or text, from what I can see it should be able to draw both but for some reason it won't, here is my new code: To draw text: to draw image:"}, "answers": [{"id": 20287755, "score": 3, "vote": 0, "content": "<p>MemoryDC works on a Bitmap, not a StaticBitmap control.</p>\n<p>Also, you can load Bitmaps directly, no need to use an Image object.</p>\n<pre><code class=\"python\">bitmap = wx.Bitmap(location)\ndc = wx.MemoryDC(bitmap)\ntext = 'whatever'\nw, h = dc.GetSize()\ntw, th = dc.GetTextExtent(text)\ndc.DrawText(text, (w - tw) / 2, (h - th) / 2) #display text in center\ndel dc\ncontrol = wx.StaticBitmap(self, -1, bitmap)\n</code></pre>\n", "abstract": "MemoryDC works on a Bitmap, not a StaticBitmap control. Also, you can load Bitmaps directly, no need to use an Image object."}]}, {"link": "https://stackoverflow.com/questions/42616907/pyqt-how-to-overlay-a-rectangle-on-an-image", "question": {"id": "42616907", "title": "PyQt - how to overlay a rectangle on an image", "content": "<p>After displaying an image on a PyQt label, I want to draw a rectangle on top of the displayed image. Note that I don't mean 'draw' as in where the user 'draws' a rectangle on the image, but I mean that I just want to create a rectangle on top of the image. I have the equivalent code for matplotlib axes but I'm not sure how to do the same thing in PyQt.</p>\n<pre><code class=\"python\"># Create Figure/Axes Instance\nfigure,axes = matplotlib.pyplot.subplots()\naxes.imshow(imageRGB)\n\n# Draw Rectangle\naxes.add_patch(matplotlib.patches.Rectangle((50,50),100,100,fill=False,edgecolor='red'))\n</code></pre>\n", "abstract": "After displaying an image on a PyQt label, I want to draw a rectangle on top of the displayed image. Note that I don't mean 'draw' as in where the user 'draws' a rectangle on the image, but I mean that I just want to create a rectangle on top of the image. I have the equivalent code for matplotlib axes but I'm not sure how to do the same thing in PyQt."}, "answers": [{"id": 43111866, "score": 10, "vote": 0, "content": "<pre><code class=\"python\"># convert image file into pixmap\nself.pixmap_image = QtGui.QPixmap(self.filename)\n\n# create painter instance with pixmap\nself.painterInstance = QtGui.QPainter(self.pixmap_image)\n\n# set rectangle color and thickness\nself.penRectangle = QtGui.QPen(QtCore.Qt.red)\nself.penRectangle.setWidth(3)\n\n# draw rectangle on painter\nself.painterInstance.setPen(self.penRectangle)\nself.painterInstance.drawRect(xPos,yPos,xLen,yLen)\n\n# set pixmap onto the label widget\nself.ui.label_imageDisplay.setPixmap(self.pixmap_image)\nself.ui.label_imageDisplay.show()\n</code></pre>\n", "abstract": ""}]}, {"link": "https://stackoverflow.com/questions/63985871/how-to-delete-a-single-pygame-drawing-from-the-screen", "question": {"id": "63985871", "title": "How to delete a single pygame drawing from the screen?", "content": "<p>When the big circle touches the little circles I want the little circle that it touched to disappear from the screen. However, I can't figure out how exactly you delete an individual drawing in pygame. How do I fix this issue? does pygame have this feature built-in?</p>\n<pre><code class=\"python\">from pygame import *\nimport random as rd\nimport math as m\n\ninit()\nscreen = display.set_mode((800, 600))\n\np_1_x = 200\np_1_y = 200\np_1_change_x = 0\np_1_change_y = 0\n\ndef p_1(x, y):\n    player_1 = draw.circle(screen, (0, 0, 0), (x, y), 15)\n\ndef pick_up(x, y, xx, yy):\n    distance = m.sqrt(m.pow(xx - x, 2) + m.pow(yy - y, 2))\n    if distance &lt; 19:\n        # I think the code to delete should go here\n        pass\n\ndots = []\nlocations = []\n\nfor i in range(5):\n    x = rd.randint(100, 700)\n    y = rd.randint(100, 500)\n    locations.append((x, y))\n\nwhile True:\n    screen.fill((255, 255, 255))\n    for events in event.get():\n        if events.type == QUIT:\n            quit()\n        if events.type == KEYDOWN:\n            if events.key == K_RIGHT:\n                p_1_change_x = 1\n            if events.key == K_LEFT:\n                p_1_change_x = -1\n            if events.key == K_UP:\n                p_1_change_y += 1\n            if events.key == K_DOWN:\n                p_1_change_y -= 1\n\n        if events.type == KEYUP:\n            if events.key == K_RIGHT or K_LEFT or K_UP or K_DOWN:\n                p_1_change_x = 0\n                p_1_change_y = 0\n\n    p_1_x += p_1_change_x\n    p_1_y -= p_1_change_y\n    for i, locate in enumerate(locations):\n        dot = draw.circle(screen, (0, 0, 0), locate, 5)\n        dots.append(dot)\n        for l in enumerate(locate):\n            pick_up(p_1_x, p_1_y, locate[0], locate[1])\n\n    p_1(p_1_x, p_1_y)\n    display.update()\n</code></pre>\n", "abstract": "When the big circle touches the little circles I want the little circle that it touched to disappear from the screen. However, I can't figure out how exactly you delete an individual drawing in pygame. How do I fix this issue? does pygame have this feature built-in?"}, "answers": [{"id": 63987289, "score": 4, "vote": 0, "content": "<p>Your code was so messy and hard to maintain, first I made 2 classes for Balls &amp; Dots.\nI detect collision by <code>pygame.Rect.colliderect</code>, first I make 2 rectangle then I check the collision like this:</p>\n<pre><code class=\"python\">def pick_up(ball, dot):\n    ball_rect = Rect( ball.x - ball.SIZE , ball.y - ball.SIZE , ball.SIZE*2, ball.SIZE*2)\n    dot_rect = Rect( dot.x - dot.SIZE , dot.y - dot.SIZE , dot.SIZE*2, dot.SIZE*2)\n    if ball_rect.colliderect(dot_rect): \n        return True\n    return False\n</code></pre>\n<p>If collision detects I remove it from dots array in the <code>while</code> loop:</p>\n<pre><code class=\"python\">for dot in dots:\n    if pick_up(ball, dot): # if dot in range ball\n            dots.remove(dot)\n    dot.draw()\n</code></pre>\n<p>Here is the whole source:</p>\n<pre><code class=\"python\">from pygame import *\nimport random as rd\n\nSCREEN_WIDTH = 800\nSCREEN_HEIGHT = 600\nNUMBER_OF_DOTS = 5\n\nclass Ball():\n    SIZE = 15\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n        \n    def draw(self):\n        draw.circle(screen, (0, 0, 0), (self.x, self.y), Ball.SIZE)\n    def move(self, vx, vy):\n        self.x += vx\n        self.y += vy\n\nclass Dot():\n    SIZE = 5    \n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n        \n    def draw(self):\n        draw.circle(screen, (0, 0, 0), (self.x, self.y), Dot.SIZE)\n\n\ndef pick_up(ball, dot):\n    ball_rect = Rect( ball.x - ball.SIZE , ball.y - ball.SIZE , ball.SIZE*2, ball.SIZE*2)\n    dot_rect = Rect( dot.x - dot.SIZE , dot.y - dot.SIZE , dot.SIZE*2, dot.SIZE*2)\n    if ball_rect.colliderect(dot_rect): \n        return True\n    return False\n\n\n\ninit()\nscreen = display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))\n\ndots = []\nball = Ball(200,200)\n\n# generate dots\nfor i in range(NUMBER_OF_DOTS):\n    x = rd.randint(100, 700)\n    y = rd.randint(100, 500)\n    dots.append(Dot(x,y))\n\n# the main game loop\nwhile True:\n    screen.fill((255, 255, 255))\n    keys=key.get_pressed()\n\n    for events in event.get():\n        keys=key.get_pressed()\n        if events.type == QUIT:\n            quit()\n\n    if keys[K_RIGHT]:\n        ball.move(+1,0)\n    if keys[K_LEFT]:\n        ball.move(-1,0)\n    if keys[K_UP]:\n        ball.move(0,-1)\n    if keys[K_DOWN]:\n        ball.move(0,+1)\n\n    for dot in dots:\n        dot.draw()\n        \n        if pick_up(ball, dot):\n                dots.remove(dot)\n\n    ball.draw()\n    display.update()\n    time.delay(1) # Speed down\n</code></pre>\n<h2>Update1:</h2>\n<p>PyGame Rectangle Collision\n<a href=\"http://www.pygame.org/docs/ref/rect.html#pygame.Rect.colliderect\" rel=\"noreferrer\">http://www.pygame.org/docs/ref/rect.html#pygame.Rect.colliderect</a></p>\n<h2>Update2:</h2>\n<p>I make a repo in the github and did some changes,<br/>\nDots are colorful, new dot gets random color and the ball gets bigger whenever eats a dot.\n<a href=\"https://i.stack.imgur.com/RjdrS.png\" rel=\"noreferrer\"><img alt=\"shot\" src=\"https://i.stack.imgur.com/RjdrS.png\"/></a></p>\n<p><a href=\"https://github.com/peymanmajidi/Ball-And-Dots-Game__Pygame\" rel=\"noreferrer\">https://github.com/peymanmajidi/Ball-And-Dots-Game__Pygame</a></p>\n", "abstract": "Your code was so messy and hard to maintain, first I made 2 classes for Balls & Dots.\nI detect collision by pygame.Rect.colliderect, first I make 2 rectangle then I check the collision like this: If collision detects I remove it from dots array in the while loop: Here is the whole source: PyGame Rectangle Collision\nhttp://www.pygame.org/docs/ref/rect.html#pygame.Rect.colliderect I make a repo in the github and did some changes,\nDots are colorful, new dot gets random color and the ball gets bigger whenever eats a dot.\n https://github.com/peymanmajidi/Ball-And-Dots-Game__Pygame"}, {"id": 63986006, "score": 3, "vote": 0, "content": "<p>The code should delete it from the <code>locations</code> list so that it's not re-drawn in the future.  You clear the screen each frame, so clearing + not-redrawing is \"deleting\".</p>\n<p>Say you modified <code>pick_up()</code> to simply return True or False:</p>\n<pre><code class=\"python\">def pick_up(x, y, xx, yy):\n    result = False\n    distance = m.sqrt(m.pow(xx - x, 2) + m.pow(yy - y, 2))\n    if distance &lt; 19:\n        result = True              # It was picked\n    return result\n</code></pre>\n<p>Then as you iterate through the <code>locations</code> list drawing &amp; checking for being picked, save the index of the picked circles, then remove them from the <code>locations</code> in a second step.  Using the 2-step form means you don't have to worry about accidentally skipping items if you delete from the list as you iterate over it.</p>\n<pre><code class=\"python\">p_1_x += p_1_change_x\np_1_y -= p_1_change_y\npicked_up = []                           # empty list to hold \"picked\" items\nfor i, locate in enumerate(locations):\n    dot = draw.circle(screen, (0, 0, 0), locate, 5)\n    dots.append(dot)\n    for l in enumerate(locate):\n        if ( pick_up(p_1_x, p_1_y, locate[0], locate[1]) ):\n            picked_up.append( i )        # save the index of anything \"picked\"\n\n# remove any picked-up circles from the list\nfor index in sorted( picked_up, reverse=True ):   # start with the highest index first\n    print( \"Removing circle from location[%d]\" % ( index ) )  # DEBUG\n    del( locations[ index ] )\n</code></pre>\n", "abstract": "The code should delete it from the locations list so that it's not re-drawn in the future.  You clear the screen each frame, so clearing + not-redrawing is \"deleting\". Say you modified pick_up() to simply return True or False: Then as you iterate through the locations list drawing & checking for being picked, save the index of the picked circles, then remove them from the locations in a second step.  Using the 2-step form means you don't have to worry about accidentally skipping items if you delete from the list as you iterate over it."}]}, {"link": "https://stackoverflow.com/questions/55233448/pygame-overlapping-sprites-draw-order-based-on-location", "question": {"id": "55233448", "title": "Pygame overlapping Sprites (draw order) based on location", "content": "<p>I'm still relatively new to Pygame and Python in general, so hopefully this isn't too out there.</p>\n<p>I'm making a top-down RPG, and I have two Sprite objects with images that look (for example) like these:<br/>\n<a href=\"https://i.stack.imgur.com/hqtoi.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/hqtoi.png\"/></a> <a href=\"https://i.stack.imgur.com/HEBah.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/HEBah.png\"/></a></p>\n<p>that use rects that do not represent the entirety of the image:</p>\n<pre><code class=\"python\">class NPC(pygame.sprite.Sprite):\n    def __init__(self, image, pos, *groups):\n        super().__init__(*groups)\n        self.image = pygame.load(image)\n        self.rect = self.image.get_rect()\n        self.collisionRect = pygame.Rect(self.rect.left, self.rect.top + 12, self.image.get_width(), self.image.get_width()) \n        #12 is the number of pixels that will overlap in the y-dimension\n</code></pre>\n<p>I'm doing this because I want the top few pixels of the NPC to overlap with other sprites. The <code>collisionRect</code> in each object is used over the <code>rect</code> whenever I detect a collision, so that I can create this effect.</p>\n<p>However, I need a way to redraw them within my update() function so that one draws over the other <em>based on their relative locations to each other.</em></p>\n<p>So, when one NPC is above the other it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/YGpOh.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/YGpOh.png\"/></a></p>\n<p>But, when it's the other way around, it should look like this:</p>\n<p><a href=\"https://i.stack.imgur.com/qqKef.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/qqKef.png\"/></a></p>\n<p>Which means that the images need to be drawn in a different order depending on which sprite is 'below' the other.</p>\n<p>I've thought about possibly cutting the sprites into separate sprites and just have the 'head' sprites draw last, but I was wondering if there was a simpler (or at least a reliable) way to <em>detect</em> whether a sprite should be drawn last or not, based on whether or not it is both overlapping another sprite <em>and</em> immediately below it in the y-dimension.</p>\n<p>I apologize if this question is too broad or needs more context; can provide those if needed.</p>\n", "abstract": "I'm still relatively new to Pygame and Python in general, so hopefully this isn't too out there. I'm making a top-down RPG, and I have two Sprite objects with images that look (for example) like these:\n  that use rects that do not represent the entirety of the image: I'm doing this because I want the top few pixels of the NPC to overlap with other sprites. The collisionRect in each object is used over the rect whenever I detect a collision, so that I can create this effect. However, I need a way to redraw them within my update() function so that one draws over the other based on their relative locations to each other. So, when one NPC is above the other it looks like this:  But, when it's the other way around, it should look like this:  Which means that the images need to be drawn in a different order depending on which sprite is 'below' the other. I've thought about possibly cutting the sprites into separate sprites and just have the 'head' sprites draw last, but I was wondering if there was a simpler (or at least a reliable) way to detect whether a sprite should be drawn last or not, based on whether or not it is both overlapping another sprite and immediately below it in the y-dimension. I apologize if this question is too broad or needs more context; can provide those if needed."}, "answers": [{"id": 55236114, "score": 7, "vote": 0, "content": "<p>As Kingsley already said in a comment, sorting your sprites by their <code>y</code> coordinate is a common way to do this.</p>\n<p>Here's a full, running example (I named your images <code>guy.png</code> and <code>gal.png</code>). Since you already use sprites, I used a simple <code>pygame.sprite.Group</code>-subclass:</p>\n<pre><code class=\"python\">import pygame\n\nclass Actor(pygame.sprite.Sprite):\n    def __init__(self, image, pos):\n        super().__init__()\n        self.image = image\n        self.pos = pygame.Vector2(pos)\n        self.rect = self.image.get_rect(center=self.pos)\n\n    def update(self, events, dt):\n        pass\n\nclass Player(Actor):\n    def __init__(self, image, pos):\n        super().__init__(image, pos)\n\n    def update(self, events, dt):\n        pressed = pygame.key.get_pressed()\n        move = pygame.Vector2((0, 0))\n        if pressed[pygame.K_w]: move += (0, -1)\n        if pressed[pygame.K_a]: move += (-1, 0)\n        if pressed[pygame.K_s]: move += (0, 1)\n        if pressed[pygame.K_d]: move += (1, 0)\n        if move.length() &gt; 0: move.normalize_ip()\n        self.pos += move*(dt/5)\n        self.rect.center = self.pos\n\nclass YAwareGroup(pygame.sprite.Group):\n    def by_y(self, spr):\n        return spr.pos.y\n\n    def draw(self, surface):\n        sprites = self.sprites()\n        surface_blit = surface.blit\n        for spr in sorted(sprites, key=self.by_y):\n            self.spritedict[spr] = surface_blit(spr.image, spr.rect)\n        self.lostsprites = []\n\ndef main():\n    pygame.init()\n    screen = pygame.display.set_mode((500, 500))\n    clock = pygame.time.Clock()\n    dt = 0\n\n    sprites = YAwareGroup(Player(pygame.image.load('guy.png').convert_alpha(), (100, 200)),\n                          Actor(pygame.image.load('gal.png').convert_alpha(), (200, 200)))\n\n    while True:\n        events = pygame.event.get()\n        for e in events:\n            if e.type == pygame.QUIT:\n                return\n\n        sprites.update(events, dt)\n        screen.fill((30, 30, 30))\n        sprites.draw(screen)\n\n        pygame.display.update()\n        dt = clock.tick(60)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/fPJuT.gif\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/fPJuT.gif\"/></a></p>\n<p>If you need custom drawing logic, it's usually not the worst idea to subclass pygame's <code>Group</code> classes. You can find their source <a href=\"https://github.com/pygame/pygame\" rel=\"noreferrer\">here</a> to see how they work.</p>\n", "abstract": "As Kingsley already said in a comment, sorting your sprites by their y coordinate is a common way to do this. Here's a full, running example (I named your images guy.png and gal.png). Since you already use sprites, I used a simple pygame.sprite.Group-subclass:  If you need custom drawing logic, it's usually not the worst idea to subclass pygame's Group classes. You can find their source here to see how they work."}]}, {"link": "https://stackoverflow.com/questions/22361249/how-can-i-just-draw-a-specific-sprite-in-a-group-with-pygame-draw", "question": {"id": "22361249", "title": "How can I just draw a specific sprite in a Group with pygame draw()?", "content": "<pre><code class=\"python\">&lt;Group(4 sprites)&gt;\n</code></pre>\n<p>I have 4 sprites in a group they all ready to draw with the line,</p>\n<pre><code class=\"python\">stuff_to_draw.draw(screen)\n</code></pre>\n<p>They all currently draw at the same time.</p>\n<p>Is it possible to do something like this</p>\n<pre><code class=\"python\">stuff_to_draw[0].draw(screen)\n</code></pre>\n<p>I've looked at <a href=\"https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group\" rel=\"nofollow noreferrer\">documentation for pygame Groups</a>, but can not find any helpful information about selecting a specific element in the group.</p>\n<p><strong>What am I trying to achieve?</strong></p>\n<p>The sprite group currently holds a answer sprite which consists of a location (x,y) and a image of the letter to blit.</p>\n<p>Currently across all maps the answer is blitted instead of on the current question. So I would like to be able to say on question one <code>stuff_to_draw[0]</code> then question two <code>stuff_to_draw[1]</code>.</p>\n", "abstract": "I have 4 sprites in a group they all ready to draw with the line, They all currently draw at the same time. Is it possible to do something like this I've looked at documentation for pygame Groups, but can not find any helpful information about selecting a specific element in the group. What am I trying to achieve? The sprite group currently holds a answer sprite which consists of a location (x,y) and a image of the letter to blit. Currently across all maps the answer is blitted instead of on the current question. So I would like to be able to say on question one stuff_to_draw[0] then question two stuff_to_draw[1]."}, "answers": [{"id": 22364111, "score": 3, "vote": 0, "content": "<p>First, add a <code>self.type</code> to your each of your sprites. Give it a value, such as <code>self.type = 1</code>.  Then call this when you want to draw a certain sprite or group of sprites:</p>\n<pre><code class=\"python\">for sprite in group: #Replace group with your sprite group\n    if sprite.type == 1: #Or whatever type you want\n        sprite.draw(screen)\n    elif sprite.type == 2:\n        sprite.draw(screen)\n    #Etc...\n</code></pre>\n<p>Next, in your <code>sprite</code> class make sure you inherit from <code>pygame.sprite.Sprite</code>:</p>\n<pre><code class=\"python\">class my_sprite_class(pygame.sprite.Sprite):\n    def __init__(self):\n        pygame.sprite.Sprite.__init__()\n        #Etc...\n\n    #Add this draw function so we can draw individual sprites\n    def draw(self, screen):\n        screen.blit(self.image, self.rect)\n</code></pre>\n<p>I forgot that individual sprites don't have a draw function, just the groups. @pmoleri @jackdh my bad</p>\n<p>Please read this <a href=\"http://pygame.org/docs/ref/sprite.html\" rel=\"nofollow\">post</a> here to get an idea of what the class can do.</p>\n<p>If you have any more questions just comment below.</p>\n", "abstract": "First, add a self.type to your each of your sprites. Give it a value, such as self.type = 1.  Then call this when you want to draw a certain sprite or group of sprites: Next, in your sprite class make sure you inherit from pygame.sprite.Sprite: I forgot that individual sprites don't have a draw function, just the groups. @pmoleri @jackdh my bad Please read this post here to get an idea of what the class can do. If you have any more questions just comment below."}, {"id": 22362090, "score": 2, "vote": 0, "content": "<p>You could blit any individual sprite, but I don't recommend it. This would be the way:</p>\n<pre><code class=\"python\">sprite = stuff_to_draw.sprites()[0]\nscreen.blit(sprite.image, sprite.rect)\n</code></pre>\n<p>My recommendation is to keep in the Sprites Group what you want to draw at a moment, and keep the rest in a separate list or group.</p>\n", "abstract": "You could blit any individual sprite, but I don't recommend it. This would be the way: My recommendation is to keep in the Sprites Group what you want to draw at a moment, and keep the rest in a separate list or group."}]}, {"link": "https://stackoverflow.com/questions/31936026/drawing-a-flatten-nltk-parse-tree-with-np-chunks", "question": {"id": "31936026", "title": "Drawing a flatten NLTK Parse Tree with NP chunks", "content": "<p>I want to analyze sentences with NLTK and display their chunks as a tree. NLTK offers the method <code>tree.draw()</code> to draw a tree. This following code draws a tree for the sentence <em>\"the little yellow dog barked at the cat\"</em>:</p>\n<pre><code class=\"python\">import nltk \nsentence = [(\"the\", \"DT\"), (\"little\", \"JJ\"), (\"yellow\", \"JJ\"), (\"dog\", \"NN\"), (\"barked\",\"VBD\"), (\"at\", \"IN\"), (\"the\", \"DT\"), (\"cat\", \"NN\")]\n\npattern = \"NP: {&lt;DT&gt;?&lt;JJ&gt;*&lt;NN&gt;}\"\nNPChunker = nltk.RegexpParser(pattern) \nresult = NPChunker.parse(sentence)\nresult.draw()\n</code></pre>\n<p>The result is this tree:</p>\n<p><a href=\"https://i.stack.imgur.com/Id64E.png\" rel=\"nofollow noreferrer\"><img alt=\"example tree\" src=\"https://i.stack.imgur.com/Id64E.png\"/></a></p>\n<p>How do i get a tree with one more level like this?</p>\n<p><a href=\"https://i.stack.imgur.com/qOuYb.png\" rel=\"nofollow noreferrer\"><img alt=\"deeper tree\" src=\"https://i.stack.imgur.com/qOuYb.png\"/></a></p>\n", "abstract": "I want to analyze sentences with NLTK and display their chunks as a tree. NLTK offers the method tree.draw() to draw a tree. This following code draws a tree for the sentence \"the little yellow dog barked at the cat\": The result is this tree:  How do i get a tree with one more level like this? "}, "answers": [{"id": 31937278, "score": 4, "vote": 0, "content": "<p>You need to \"level up\" your non-NP words, here's a hack:</p>\n<pre><code class=\"python\">import nltk \nsentence = [(\"the\", \"DT\"), (\"little\", \"JJ\"), (\"yellow\", \"JJ\"), (\"dog\", \"NN\"), (\"barked\",\"VBD\"), (\"at\", \"IN\"), (\"the\", \"DT\"), (\"cat\", \"NN\")]\n\npattern = \"\"\"NP: {&lt;DT&gt;?&lt;JJ&gt;*&lt;NN&gt;}\nVBD: {&lt;VBD&gt;}\nIN: {&lt;IN&gt;}\"\"\"\nNPChunker = nltk.RegexpParser(pattern) \nresult = NPChunker.parse(sentence)\nresult.draw()\n</code></pre>\n<p>[out]:</p>\n<p><a href=\"https://i.stack.imgur.com/TMXCb.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/TMXCb.png\"/></a></p>\n<hr/>\n", "abstract": "You need to \"level up\" your non-NP words, here's a hack: [out]: "}, {"id": 50561161, "score": 0, "vote": 0, "content": "<p>I know it's little too late to answer. But here is how I've done it.\nThe idea is you need to convert your sentence into a tree.</p>\n<pre><code class=\"python\">import nltk\nsentence = list(map(lambda sent: Tree(sent[1], children=[sent[0]]), sentence))\n</code></pre>\n<p>Then you can do the chunking afterwards.</p>\n<pre><code class=\"python\">NPChunker = nltk.RegexpParser(pattern) \nresult = NPChunker.parse(sentence)\nresult.draw()\n</code></pre>\n<p>Here's my result <a href=\"https://i.stack.imgur.com/s9XNW.png\" rel=\"nofollow noreferrer\">Tree</a></p>\n", "abstract": "I know it's little too late to answer. But here is how I've done it.\nThe idea is you need to convert your sentence into a tree. Then you can do the chunking afterwards. Here's my result Tree"}]}, {"link": "https://stackoverflow.com/questions/65242200/draw-a-random-rhombus-diamond-on-a-numpy-array-testing-harris-corner-detect", "question": {"id": "65242200", "title": "&#39;draw&#39; a random rhombus (diamond) on a numpy array (testing harris corner detection)", "content": "<p>I'm trying to create a random test for a \"harris_corner_detector\" function implementation (VERY GENERALLY AND SLIGHTLY INCORRECTLY: a function that finds corners in an image)\nIn the test, I want to create random simple shapes in a binary numpy matrix (it's easy to know the coordinates of their corners) (e.g rectangles, triangles, rhombus (diamond) etc...) and check if the harris implementation finds the correct corners.</p>\n<p>I already implemented a function that randomly 'draws' an axis parallel rectangle, but i can't find an efficient way to do so when it comes to shapes that are not parallel to the axes.</p>\n<p>To create a random rectangle, I randomly choose a starting point and an ending point on both axes and I change the value of all of the cells within those bounds like so:</p>\n<p>getting the random coords:</p>\n<pre><code class=\"python\">    def _get_random_coords(self, start, end):\n        x_start, y_start = np.random.randint(start, end, 2)\n        x_end = np.random.randint(x_start + 7, end + 20)\n        y_end = np.random.randint(y_start + 7, end + 20)\n        return (x_start, x_end, y_start, y_end)\n</code></pre>\n<p>drawing the random rectangle (values are 255 for the background and 0 for the shape):</p>\n<pre><code class=\"python\">mat = np.ones((1024, 1024)) * 255\nmat[x_start: x_end, y_start: y_end] = np.zeros((x_end - x_start, y_end - y_start))\n</code></pre>\n<p>but when it comes to drawing a diamond shape efficiently I'm at a loss. All I can think about is to run a loop that creates the diamond like so:</p>\n<pre><code class=\"python\">    def _get_rhombus(self, size):\n        rhombus = []\n        for i in range(size):\n            rhombus.append(np.zeros(i+1))\n        for i in range(size - 1, 0, -1):\n            rhombus.append(np.zeros(i))\n        return np.array(rhombus)\n</code></pre>\n<p>and then another loop to add it to the larger matrix.\nBut this method is highly inefficient when it comes to testing (as I'll draw hundreds of them, some of them might be huge).</p>\n<p>Any better ideas out there? Alternatively - is there a better way to test this?</p>\n<p>Thanks in advance.</p>\n", "abstract": "I'm trying to create a random test for a \"harris_corner_detector\" function implementation (VERY GENERALLY AND SLIGHTLY INCORRECTLY: a function that finds corners in an image)\nIn the test, I want to create random simple shapes in a binary numpy matrix (it's easy to know the coordinates of their corners) (e.g rectangles, triangles, rhombus (diamond) etc...) and check if the harris implementation finds the correct corners. I already implemented a function that randomly 'draws' an axis parallel rectangle, but i can't find an efficient way to do so when it comes to shapes that are not parallel to the axes. To create a random rectangle, I randomly choose a starting point and an ending point on both axes and I change the value of all of the cells within those bounds like so: getting the random coords: drawing the random rectangle (values are 255 for the background and 0 for the shape): but when it comes to drawing a diamond shape efficiently I'm at a loss. All I can think about is to run a loop that creates the diamond like so: and then another loop to add it to the larger matrix.\nBut this method is highly inefficient when it comes to testing (as I'll draw hundreds of them, some of them might be huge). Any better ideas out there? Alternatively - is there a better way to test this? Thanks in advance."}, "answers": [{"id": 65245989, "score": 2, "vote": 0, "content": "<p>There are a number of questions here, but the main one is how to create a numpy array of a filled rhombus given the corners. I'll answer that, and leave other questios, like creating random rhombuses, etc.</p>\n<p>To fill a convex polygon, one can find the line specified by subsequent corners and fill above or below that line, and then <code>and</code> all the filled areas together.</p>\n<pre><code class=\"python\">import numpy as np\nimport matplotlib.pyplot as plt\n\n# given two (non-vertical) points, A and B, \n# fill above or below the line connecting them\ndef fill(A, B, fill_below=True, xs=10, ys=12):\n\n    # the equation for a line is y = m*x + b, so calculate\n    # m and b from the two points on the line\n    m = (B[1]-A[1])/(B[0]-A[0]) # m = (y2 - y1)/(x2 - x1) = slope\n    b = A[1] - m*A[0]           # b = y1 - m*x1 = y intercept\n\n    # for each points of the grid, calculate whether it's above, below, or on\n    # the line. Since y = m*x + b, calculating m*x + b - y will give\n    # 0 when on the line, &lt;0 when above, and &gt;0 when below\n    Y, X = np.mgrid[0:ys, 0:xs] \n    L = m*X + b - Y\n\n    # select whether, &gt;=0 is True, or, &lt;=0 is True, to determine whether to\n    # fill above or below the line\n    op = np.greater_equal if fill_below else np.less_equal\n    return op(L, 0.0)\n</code></pre>\n<p>Here's a simple low-res rhombus</p>\n<pre><code class=\"python\">r = fill((0, 3), (3, 8), True) &amp; \\\nfill((3, 8), (7, 4), True) &amp; \\\nfill((7,4), (5,0), False) &amp; \\\nfill((5,0), (0,3), False)\nplt.imshow(r, cmap='Greys',  interpolation='nearest', origin='lower')\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ugKdB.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/ugKdB.png\"/></a></p>\n<p>That is, the above figure is the result of and-ing together the following fills:</p>\n<pre><code class=\"python\">fig, ax = plt.subplots(1, 4, figsize=(10, 3))\nfill_params = [((0, 3), (3, 8), True), ((3, 8), (7, 4), True), ((7, 4), (5, 0), False), ((5, 0), (0, 3), False)]\nfor p, ax in zip(fill_params, ax):\n    ax.imshow(fill(*p), cmap=\"Greys\", interpolation='nearest', origin='lower')\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/eMFnV.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/eMFnV.png\"/></a></p>\n<p>Or, one could do high-res, and it can have multiple sides (although I think it must be convex).</p>\n<pre><code class=\"python\">r = fill((0, 300), (300, 800), True, 1000, 1200) &amp; \\\nfill((300, 800), (600,700), True, 1000, 1200) &amp; \\\nfill((600, 700), (700, 400), True, 1000, 1200) &amp; \\\nfill((700,400), (500,0), False, 1000, 1200) &amp; \\\nfill((500,0), (100,100), False, 1000, 1200) &amp; \\\nfill((100, 100), (0,300), False, 1000, 1200)\nplt.imshow(r, cmap='Greys',  interpolation='nearest', origin='lower')\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ah24e.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/ah24e.png\"/></a></p>\n<p>Obviously, there are a few things to improve, like not repeating the second point of the line and the first point of the new line, but I wanted to keep this all clean and simple (and also, for fill to work the points just need to define a line and don't need to be a corner, so in some cases this more general approach might be preferable). Also, currently one needs to specify whether to fill above or below the line, and that can be calculated in various ways, but is probably easiest when generating the rhombus.</p>\n", "abstract": "There are a number of questions here, but the main one is how to create a numpy array of a filled rhombus given the corners. I'll answer that, and leave other questios, like creating random rhombuses, etc. To fill a convex polygon, one can find the line specified by subsequent corners and fill above or below that line, and then and all the filled areas together. Here's a simple low-res rhombus  That is, the above figure is the result of and-ing together the following fills:  Or, one could do high-res, and it can have multiple sides (although I think it must be convex).  Obviously, there are a few things to improve, like not repeating the second point of the line and the first point of the new line, but I wanted to keep this all clean and simple (and also, for fill to work the points just need to define a line and don't need to be a corner, so in some cases this more general approach might be preferable). Also, currently one needs to specify whether to fill above or below the line, and that can be calculated in various ways, but is probably easiest when generating the rhombus."}, {"id": 65248928, "score": 1, "vote": 0, "content": "<p>Although a little less robust than the answer already posted, here's a neat trick to form rhombus using upper and lower triangular matrices concept</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">import numpy as np\nimport matplotlib.pyplot as plt\n\nblank = np.zeros((10, 12))\n\nanchorx, anchory = 2, 3\n# better result for odd dimensions, because mid index exists\n# can handle h != w but the rhombus would still fit to a square of dimension min(h, w) x min(h, w)\nh, w = 7, 7\n\nassert anchorx+h &lt;= blank.shape[0], \"Boundaries exceed, maintain 'anchorx+h &lt;= blank.shape[0]' \"\nassert anchory+w &lt;= blank.shape[1], \"Boundaries exceed, maintain 'anchory+w &lt;= blank.shape[1]' \"\n\ntri_rtc = np.fromfunction(lambda i, j: i &gt;= j, (h // 2 + 1, w // 2 + 1), dtype=int)\ntri_ltc = np.flip(tri_rtc, axis=1)\n\nrhombus = np.vstack((np.hstack((tri_ltc, tri_rtc[:, 1:])), np.flip(np.hstack((tri_ltc, tri_rtc[:, 1:])), axis=0)[1:, :]))\nblank[anchorx:anchorx+h, anchory:anchory+w] = rhombus\n\nprint(blank)\nplt.imshow(blank)\nplt.show()\n</code></pre>\n<pre><code class=\"python\">[[0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.]\n [0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.]\n [0. 0. 0. 0. 0. 0. 1. 0. 0. 0. 0. 0.]\n [0. 0. 0. 0. 0. 1. 1. 1. 0. 0. 0. 0.]\n [0. 0. 0. 0. 1. 1. 1. 1. 1. 0. 0. 0.]\n [0. 0. 0. 1. 1. 1. 1. 1. 1. 1. 0. 0.]\n [0. 0. 0. 0. 1. 1. 1. 1. 1. 0. 0. 0.]\n [0. 0. 0. 0. 0. 1. 1. 1. 0. 0. 0. 0.]\n [0. 0. 0. 0. 0. 0. 1. 0. 0. 0. 0. 0.]\n [0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.]]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Dv2fA.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/Dv2fA.png\"/></a></p>\n", "abstract": "Although a little less robust than the answer already posted, here's a neat trick to form rhombus using upper and lower triangular matrices concept "}]}, {"link": "https://stackoverflow.com/questions/50548556/python-opencvhow-to-draw-not-complete-rectangle-with-four-corners-on-image", "question": {"id": "50548556", "title": "Python-Opencv:how to draw not complete rectangle with four corners on image", "content": "<p>After searching in the net, I could not find a way to draw a bounding box like the one in <a href=\"http://www.3divi.com/images/solutions/Papilon_APFIS.jpg\" rel=\"nofollow noreferrer\">this</a> image using OpenCV in Python. It has two features first four corners which are not connected with each other and second one the transparent bounding box.</p>\n<p>I know I should use Polygon, but I can not go further that this point.</p>\n", "abstract": "After searching in the net, I could not find a way to draw a bounding box like the one in this image using OpenCV in Python. It has two features first four corners which are not connected with each other and second one the transparent bounding box. I know I should use Polygon, but I can not go further that this point."}, "answers": [{"id": 50552863, "score": 5, "vote": 0, "content": "<p>The following function draws an incomplete rectangle around the region of interest. I made use of <code>cv2.line()</code> twice for each point provided. Additionally I also made use of <code>cv2.circle()</code> to mark the 4 points.</p>\n<p>There is one constraint. You will have to provide the 4 points in the following order: <strong>top-left, bottom-left, top-right, bottom-right</strong>.</p>\n<p>Also there is an option to vary the length of the line you want to draw <code>line_length</code>.</p>\n<p><strong>Code:</strong></p>\n<pre><code class=\"python\">def draw_border(img, point1, point2, point3, point4, line_length):\n\n    x1, y1 = point1\n    x2, y2 = point2\n    x3, y3 = point3\n    x4, y4 = point4    \n\n    cv2.circle(img, (x1, y1), 3, (255, 0, 255), -1)    #-- top_left\n    cv2.circle(img, (x2, y2), 3, (255, 0, 255), -1)    #-- bottom-left\n    cv2.circle(img, (x3, y3), 3, (255, 0, 255), -1)    #-- top-right\n    cv2.circle(img, (x4, y4), 3, (255, 0, 255), -1)    #-- bottom-right\n\n    cv2.line(img, (x1, y1), (x1 , y1 + line_length), (0, 255, 0), 2)  #-- top-left\n    cv2.line(img, (x1, y1), (x1 + line_length , y1), (0, 255, 0), 2)\n\n    cv2.line(img, (x2, y2), (x2 , y2 - line_length), (0, 255, 0), 2)  #-- bottom-left\n    cv2.line(img, (x2, y2), (x2 + line_length , y2), (0, 255, 0), 2)\n\n    cv2.line(img, (x3, y3), (x3 - line_length, y3), (0, 255, 0), 2)  #-- top-right\n    cv2.line(img, (x3, y3), (x3, y3 + line_length), (0, 255, 0), 2)\n\n    cv2.line(img, (x4, y4), (x4 , y4 - line_length), (0, 255, 0), 2)  #-- bottom-right\n    cv2.line(img, (x4, y4), (x4 - line_length , y4), (0, 255, 0), 2)\n\n    return img\n\nline_length = 15\n\nimg = np.zeros((512,512,3), np.uint8)\ncv2.imshow('img', img)\n\npoint1, point2, point3, point4 = (280,330), (280,390), (340,330), (340,390)\nfin_img = draw_border(img, point1, point2, point3, point4, line_length)\n\ncv2.imshow('fin_img', fin_img)\n\ncv2.waitKey()\ncv2.destroyAllWindows() \n</code></pre>\n<p><strong>Result:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/tuDfI.jpg\" rel=\"noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/tuDfI.jpg\"/></a></p>\n", "abstract": "The following function draws an incomplete rectangle around the region of interest. I made use of cv2.line() twice for each point provided. Additionally I also made use of cv2.circle() to mark the 4 points. There is one constraint. You will have to provide the 4 points in the following order: top-left, bottom-left, top-right, bottom-right. Also there is an option to vary the length of the line you want to draw line_length. Code: Result: "}, {"id": 50551787, "score": -1, "vote": 0, "content": "<p>Try this code. Might be helpful for you.</p>\n<p><strong>Code:</strong></p>\n<pre><code class=\"python\">import matplotlib.pyplot as plt\nimport matplotlib.patches as patches\nfrom PIL import Image\nimport numpy as np\n\nimage = np.array(Image.open('Image.jpg'), dtype=np.uint8)\n\n# Create figure and axes\nfig,ax = plt.subplots(1)\n\n# Display the image\nax.imshow(image)\n\n# Create a Rectangle patch\nrect = patches.Rectangle((102,55),160,162,linewidth=1,edgecolor='r',facecolor='none')\n\n# Add the patch to the Axes\nax.add_patch(rect)\n\nplt.show()\n</code></pre>\n<p><strong>Image Output:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/NAuvp.png\" rel=\"nofollow noreferrer\"><img alt=\"Output Would be like this\" src=\"https://i.stack.imgur.com/NAuvp.png\"/></a></p>\n", "abstract": "Try this code. Might be helpful for you. Code: Image Output: "}, {"id": 50662356, "score": -1, "vote": 0, "content": "<p>Also if someone needs: Fancy rectangle with curved corners in C:\nHowever I needed this code in python was replied by the community.</p>\n<pre><code class=\"python\">void draw_border(IplImage* show_img, CvPoint pt1, CvPoint pt2, CvScalar color, int thickness, int r, int d):\n\n        // Top left\n        cvLine(show_img, cvPoint( pt1.x +r, pt1.y), cvPoint( pt1.x + r + d, pt1.y), color, thickness, 8, 0 );\n        cvLine(show_img, cvPoint( pt1.x, pt1.y + r), cvPoint( pt1.x, pt1.y + r + d), color, thickness, 8, 0 );\n        cvEllipse(show_img, cvPoint(pt1.x +r, pt1.y + r), cvSize( r, r ), 180, 0, 90, color, thickness, 8, 0);\n\n        // Top right\n            cvLine(show_img, cvPoint( pt2.x - r, pt1.y), cvPoint( pt2.x - r - d, pt1.y), color, thickness,  8, 0 );\n            cvLine(show_img, cvPoint( pt2.x, pt1.y + r), cvPoint( pt2.x, pt1.y + r + d), color, thickness,  8, 0 );\n        cvEllipse(show_img, cvPoint(pt2.x -r, pt1.y + r), cvSize( r, r ), 270, 0, 90, color, thickness, 8, 0);\n\n\n            // Bottom left\n            cvLine(show_img, cvPoint( pt1.x + r, pt2.y), cvPoint( pt1.x + r + d, pt2.y), color, thickness,  8, 0);\n            cvLine(show_img, cvPoint( pt1.x, pt2.y - r), cvPoint( pt1.x, pt2.y - r - d), color, thickness,  8, 0);\n        cvEllipse(show_img, cvPoint(pt1.x  + r, pt2.y - r), cvSize( r, r ), 90, 0, 90, color, thickness, 8, 0);\n\n            // Bottom right\n            cvLine(show_img, cvPoint( pt2.x - r, pt2.y), cvPoint( pt2.x - r - d, pt2.y), color, thickness, 8, 0);\n            cvLine(show_img, cvPoint( pt2.x, pt2.y - r), cvPoint( pt2.x, pt2.y - r - d), color, thickness, 8, 0);\n        cvEllipse(show_img, cvPoint(pt2.x  - r, pt2.y - r), cvSize( r, r ), 0, 0, 90, color, thickness, 8, 0);\n</code></pre>\n", "abstract": "Also if someone needs: Fancy rectangle with curved corners in C:\nHowever I needed this code in python was replied by the community."}]}, {"link": "https://stackoverflow.com/questions/2171910/draw-hebrew-text-to-an-image-using-image-module-python", "question": {"id": "2171910", "title": "draw hebrew text to an image using Image module (python)", "content": "<p>I am trying to use Image module in order to make bitmaps with hebrew lettering in it. \nwhen printing from the shell (idle) I managed to print hebrew, but when trying to draw text to a bitmap it draws some ascii lettering.</p>\n<p>this is the code:</p>\n<pre><code class=\"python\">import Image\n\nimport ImageDraw\n\na = \"\u05d0\u05e8\u05d9\u05d0\u05dc\" #or any other hebrew string\n\nim=Image.new('RGB',(200,200),(100,100,100)) #type file,size,Background color\n\nd=ImageDraw.Draw(im)\n\nd.text((0,0),a) #should draw the string\n\nim.show()\n</code></pre>\n<p>any help will be very appreciated.</p>\n", "abstract": "I am trying to use Image module in order to make bitmaps with hebrew lettering in it. \nwhen printing from the shell (idle) I managed to print hebrew, but when trying to draw text to a bitmap it draws some ascii lettering. this is the code: any help will be very appreciated."}, "answers": [{"id": 2172065, "score": 1, "vote": 0, "content": "<p>Try <code>a = u\"\u05d0\u05e8\u05d9\u05d0\u05dc\"</code>.</p>\n<p>Failing that, try <a href=\"http://cairographics.org/documentation/pycairo/\" rel=\"nofollow noreferrer\">PyCairo</a>. It has advanced typography handling that may work better.</p>\n", "abstract": "Try a = u\"\u05d0\u05e8\u05d9\u05d0\u05dc\". Failing that, try PyCairo. It has advanced typography handling that may work better."}, {"id": 2172091, "score": 1, "vote": 0, "content": "<p><a href=\"http://blog.wensheng.com/2006/03/how-to-create-images-from-chinese-text.html\" rel=\"nofollow noreferrer\">This site</a> mentions that to draw Chinese text, they had to specify that the string was unicode, so you should do the same, e.g.</p>\n<pre><code class=\"python\">a = u\"\u05d0\u05e8\u05d9\u05d0\u05dc\" #like this\na = unicode(\"\u05d0\u05e8\u05d9\u05d0\u05dc\", \"UTF-8\") #or like this\n</code></pre>\n<p>They also specified a font. Is there an appropriate one for Hebrew? e.g.:</p>\n<pre><code class=\"python\">font = ImageFont.truetype('simsun.ttc',24)\n</code></pre>\n<p>and then specify that font when drawing text, e.g.:</p>\n<pre><code class=\"python\">d.text( (0,0), a, font=font)\n</code></pre>\n<p>I think your code is drawing an ascii string (and Hebrew is faaaaar away from ascii) in the wrong font.</p>\n", "abstract": "This site mentions that to draw Chinese text, they had to specify that the string was unicode, so you should do the same, e.g. They also specified a font. Is there an appropriate one for Hebrew? e.g.: and then specify that font when drawing text, e.g.: I think your code is drawing an ascii string (and Hebrew is faaaaar away from ascii) in the wrong font."}]}, {"link": "https://stackoverflow.com/questions/52971894/networkx-problem-with-drawing-nodes-with-nodelist", "question": {"id": "52971894", "title": "Networkx - Problem with drawing nodes with nodelist", "content": "<p>i have an nested tuple like this:</p>\n<pre><code class=\"python\">mostfrequent = (('16.37.97.17', '178.237.19.228', '55177', '443', '6', '1', '46'), ('16.37.97.17', '178.237.17.97', '44492', '443', '6', '1', '46'), ('16.37.97.29', '178.237.17.61', '56326', '443', '6', '1', '46'), ('16.37.97.222', '104.131.44.62', '60179', '80', '6', '2', '620'), ('16.37.93.196', '16.37.157.74', '2049', '691', '6', '1', '100'))\n</code></pre>\n<p>I want to draw every element of every subtuple with networkx declared via nodelist:</p>\n<pre><code class=\"python\">nx.draw_networkx_nodes(G, pos, nodelist=flattened_list_nodes, node_size=1600, node_color='blue', alpha=0.6)\n</code></pre>\n<p>For that i flattened the tuple A to a list (with every element only occuring once):</p>\n<pre><code class=\"python\">flattened_list_nodes = ['16.37.97.17', '178.237.19.228', '55177', '443', '6', '1', '46', '178.237.17.97', '44492', '16.37.97.29', '178.237.17.61', '56326', '16.37.97.222', '104.131.44.62', '60179', '80', '2', '620', '16.37.93.196', '16.37.157.74', '2049', '691', '100']\n</code></pre>\n<p>Although when i run it, i get the error:</p>\n<pre><code class=\"python\">raise nx.NetworkXError('Node %s has no position.' % e)\nnetworkx.exception.NetworkXError: Node '16.37.97.17' has no position.\n</code></pre>\n<p>How can i fix this?</p>\n<p>My complete code:</p>\n<pre><code class=\"python\">for x in xrange(5):\n    G.add_edge('sIP:\\n'+mostfrequent[x][0], countermfi[x])\n    G.add_edge('dIP:\\n'+mostfrequent[x][1], countermfi[x])\n    G.add_edge('sPort:\\n'+mostfrequent[x][2], countermfi[x])\n    G.add_edge('dPort:\\n'+mostfrequent[x][3], countermfi[x])\n    G.add_edge('Protocol:\\n'+mostfrequent[x][4], countermfi[x])\n    G.add_edge('Packets:\\n'+mostfrequent[x][5], countermfi[x])\n    G.add_edge('Bytes:\\n'+mostfrequent[x][6], countermfi[x])\n\n\npos = nx.kamada_kawai_layout(G)  # positions for all nodes\n\n#Hyperedges\nnx.draw_networkx_nodes(G, pos, nodelist=countermfi, node_size=node_size, node_color='red', node_shape='s', alpha=1)             \n\n#Nodes          \nnx.draw_networkx_nodes(G, pos, nodelist=flattened_list_nodes, node_size=1600, node_color='blue', alpha=0.6)             \n\n#Edges\nnx.draw_networkx_edges(G, pos, edgelist=G.edges(), width=2)\n\n#Labels\nnx.draw_networkx_labels(G, pos, font_size=11, font_family='sans-serif')\nplt.axis('off')\nplt.show()\n</code></pre>\n<p>Thank you in advance,\nGreetings :)</p>\n", "abstract": "i have an nested tuple like this: I want to draw every element of every subtuple with networkx declared via nodelist: For that i flattened the tuple A to a list (with every element only occuring once): Although when i run it, i get the error: How can i fix this? My complete code: Thank you in advance,\nGreetings :)"}, "answers": [{"id": 52977821, "score": 1, "vote": 0, "content": "<p>IIUC:</p>\n<p>First create graph, G:</p>\n<pre><code class=\"python\">G = nx.Graph()\n\nG.add_nodes_from(flattened_list_nodes)\n\npos = nx.kamada_kawai_layout(G)\n\nnx.draw_networkx_nodes(G, pos, nodelist=flattened_list_nodes, node_size=1600, node_color='blue', alpha=0.6)\n</code></pre>\n<p>Output:</p>\n<p><a href=\"https://i.stack.imgur.com/ELttr.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/ELttr.png\"/></a></p>\n", "abstract": "IIUC: First create graph, G: Output: "}]}, {"link": "https://stackoverflow.com/questions/28823243/python-opencv-mouse-callback-for-drawing-rectangle", "question": {"id": "28823243", "title": "Python OpenCV: mouse callback for drawing rectangle", "content": "<p>I want to save an image from the video stream and then draw a rectangle onto the shown image to produce a region of interest. Later, save that ROI in a file. I used opencv python grabcut example to use the setMouseCallback function. But I don't know what I'm doing incorrect as it is not giving the result I expect. I would like to see the green rectangle drawn on the static image shown in <code>mouse input</code> window and the roi being saved to file. Please help debug this code or show a better approach:</p>\n<pre><code class=\"python\">import cv2\n\nrect = (0,0,1,1)\nrectangle = False\nrect_over = False  \ndef onmouse(event,x,y,flags,params):\n    global sceneImg,rectangle,rect,ix,iy,rect_over\n\n    # Draw Rectangle\n    if event == cv2.EVENT_LBUTTONDOWN:\n        rectangle = True\n        ix,iy = x,y\n\n    elif event == cv2.EVENT_MOUSEMOVE:\n        if rectangle == True:\n            cv2.rectangle(sceneImg,(ix,iy),(x,y),(0,255,0),2)\n            rect = (min(ix,x),min(iy,y),abs(ix-x),abs(iy-y))\n\n    elif event == cv2.EVENT_LBUTTONUP:\n        rectangle = False\n        rect_over = True\n        cv2.rectangle(sceneImg,(ix,iy),(x,y),(0,255,0),2)\n        rect = (min(ix,x),min(iy,y),abs(ix-x),abs(iy-y))\n\n        x1,y1,w,h = rect        \n        roi = sceneImg[y1:y1+h, x1:x1+w]\n\n        cv2.imwrite('roi.jpg', roi)\n\n# Named window and mouse callback\ncv2.namedWindow('video')\ncv2.namedWindow('mouse input')\ncv2.setMouseCallback('mouse input',onmouse)\n\ncamObj = cv2.VideoCapture(-1)\nkeyPressed = None\nrunning = True\nscene = False\n# Start video stream\nwhile running:\n    readOK, frame = camObj.read()\n\n    keyPressed = cv2.waitKey(5)\n    if keyPressed == ord('s'):\n        scene = True\n\n        cv2.imwrite('sceneImg.jpg',frame)\n        sceneImg = cv2.imread('sceneImg.jpg')\n\n        cv2.destroyWindow('video')\n        cv2.imshow('mouse input', sceneImg)\n\n    elif keyPressed == ord('r'):\n        scene = False\n        cv2.destroyWindow('mouse input')\n\n    elif keyPressed == ord('q'):\n        running = False\n\n    if not scene:\n        cv2.imshow('video', frame)\n\ncv2.destroyAllWindows()\ncamObj.release()\n</code></pre>\n", "abstract": "I want to save an image from the video stream and then draw a rectangle onto the shown image to produce a region of interest. Later, save that ROI in a file. I used opencv python grabcut example to use the setMouseCallback function. But I don't know what I'm doing incorrect as it is not giving the result I expect. I would like to see the green rectangle drawn on the static image shown in mouse input window and the roi being saved to file. Please help debug this code or show a better approach:"}, "answers": [{"id": 43726946, "score": 1, "vote": 0, "content": "<p>You need to reset the image everytime when the {event == cv2.EVENT_MOUSEMOVE:} called.</p>\n<p>Your code should look something like this:</p>\n<pre><code class=\"python\">if event == cv2.EVENT_LBUTTONDOWN:\n    rectangle = True\n    ix,iy = x,y\n\nelif event == cv2.EVENT_MOUSEMOVE:\n    if rectangle == True:\n        sceneImg = sceneImg2.copy()\n        cv2.rectangle(sceneImg,(ix,iy),(x,y),(0,255,0),2)\n        rect = (min(ix,x),min(iy,y),abs(ix-x),abs(iy-y))\n\n\nelif event == cv2.EVENT_LBUTTONUP:\n    rectangle = False\n    rect_over = True\n\n    cv2.rectangle(sceneImg,(ix,iy),(x,y),(0,255,0),2)\n    rect = (min(ix,x),min(iy,y),abs(ix-x),abs(iy-y))\n</code></pre>\n", "abstract": "You need to reset the image everytime when the {event == cv2.EVENT_MOUSEMOVE:} called. Your code should look something like this:"}, {"id": 28833478, "score": 0, "vote": 0, "content": "<p>This is my current work around where I again render the <code>mouse input</code> window upon <code>EVENT_LBUTTONUP</code>. To avoid the bounding box showing up in the ROI saved to file I use a copy of the inputed scene:</p>\n<pre><code class=\"python\">import cv2\n\nrect = (0,0,1,1)\nrectangle = False\nrect_over = False  \ndef onmouse(event,x,y,flags,params):\n    global sceneImg,rectangle,rect,ix,iy,rect_over, roi\n\n    # Draw Rectangle\n    if event == cv2.EVENT_LBUTTONDOWN:\n        rectangle = True\n        ix,iy = x,y\n\n    elif event == cv2.EVENT_MOUSEMOVE:\n        if rectangle == True:\n#            cv2.rectangle(sceneCopy,(ix,iy),(x,y),(0,255,0),1)\n            rect = (min(ix,x),min(iy,y),abs(ix-x),abs(iy-y))\n\n    elif event == cv2.EVENT_LBUTTONUP:\n        rectangle = False\n        rect_over = True\n\n        sceneCopy = sceneImg.copy()\n        cv2.rectangle(sceneCopy,(ix,iy),(x,y),(0,255,0),1)\n\n        rect = (min(ix,x),min(iy,y),abs(ix-x),abs(iy-y))       \n        roi = sceneImg[rect[1]:rect[1]+rect[3], rect[0]:rect[0]+rect[2]]\n\n        cv2.imshow('mouse input', sceneCopy)\n        cv2.imwrite('roi.jpg', roi)\n\n# Named window and mouse callback\ncv2.namedWindow('mouse input')\ncv2.setMouseCallback('mouse input',onmouse)\ncv2.namedWindow('video')\n\ncamObj = cv2.VideoCapture(-1)\nkeyPressed = None\nrunning = True\nscene = False\n# Start video stream\nwhile running:\n    readOK, frame = camObj.read()\n\n    keyPressed = cv2.waitKey(5)\n    if keyPressed == ord('s'):\n        scene = True\n        cv2.destroyWindow('video')\n\n        cv2.imwrite('sceneImg.jpg',frame)\n        sceneImg = cv2.imread('sceneImg.jpg')\n\n        cv2.imshow('mouse input', sceneImg)\n\n    elif keyPressed == ord('r'):\n        scene = False\n        cv2.destroyWindow('mouse input')\n\n    elif keyPressed == ord('q'):\n        running = False\n\n    if not scene:\n        cv2.imshow('video', frame)\n\ncv2.destroyAllWindows()\ncamObj.release()\n</code></pre>\n<p>Thus, I can visualize the rectangle which is supposed to bound the ROI but I still don't know how to visualize the bounding box while the mouse left button is down and the mouse cursor is moving. That visualization works in the grabcut example but I couldn't figure it out in my case. Upon uncommenting the line for drawing rectangle during <code>EVENT_MOUSEMOVE</code> I get multiple rectangles drawn onto the image. If someone answers with a way to visualize a single rectangle as it is being created I can accept it. </p>\n", "abstract": "This is my current work around where I again render the mouse input window upon EVENT_LBUTTONUP. To avoid the bounding box showing up in the ROI saved to file I use a copy of the inputed scene: Thus, I can visualize the rectangle which is supposed to bound the ROI but I still don't know how to visualize the bounding box while the mouse left button is down and the mouse cursor is moving. That visualization works in the grabcut example but I couldn't figure it out in my case. Upon uncommenting the line for drawing rectangle during EVENT_MOUSEMOVE I get multiple rectangles drawn onto the image. If someone answers with a way to visualize a single rectangle as it is being created I can accept it. "}]}, {"link": "https://stackoverflow.com/questions/4783462/how-to-draw-grid-world-using-python", "question": {"id": "4783462", "title": "How to draw Grid World using Python", "content": "<p>I want to draw a Grid World (similar to a table), where cells may contain robots or obstacles. A dot/arrow would do to represent the robot and colouring the cells in black for examples could represent the obstacles. </p>\n<p>I am not looking for anything complicated, just a simple python library that would help me do this. Any suggestions?</p>\n", "abstract": "I want to draw a Grid World (similar to a table), where cells may contain robots or obstacles. A dot/arrow would do to represent the robot and colouring the cells in black for examples could represent the obstacles.  I am not looking for anything complicated, just a simple python library that would help me do this. Any suggestions?"}, "answers": [{"id": 4784164, "score": 1, "vote": 0, "content": "<p>tkinter has a canvas widget that is pretty easy to work with. It has primitives for lines and filled polygons and circles and so on. And with the event loop its pretty easy to do simple animations.</p>\n", "abstract": "tkinter has a canvas widget that is pretty easy to work with. It has primitives for lines and filled polygons and circles and so on. And with the event loop its pretty easy to do simple animations."}]}, {"link": "https://stackoverflow.com/questions/34845231/positioning-networkx-nodes-by-shared-node-attributes", "question": {"id": "34845231", "title": "Positioning networkx nodes by shared node attributes", "content": "<p>Is it possible to position nodes in a networkx graph so that nodes sharing a certain (single) attribute are clustered near each other?</p>\n<p>For example, if the nodes represent people and each has an attribute 'age', how can I make it so that people of the same age are near each other when I draw the graph? Is this possible? </p>\n", "abstract": "Is it possible to position nodes in a networkx graph so that nodes sharing a certain (single) attribute are clustered near each other? For example, if the nodes represent people and each has an attribute 'age', how can I make it so that people of the same age are near each other when I draw the graph? Is this possible? "}, "answers": [{"id": 34860097, "score": 0, "vote": 0, "content": "<p>You can specify the x,y coordinates of each node.  So if you have some idea on how you want it to look it can be programmed.  You could try a spring layout but this isn't going to be hit or miss, it's going to be more misses.  The way to attempt it is by connecting the nodes of the same data to each other. (people of the same age have one or more edges between them)</p>\n<p>The only way I see this working well with large amounts of data is using a tool called <a href=\"https://gephi.org/users/download/\" rel=\"nofollow\">Gephi</a> to manipulate by hand based on node data etc... it's like a photoshop of network graphs.</p>\n", "abstract": "You can specify the x,y coordinates of each node.  So if you have some idea on how you want it to look it can be programmed.  You could try a spring layout but this isn't going to be hit or miss, it's going to be more misses.  The way to attempt it is by connecting the nodes of the same data to each other. (people of the same age have one or more edges between them) The only way I see this working well with large amounts of data is using a tool called Gephi to manipulate by hand based on node data etc... it's like a photoshop of network graphs."}, {"id": 34877924, "score": 0, "vote": 0, "content": "<p>I would suggest yet another approach. Create an extra attribute for your nodes that corresponds to a range of values of the attribute you want to use for the grouping. For example, if your attribute is age, then create ranges <code>18-30</code>, <code>31-40</code>, etc. Save the result in GraphML format and load the network with <a href=\"https://nodexl.codeplex.com/\" rel=\"nofollow\">NodeXL</a> (<em>which is not free anymore but you could buy it for a small fee</em>)</p>\n<p>In NodeXL you can group the nodes by some attribute and it lays out the different groups so that nodes belonging to the same group are laid out close to each other. You can also choose how nodes in a group are laid out, from a list of layout options)</p>\n", "abstract": "I would suggest yet another approach. Create an extra attribute for your nodes that corresponds to a range of values of the attribute you want to use for the grouping. For example, if your attribute is age, then create ranges 18-30, 31-40, etc. Save the result in GraphML format and load the network with NodeXL (which is not free anymore but you could buy it for a small fee) In NodeXL you can group the nodes by some attribute and it lays out the different groups so that nodes belonging to the same group are laid out close to each other. You can also choose how nodes in a group are laid out, from a list of layout options)"}]}, {"link": "https://stackoverflow.com/questions/22609101/in-networkx-draw-the-graph-dividing-the-plot-area-in-3", "question": {"id": "22609101", "title": "in NetworkX draw the graph dividing the plot area in 3", "content": "<p>I have a graph in Networkx with different info inside. The graph nodes look like this:</p>\n<pre><code class=\"python\">G = nx.DiGraph()\nG.add_node(shape1, level=1)\nG.add_node(shape2, level=2)\nG.add_node(shape3, level=2)\nG.add_node(shape4, level=3)\n...\n</code></pre>\n<p>I want to draw the graph in order to have all the shapes at level 1 at the top of the plot, all the shapes in level 3 positioned in the lower part of the plot and all the shapes at level 2 in the middle. There are maximum 3 levels.</p>\n<p>I have been reading documentations from NetworkX, but till now I used only this random positioning of the nodes: </p>\n<p><code>pos = nx.spring_layout(G) \nnx.draw(G, pos)</code>. </p>\n<p>Do you know any smarter way to position the nodes of the graph as I want?</p>\n<p>P.S.: The desired output would be roughly like this:\n<img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/Il1rE.png\"/></p>\n<p>I don't need to draw also the lines for dividing the levels, I just put them to make it clear what I need. </p>\n", "abstract": "I have a graph in Networkx with different info inside. The graph nodes look like this: I want to draw the graph in order to have all the shapes at level 1 at the top of the plot, all the shapes in level 3 positioned in the lower part of the plot and all the shapes at level 2 in the middle. There are maximum 3 levels. I have been reading documentations from NetworkX, but till now I used only this random positioning of the nodes:  pos = nx.spring_layout(G) \nnx.draw(G, pos).  Do you know any smarter way to position the nodes of the graph as I want? P.S.: The desired output would be roughly like this:\n I don't need to draw also the lines for dividing the levels, I just put them to make it clear what I need. "}, "answers": [{"id": 22611598, "score": 5, "vote": 0, "content": "<p>The layout \"dot\" provided the interface to <a href=\"http://www.graphviz.org/\" rel=\"noreferrer\">graphviz</a> seems to do what you are looking for. While it works for this simple graph you've provided, you may need to tweak the output for larger more complicated graphs.</p>\n<pre><code class=\"python\">import networkx as nx\n\nG = nx.DiGraph()\nG.add_node(1,level=1)\nG.add_node(2,level=2)\nG.add_node(3,level=2)\nG.add_node(4,level=3)\n\nG.add_edge(1,2)\nG.add_edge(1,3)\nG.add_edge(2,4)\n\nimport pylab as plt\nnx.draw_graphviz(G, node_size=1600, cmap=plt.cm.Blues,\n                 node_color=range(len(G)),\n                 prog='dot')\nplt.show()\n</code></pre>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/f5GyM.png\"/></p>\n", "abstract": "The layout \"dot\" provided the interface to graphviz seems to do what you are looking for. While it works for this simple graph you've provided, you may need to tweak the output for larger more complicated graphs. "}, {"id": 70681019, "score": 0, "vote": 0, "content": "<p>Updated answer for NetworkX 2.6.2:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">pos = nx.nx_pydot.graphviz_layout(G, prog=\"dot\")\nnx.draw(G, pos=pos, with_labels=True, font_weight='bold')\nplt.show()\n</code></pre>\n<p>(make sure you have <code>pydot</code> installed)</p>\n", "abstract": "Updated answer for NetworkX 2.6.2: (make sure you have pydot installed)"}]}, {"link": "https://stackoverflow.com/questions/30222747/drawing-a-grid-in-python-with-colors-corresponding-to-different-values", "question": {"id": "30222747", "title": "Drawing a grid in Python, with colors corresponding to different values", "content": "<p>I'm attempting to draw a grid where for each value, a corresponding color is drawn. For instance:</p>\n<pre><code class=\"python\">[[1,1,1,1,1,1,1,1,1],    \n [1,0,0,0,0,0,0,0,1],    \n [1,0,0,0,2,2,0,0,1],    \n [1,0,0,0,2,2,0,0,1],    \n [1,1,1,1,1,1,1,1,1]]\n</code></pre>\n<p>would appear as a 9x5 grid with a blue border (for 1), filled with black (for 0), with a 2x2 block of red at the bottom (for 2).</p>\n<p>Apparently this can be done with <code>imshow</code> but I have no idea what the syntax would be.</p>\n<p>Thanks in advance for any help!</p>\n", "abstract": "I'm attempting to draw a grid where for each value, a corresponding color is drawn. For instance: would appear as a 9x5 grid with a blue border (for 1), filled with black (for 0), with a 2x2 block of red at the bottom (for 2). Apparently this can be done with imshow but I have no idea what the syntax would be. Thanks in advance for any help!"}, "answers": [{"id": 30229016, "score": 4, "vote": 0, "content": "<p>One solution with matplotlib and NumPy:</p>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/5GgX7.png\"/></p>\n<pre><code class=\"python\">import numpy as np\nimport matplotlib.pyplot as plt\n\n\ndef show_values(pc, fmt=\"%.2f\", **kw):\n    '''\n    Heatmap with text in each cell with matplotlib's pyplot\n    Source: http://stackoverflow.com/a/25074150/395857 \n    By HYRY\n    '''\n    from itertools import izip\n    pc.update_scalarmappable()\n    ax = pc.get_axes()\n    for p, color, value in izip(pc.get_paths(), pc.get_facecolors(), pc.get_array()):\n        x, y = p.vertices[:-2, :].mean(0)\n        if np.all(color[:3] &gt; 0.5):\n            color = (0.0, 0.0, 0.0)\n        else:\n            color = (1.0, 1.0, 1.0)\n        ax.text(x, y, fmt % value, ha=\"center\", va=\"center\", color=color, **kw)\n\ndef cm2inch(*tupl):\n    '''\n    Specify figure size in centimeter in matplotlib\n    Source: http://stackoverflow.com/a/22787457/395857\n    By gns-ank\n    '''\n    inch = 2.54\n    if type(tupl[0]) == tuple:\n        return tuple(i/inch for i in tupl[0])\n    else:\n        return tuple(i/inch for i in tupl)\n\ndef heatmap(AUC, title, xlabel, ylabel, xticklabels, yticklabels):\n    '''\n    Inspired by:\n    - http://stackoverflow.com/a/16124677/395857 \n    - http://stackoverflow.com/a/25074150/395857\n    '''\n\n    # Plot it out\n    fig, ax = plt.subplots()    \n    c = ax.pcolor(AUC, edgecolors='k', linestyle= 'dashed', linewidths=0.2, cmap='YlOrRd', vmin=0.0, vmax=2.0)\n\n    # put the major ticks at the middle of each cell\n    ax.set_yticks(np.arange(AUC.shape[0]) + 0.5, minor=False)\n    ax.set_xticks(np.arange(AUC.shape[1]) + 0.5, minor=False)\n\n    # set tick labels\n    #ax.set_xticklabels(np.arange(1,AUC.shape[1]+1), minor=False)\n    ax.set_xticklabels(xticklabels, minor=False)\n    ax.set_yticklabels(yticklabels, minor=False)\n\n    # set title and x/y labels\n    plt.title(title)\n    plt.xlabel(xlabel)\n    plt.ylabel(ylabel)      \n\n    # Remove last blank column\n    plt.xlim( (0, AUC.shape[1]) )\n\n    # Turn off all the ticks\n    ax = plt.gca()    \n    for t in ax.xaxis.get_major_ticks():\n        t.tick1On = False\n        t.tick2On = False\n    for t in ax.yaxis.get_major_ticks():\n        t.tick1On = False\n        t.tick2On = False\n\n    # Add color bar\n    plt.colorbar(c)\n\n    # Add text in each cell \n    show_values(c)\n\n    # resize \n    fig = plt.gcf()\n    fig.set_size_inches(cm2inch(40, 20))\n\n\n\ndef main():\n    data = np.array([[1,1,1,1,1,1,1,1,1],    \n                     [1,0,0,0,0,0,0,0,1],    \n                     [1,0,0,0,2,2,0,0,1],    \n                     [1,0,0,0,2,2,0,0,1],    \n                     [1,1,1,1,1,1,1,1,1]])\n    x_axis_size = data.shape[1]\n    y_axis_size = data.shape[0]\n    title = \"Title\"\n    xlabel= \"xlabel\"\n    ylabel=\"ylabel\"\n    xticklabels = range(1, x_axis_size+1) # could be text\n    yticklabels = range(1, y_axis_size+1) # could be text   \n    heatmap(data, title, xlabel, ylabel, xticklabels, yticklabels)\n    plt.savefig('image_output.png', dpi=300, format='png', bbox_inches='tight') # use format='svg' or 'pdf' for vectorial pictures\n    plt.show()\n\n\nif __name__ == \"__main__\":\n    main()\n    #cProfile.run('main()') # if you want to do some profiling\n</code></pre>\n", "abstract": "One solution with matplotlib and NumPy: "}]}, {"link": "https://stackoverflow.com/questions/28869050/error-for-pygame-draw-lines", "question": {"id": "28869050", "title": "Error for pygame.draw.lines()", "content": "<pre><code class=\"python\">pygame.draw.lines(Field2, BLACK, True, LON, width = 2)\n</code></pre>\n<p>When I put this code into my program it returns this error:</p>\n<pre><code class=\"python\"> pygame.draw.lines(Field2, BLACK, True, LON, width = 2)\n TypeError: lines() takes no keyword arguments\n</code></pre>\n<p>How can I fix this?</p>\n", "abstract": "When I put this code into my program it returns this error: How can I fix this?"}, "answers": [{"id": 28869072, "score": 3, "vote": 0, "content": "<p>You should give function <code>lines</code> a keyword argument (<code>width=2</code>).\nInvoke function <code>lines</code> like this: </p>\n<pre><code class=\"python\">pygame.draw.lines(Field2, BLACK, True, LON, 2)\n</code></pre>\n<p>Here is <a href=\"http://nullege.com/codes/search?cq=pygame.draw.lines\" rel=\"nofollow\"><strong>link</strong></a> for how to use this function.</p>\n", "abstract": "You should give function lines a keyword argument (width=2).\nInvoke function lines like this:  Here is link for how to use this function."}, {"id": 28869091, "score": 1, "vote": 0, "content": "<p>From the documentation:</p>\n<pre><code class=\"python\">lines(Surface, color, closed, pointlist, width=1)\n</code></pre>\n<p><code>width</code> has a default value of 1; these are not keyword arguments. Try this:</p>\n<pre><code class=\"python\">pygame.draw.lines(Field2, BLACK, True, LON, 2)\n</code></pre>\n", "abstract": "From the documentation: width has a default value of 1; these are not keyword arguments. Try this:"}]}, {"link": "https://stackoverflow.com/questions/20375062/draw-several-graphs-in-matplotlib-python", "question": {"id": "20375062", "title": "Draw several graphs in matplotlib, python", "content": "<p>I need to draw graphs in python matplotlib.</p>\n<p>For each graph I do some calculates before and then draw the graphe.\nHere is some of the code:</p>\n<pre><code class=\"python\">import matplotlib.pyplot as plt\n\ndef draw(LuxCoordinates, finalPix, verName):\n    plt.axes([0.2, 0.2, 0.7, 0.6]);\n    plt.xlim(0,3500); #Axis x\n    plt.ylim(0,100); #Axis y\n    plt.plot(LuxCoordinates, finalPix, 'g');\n    plt.scatter(LuxCoordinates, finalPix, linewidths=1)\n    plt.grid(axis)\n    plt.xlabel('X_Coordinates', color='r');\n    plt.ylabel('Y_Coordinates', color='r');\n    plt.title(verName, color='#afeeee');\n    savefig(verName+'.png');\n    plt.show();\n</code></pre>\n<p>My problem is that I call to this function twice or more, according to the number of graphs I have, I get the graphs in separate plots, but I want to draw all graphs on the same plot, in order to compare them.\nHow can I do it?\nThank you all!</p>\n", "abstract": "I need to draw graphs in python matplotlib. For each graph I do some calculates before and then draw the graphe.\nHere is some of the code: My problem is that I call to this function twice or more, according to the number of graphs I have, I get the graphs in separate plots, but I want to draw all graphs on the same plot, in order to compare them.\nHow can I do it?\nThank you all!"}, "answers": [{"id": 20375258, "score": 4, "vote": 0, "content": "<p>remove <code>plt.show()</code></p>\n<p>your function should get a <code>figure</code> or <code>axis</code> as an input parameter, and do the plotting on that figure, and then outside the function when you have done all the plotting you may call <code>plt.show()</code></p>\n<p>here is a minimal example:</p>\n<pre><code class=\"python\">import matplotlib.pyplot as plt\nimport numpy as np\n\ndef plotter ( ax, col ):\n    data = np.random.normal( size=(50, 2 ) )\n    x, y = data[:, 0], data[:, 1 ]\n    ax.scatter( x, y, color=col )\n\nfig = plt.figure()\nax = fig.add_axes([0.2, 0.2, 0.7, 0.6])\n\nplotter( ax, 'Blue' )\nplotter( ax, 'Red' )\nfig.show( )\n</code></pre>\n", "abstract": "remove plt.show() your function should get a figure or axis as an input parameter, and do the plotting on that figure, and then outside the function when you have done all the plotting you may call plt.show() here is a minimal example:"}]}, {"link": "https://stackoverflow.com/questions/62783146/networkx-draw-separate-nodes-to-left-and-right-side-graphviz-python", "question": {"id": "62783146", "title": "networkx draw separate nodes to left and right side - graphviz, python", "content": "<p>I use the following code to colour the nodes that start with \"n\" as gray and the nodes starting with \"m\" letter with red colour</p>\n<pre><code class=\"python\">color_map = []\n    for node in c:\n        strnode = str(node)\n        if strnode.startswith(\"m\"):\n            color_map.append('red')\n        else:\n            color_map.append('gray')\n\n    nx.draw(c, pos=nx.nx_agraph.graphviz_layout(c, prog='circo'),node_size=140,  scale= 2,  node_color=color_map,with_labels=True)\n</code></pre>\n<p>This works successfully as the picture shows below:</p>\n<p><a href=\"https://i.stack.imgur.com/Mwwfo.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/Mwwfo.png\"/></a></p>\n<p>However, I have tried to draw the graph as a bipartite graph, meaning all the Red nodes to be aligned on the left side and all the gray nodes on the left side with no success. Any ideas?</p>\n<p>*Fixed with @Mohammed Kashif answer, however the right side notes cannot displayed all:</p>\n<p><a href=\"https://i.stack.imgur.com/kUM0b.jpg\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/kUM0b.jpg\"/></a></p>\n", "abstract": "I use the following code to colour the nodes that start with \"n\" as gray and the nodes starting with \"m\" letter with red colour This works successfully as the picture shows below:  However, I have tried to draw the graph as a bipartite graph, meaning all the Red nodes to be aligned on the left side and all the gray nodes on the left side with no success. Any ideas? *Fixed with @Mohammed Kashif answer, however the right side notes cannot displayed all: "}, "answers": [{"id": 62784045, "score": 3, "vote": 0, "content": "<p>You can use <code>bipartite_layout</code> defined in NetworkX. You can read more about it <a href=\"https://networkx.github.io/documentation/stable/reference/generated/networkx.drawing.layout.bipartite_layout.html\" rel=\"nofollow noreferrer\">here</a>. You need to pass a list of nodes belonging to either of the sets of the bipartite layout.</p>\n<p>Below is the working example which uses the <code>bipartite_layout</code>. I took the liberty of defining the nodes of the Graph similar to yours.</p>\n<pre><code class=\"python\">import networkx as nx\n\n# Define the nodes of the Graph\nnodes_list = [\"m1\", \"n1\", \"m2\", \"n2\", \"m3\", \"n3\", \"m4\", \"n4\"]\n\n# Define the Graph and add the nodes/edges\nG = nx.DiGraph()\nG.add_nodes_from(nodes_list)\nG.add_edges_from([(\"m1\", \"n3\"), (\"m2\", \"n1\"), (\"n4\", \"m3\")])\n\n\ncolor_map = []\n\n# This will store the nodes belonging to one set of \n# the bipartite graph. In this case, the nodes which\n# start with \"m\"\none_side_nodes = []\n\nfor node in G:\n    strnode = str(node)\n    if strnode.startswith(\"m\"):\n        color_map.append('red')\n        # Add the node to the list\n        one_side_nodes.append(node)\n    else:\n        color_map.append('gray')\n\n# Now in the `pos` attribute pass in nx.bipartite_layout,\n# with the list of nodes belonging to one set of the bipartite\n# graph, i.e. one_side_nodes.\nnx.draw(G, pos=nx.bipartite_layout(G, one_side_nodes),node_size=140,\n        scale= 2, node_color=color_map, with_labels=True)\n</code></pre>\n<p>Here is the output:</p>\n<p><a href=\"https://i.stack.imgur.com/bf8SL.png\" rel=\"nofollow noreferrer\"><img alt=\"Bipartite Layout\" src=\"https://i.stack.imgur.com/bf8SL.png\"/></a></p>\n<p><strong>References:</strong></p>\n<ul>\n<li><a href=\"https://networkx.github.io/documentation/stable/reference/generated/networkx.drawing.layout.bipartite_layout.html\" rel=\"nofollow noreferrer\">NetworkX: Bipartite Layout</a></li>\n</ul>\n<p>You can also view the code on Google Colab Notebook <a href=\"https://colab.research.google.com/drive/1K2uGOOtbXTls6EbeVJTFgt_ocSXlvISZ?usp=sharing\" rel=\"nofollow noreferrer\">here</a>.</p>\n", "abstract": "You can use bipartite_layout defined in NetworkX. You can read more about it here. You need to pass a list of nodes belonging to either of the sets of the bipartite layout. Below is the working example which uses the bipartite_layout. I took the liberty of defining the nodes of the Graph similar to yours. Here is the output:  References: You can also view the code on Google Colab Notebook here."}]}, {"link": "https://stackoverflow.com/questions/50099960/draw-plot-only-inside-a-circle-with-matplotlib", "question": {"id": "50099960", "title": "Draw plot only inside a circle with matplotlib", "content": "<p>I have scattered data and I am interpolating it to gridded data. Afterwards I draw everything with the contourf function. In the end I just want to draw everything inside a defined circle. Everything else should be white, but I don\"t know how to achieve this. Is there a simple way to do this?</p>\n<p>Here is my code:</p>\n<pre><code class=\"python\">import numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.interpolate import griddata\n\n\ndef func(x, y):\n  return x*(1-x)*np.cos(4*np.pi*x) * np.sin(4*np.pi*y**2)**2\n\ngrid_x, grid_y = np.mgrid[0:1:100j, 0:1:200j]\n\npoints = np.random.rand(1000, 2)\nvalues = func(points[:,0], points[:,1])\n\n\ngrid_z0 = griddata(points, values, (grid_x, grid_y), method='nearest')\n\nplt.contourf(grid_x,grid_y,grid_z0)\n\nplt.savefig(\"plot_data_in_circle.png\")\n</code></pre>\n<p>Edit: I attach the plot which comes out from my code:\n<a href=\"https://i.stack.imgur.com/Lftwc.png\" rel=\"nofollow noreferrer\"><img alt=\"picture produced by the current code\" src=\"https://i.stack.imgur.com/Lftwc.png\"/></a></p>\n<p>And this is how it should look like:</p>\n<p><a href=\"https://i.stack.imgur.com/KaFJO.png\" rel=\"nofollow noreferrer\"><img alt=\".\" src=\"https://i.stack.imgur.com/KaFJO.png\"/></a></p>\n", "abstract": "I have scattered data and I am interpolating it to gridded data. Afterwards I draw everything with the contourf function. In the end I just want to draw everything inside a defined circle. Everything else should be white, but I don\"t know how to achieve this. Is there a simple way to do this? Here is my code: Edit: I attach the plot which comes out from my code:\n And this is how it should look like: "}, "answers": [{"id": 50101419, "score": 3, "vote": 0, "content": "<p>This can be done by creating a <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.patches.Circle.html\" rel=\"nofollow noreferrer\"><code>Circle</code></a> patch, and then setting that as the <code>clip_path</code>.</p>\n<p>To use a <code>clip_path</code>, one would usually store the artist on which you want to apply the clipping, and then use <code>.set_clip_path</code> on that. In this case, since you are using <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.contourf.html#matplotlib.pyplot.contourf\" rel=\"nofollow noreferrer\"><code>contourf</code></a>, there is no method <code>.set_clip_path</code>, so we have to iterate over the <a href=\"https://matplotlib.org/api/collections_api.html#matplotlib.collections.PathCollection\" rel=\"nofollow noreferrer\"><code>PathCollections</code></a> stored with the <a href=\"https://matplotlib.org/api/contour_api.html#matplotlib.contour.QuadContourSet\" rel=\"nofollow noreferrer\"><code>QuadContourSet</code></a> returned from <code>contourf</code>, and set the clip path on each of them using the <a href=\"https://matplotlib.org/api/collections_api.html#matplotlib.collections.PathCollection.set_clip_path\" rel=\"nofollow noreferrer\"><code>set_clip_path</code> method</a>. </p>\n<pre><code class=\"python\">import numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.interpolate import griddata\nimport matplotlib.patches as patches\n\ndef func(x, y):\n  return x*(1-x)*np.cos(4*np.pi*x) * np.sin(4*np.pi*y**2)**2\n\ngrid_x, grid_y = np.mgrid[0:1:100j, 0:1:200j]\n\npoints = np.random.rand(1000, 2)\nvalues = func(points[:,0], points[:,1])\n\n\ngrid_z0 = griddata(points, values, (grid_x, grid_y), method='nearest')\n\nfig, ax = plt.subplots()\ncs = ax.contourf(grid_x,grid_y,grid_z0)\n\ncirc = patches.Circle((0.6, 0.4), 0.3, transform=ax.transData)\nfor coll in cs.collections:\n    coll.set_clip_path(circ)\n\nplt.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/iFxhL.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/iFxhL.png\"/></a></p>\n", "abstract": "This can be done by creating a Circle patch, and then setting that as the clip_path. To use a clip_path, one would usually store the artist on which you want to apply the clipping, and then use .set_clip_path on that. In this case, since you are using contourf, there is no method .set_clip_path, so we have to iterate over the PathCollections stored with the QuadContourSet returned from contourf, and set the clip path on each of them using the set_clip_path method.  "}]}, {"link": "https://stackoverflow.com/questions/50091372/pygame-rectangle-doesnt-appear-unless-i-tab-out-and-back-in", "question": {"id": "50091372", "title": "Pygame Rectangle Doesn&#39;t Appear Unless I Tab-out and Back In", "content": "<p>I've got this code:</p>\n<pre><code class=\"python\">import pygame, sys\nfrom pygame.locals import *\n\npygame.init()\n\nWHITE = (255,255,255)\n\nclass setup():\n    def set_resolution(x, y):\n        global surf\n        global screen\n        surf = pygame.Surface((x,y))\n        screen = pygame.display.set_mode((x,y))\n        pygame.display.set_caption(\"Lewis' Game\")\n        pygame.draw.rect(screen, WHITE,(200,150,150,50))\n\n    def menu():\n        pass\n\nsetup.set_resolution(1024,768)\nsetup.menu()\n\nwhile True:\n    for event in pygame.event.get():\n        if event.type == QUIT:\n            sys.exit()\n</code></pre>\n<p>For some reason, the <code>pygame.draw.rect(screen, WHITE,(200,150,150,50))</code> at the end of the setup function doesn't actually appear unless I show the desktop and them tab back in. I'm not sure why this is happening as it's never happened before. I should mention that I'm still learning pygame, and this code is just for practice.</p>\n<p>Many thanks in advance.</p>\n", "abstract": "I've got this code: For some reason, the pygame.draw.rect(screen, WHITE,(200,150,150,50)) at the end of the setup function doesn't actually appear unless I show the desktop and them tab back in. I'm not sure why this is happening as it's never happened before. I should mention that I'm still learning pygame, and this code is just for practice. Many thanks in advance."}, "answers": [{"id": 50092195, "score": 3, "vote": 0, "content": "<p>change your <code>while</code> loop to include this:</p>\n<pre><code class=\"python\">while True:\n    for event in pygame.event.get():\n        if event.type == QUIT:\n            sys.exit()\n    pygame.display.flip()    # pygame.display.update works as well\n</code></pre>\n<p>if you want more on the difference of these, see <a href=\"https://stackoverflow.com/questions/29314987/difference-between-pygame-display-update-and-pygame-display-flip\">Difference between pygame.display.update and pygame.display.flip</a></p>\n", "abstract": "change your while loop to include this: if you want more on the difference of these, see Difference between pygame.display.update and pygame.display.flip"}]}, {"link": "https://stackoverflow.com/questions/46466014/python-how-to-draw-a-variable-again-if-it-is-the-same-as-another-variable", "question": {"id": "46466014", "title": "python how to draw a variable again if it is the same as another variable", "content": "<p>I have two lists, basically the same number :</p>\n<pre><code class=\"python\">import random\n\nA = [ 0, 10, 20, 30, 40 ] \nB = [ 0, 10, 20, 30, 40 ]\ndrawA =(random.choice(A))\ndrawB =(random.choice(B)) # want to exclude the number drawn in drawA\n</code></pre>\n<p>How can I ask python to draw again if <code>drawB == drawA</code>.</p>\n<p>Or else, how can I draw a number from list B excluding the number already drawn in list A ?</p>\n", "abstract": "I have two lists, basically the same number : How can I ask python to draw again if drawB == drawA. Or else, how can I draw a number from list B excluding the number already drawn in list A ?"}, "answers": [{"id": 46466060, "score": 1, "vote": 0, "content": "<p>Just exclude the value of drawA from B while finding the random number.</p>\n<pre><code class=\"python\">drawB = random.choice(filter(lambda num: num != drawA, B))\n</code></pre>\n<p>OR</p>\n<p>keep looping until you get the desired result.</p>\n<pre><code class=\"python\">import random\n\nA = [ 0, 10, 20, 30, 40 ] \nB = [ 0, 10, 20, 30, 40 ]\n\ndrawA = random.choice(A)\nnumber = random.choice(B)\nwhile number == drawA:\n    number = random.choice(B)\n\ndrawB = number\n</code></pre>\n", "abstract": "Just exclude the value of drawA from B while finding the random number. OR keep looping until you get the desired result."}, {"id": 46466132, "score": 1, "vote": 0, "content": "<p>Search in a modified array which does not have drawA element.</p>\n<pre><code class=\"python\">import random\n\nA = [ 0, 10, 20, 30, 40 ] \nB = [ 0, 10, 20, 30, 40 ]\ndrawA =(random.choice(A))\ndrawB =(random.choice([x for x in B if x != drawA]))\n</code></pre>\n", "abstract": "Search in a modified array which does not have drawA element."}, {"id": 46466329, "score": 1, "vote": 0, "content": "<p>At first we can create a generator for random numbers for B:</p>\n<pre><code class=\"python\">def gen_B():\n    while True:\n         yield random.choice(B)\n</code></pre>\n<p>And then select the first one that isn't the value used for A:</p>\n<pre><code class=\"python\">drawB = next(x for x in gen_B() if x != drawA)\n</code></pre>\n<p>Alternatively, you can use:</p>\n<pre><code class=\"python\">import itertools\nnext(x for x in (random.choice(B) for _ in itertools.count()) if x != drawA)\n</code></pre>\n", "abstract": "At first we can create a generator for random numbers for B: And then select the first one that isn't the value used for A: Alternatively, you can use:"}]}, {"link": "https://stackoverflow.com/questions/72979007/how-to-save-rdkit-drawmorganbit-output-as-image", "question": {"id": "72979007", "title": "How to save rdkit DrawMorganBit output as image?", "content": "<p>code:</p>\n<pre><code class=\"python\">import numpy as np\nfrom rdkit import Chem\nfrom rdkit.Chem import Draw, AllChem, PandasTools, DataStructs\n\nmol = Chem.MolFromSmiles('O=C1N([C@@H](C)C2CC2)CC3=CC(C4=C(C)N=C(NC(C)=O)S4)=CC(S(=O)(C)=O)=C31')\nbi = {}\nfp = AllChem.GetMorganFingerprintAsBitVect(mol, radius=3, bitInfo=bi)\n\nfp_arr = np.zeros(1,)\nDataStructs.ConvertToNumpyArray(fp, fp_arr)\nfp_arr = np.nonzero(fp_arr)[0]\n\nfor ar in fp_arr:\n    img = Draw.DrawMorganBit(mol, ar, bi, useSVG=True)\n    img.save(\"submol.png\")\n</code></pre>\n<p>I want to create an image using DrawMorganBit to know how Molecule's fingerprint bit was generated. (Using PyCharm instead of Jupyter Notebook)\nHowever, two problems have arisen: the kekulize problem and the image storage problem.\nI dont know what's causing the kekulize problem and how to save DrawMorganBit image</p>\n<p>rdkit version 2022.3.4</p>\n<p><strong>Error</strong></p>\n<p>kekulize problem:</p>\n<pre><code class=\"python\">rdkit.Chem.rdchem.KekulizeException: Can't kekulize mol.  Unkekulized atoms: 5 6 8 9 14\n</code></pre>\n<p>save problem:</p>\n<pre><code class=\"python\">AttributeError: 'str' object has no attribute 'save'\n</code></pre>\n", "abstract": "code: I want to create an image using DrawMorganBit to know how Molecule's fingerprint bit was generated. (Using PyCharm instead of Jupyter Notebook)\nHowever, two problems have arisen: the kekulize problem and the image storage problem.\nI dont know what's causing the kekulize problem and how to save DrawMorganBit image rdkit version 2022.3.4 Error kekulize problem: save problem:"}, "answers": [{"id": 72997558, "score": 2, "vote": 0, "content": "<p>The solution for the problem with kekulizing can be found here:\n<a href=\"https://github.com/rdkit/rdkit/issues/5129\" rel=\"nofollow noreferrer\">https://github.com/rdkit/rdkit/issues/5129</a></p>\n<p>Your problem with saving the image is that you are trying to save an SVG as a png.</p>\n<p>With this code you should get an image with all MorganBits.</p>\n<pre><code class=\"python\">from rdkit import Chem\nfrom rdkit.Chem import rdMolDescriptors, Draw\ndrawOptions = Draw.rdMolDraw2D.MolDrawOptions()\ndrawOptions.prepareMolsBeforeDrawing = False\nfrom rdkit.Chem.Draw import IPythonConsole\n\nmol = Chem.MolFromSmiles('O=C1N([C@@H](C)C2CC2)CC3=CC(C4=C(C)N=C(NC(C)=O)S4)=CC(S(=O)(C)=O)=C31')\n\nbi = {}\nfp = rdMolDescriptors.GetMorganFingerprintAsBitVect(mol, radius=2, bitInfo=bi)\n\ntpls = [(mol, x, bi) for x in fp.GetOnBits()]\n\np = Draw.DrawMorganBits(tpls, molsPerRow=5, legends=[str(x) for x in fp.GetOnBits()], drawOptions=drawOptions)\np.save('submol.png')\n</code></pre>\n", "abstract": "The solution for the problem with kekulizing can be found here:\nhttps://github.com/rdkit/rdkit/issues/5129 Your problem with saving the image is that you are trying to save an SVG as a png. With this code you should get an image with all MorganBits."}]}, {"link": "https://stackoverflow.com/questions/65890797/why-did-drawing-a-pygame-rectangle-with-very-thick-borders-draw-a-plus-shape-ins", "question": {"id": "65890797", "title": "Why did drawing a PyGame rectangle with very thick borders draw a plus shape instead?", "content": "<p>So I drew a rectangle today:</p>\n<pre><code class=\"python\">my_rectangle = pygame.Rect(100, 100, 5, 5)\npygame.draw.rect(display, colour[\"black\"], my_rectangle, 100)\n</code></pre>\n<p>Instead of drawing a thin bordered rectangle it draw a really big cross/plus sign.</p>\n<p><a href=\"https://i.stack.imgur.com/1MUTg.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/1MUTg.png\"/></a></p>\n<p>This happened because i typed \"100\" instead of \"1\" for the border thickness when drawing the rect onto the screen.<br/>\nBut whats the logic behind this?<br/>\nthe border thickness grew so large that....?<br/>\nanyone want to explain what you think or know has occurred?</p>\n", "abstract": "So I drew a rectangle today: Instead of drawing a thin bordered rectangle it draw a really big cross/plus sign.  This happened because i typed \"100\" instead of \"1\" for the border thickness when drawing the rect onto the screen.\nBut whats the logic behind this?\nthe border thickness grew so large that....?\nanyone want to explain what you think or know has occurred?"}, "answers": [{"id": 65890887, "score": 2, "vote": 0, "content": "<p>See <a href=\"https://www.pygame.org/docs/ref/draw.html#pygame.draw.rect\" rel=\"nofollow noreferrer\"><code>pygame.draw.rect()</code></a>:</p>\n<blockquote>\n<p><code>rect(surface, color, rect, width=0) -&gt; Rect</code></p>\n<p>width (int) --\n(optional) used for line thickness or to indicate that the rectangle is to be filled (not to be confused with the width value of the rect parameter)</p>\n<ul>\n<li>if width &gt; 0, used for line thickness</li>\n</ul>\n<p>Note When using width values &gt; 1, <strong>the edge lines will grow outside the original boundary of the rect</strong>.</p>\n</blockquote>\n<p>Therefore you are actually drawing 4 lines 5 in length but 100 in thickness along the edges of the rectangle. Since the lines are arranged in a square and are thicker than they are long, the final shape appears to be a cross.</p>\n", "abstract": "See pygame.draw.rect(): rect(surface, color, rect, width=0) -> Rect width (int) --\n(optional) used for line thickness or to indicate that the rectangle is to be filled (not to be confused with the width value of the rect parameter) Note When using width values > 1, the edge lines will grow outside the original boundary of the rect. Therefore you are actually drawing 4 lines 5 in length but 100 in thickness along the edges of the rectangle. Since the lines are arranged in a square and are thicker than they are long, the final shape appears to be a cross."}]}, {"link": "https://stackoverflow.com/questions/64858957/the-draw-function-in-my-quiz-game-is-not-working-properly", "question": {"id": "64858957", "title": "The draw() function in my quiz game is not working properly", "content": "<p>Ok, so I'm making a quiz game using python. I have it so that when your mouse hovers over one of the options, it changes color. However, there are two problems that are occurring when I try to do it.</p>\n<ol>\n<li>Only answer_box4 actually somewhat changes the color when I hover over it.</li>\n<li>When I hover my mouse over answer_box4, it changes the color of all the boxes.</li>\n</ol>\n<p>Here is the code:</p>\n<pre><code class=\"python\">     try:\n        logname = 'c:/temp/pgzrun.log'\n        fontname = 'arial.ttf'\n    \n        import faulthandler\n        faulthandler.enable()\n        \n        import os, sys\n        \n        script_dir = getattr(sys, '_MEIPASS', os.path.dirname(os.path.abspath(__file__)))\n        os.chdir(script_dir)\n        \n        import pgzrun\n        import playsound \n        \n        import random \n        from random import randint\n    \n        WIDTH = 1280\n        HEIGHT = 720\n    \n        def draw():\n            screen.fill(\"purple\")\n            screen.draw.filled_rect(main_box, \"sky blue\")\n            screen.draw.filled_rect(timer_box, \"sky blue\")\n            screen.draw.text(\"Score: \" + str(score), color=\"black\", topleft=(10, 10), fontname=fontname)\n    \n            for boxc in answer_boxes:\n                screen.draw.filled_rect(box, color)\n    \n            screen.draw.textbox(str(time_left), timer_box, color=('black'), fontname=fontname)\n            screen.draw.textbox(question[0], main_box, color=('black'), fontname=fontname)\n    \n            index = 1\n            for box in answer_boxes:\n                screen.draw.textbox(question[index], box, color=('black'), fontname=fontname)\n                index = index + 1\n    \n        def game_over():\n            global question, time_left, scoredecreaserps\n            scoredecreaserps = 0\n            message = 'Game Over. You got %s questions correct' %str(numques)\n            question = [message, '-', '-', '-', '-', 5]\n            time_left = 0\n    \n        def correct_answer():\n            global question, score, numques, time_left\n    \n            numques = numques + 1\n            score = score + 1000\n    \n            if questions:\n                question = questions.pop()\n                time_left = 10\n            else:\n                print('End of questions')\n                game_over()\n    \n        def on_mouse_down(pos):\n            index = 1\n    \n            for box in answer_boxes:\n    \n                if box.collidepoint(pos):\n                    print('Clicked on answer' + str(index))\n    \n                    if index == question[5]:\n                        print('You got it correct!')\n                        correct_answer()\n                    else:\n                        game_over()\n    \n                index = index + 1\n    \n        def update_time_left():\n            global time_left\n    \n            if time_left:\n                time_left = time_left - 1\n            else:\n                game_over()\n    \n        def score_lower():\n            global score\n    \n            if score:\n                score = score - scoredecreaserps\n        def on_mouse_move(pos):\n            global color \n            for box in answer_boxes:\n    \n                if box.collidepoint(pos):\n                    color = \"medium blue\"\n                    print(color)\n    \n                else:\n                    color = \"green yellow\"\n                    print(color)\n        \n    \n        main_box = Rect(50, 40, 820, 240)\n        timer_box = Rect(990, 40, 240, 240)\n    \n        answer_box1 = Rect(50, 358, 495, 165)\n        answer_box2 = Rect(735, 358, 495, 165)\n        answer_box3 = Rect(50, 538, 495, 165)\n        answer_box4 = Rect(735, 538, 495, 165)\n    \n        answer_boxes = [answer_box1, answer_box2, answer_box3, answer_box4]\n    \n        scoredecreaserps = 80\n        color = \"green yellow\"\n        numques = 0\n        score = 0\n        time_left = 10\n    \n        q1 = [\"Who was the third president of the Philippines?\",\n              'Rodrigo Duterte', 'Ramon Magsaysay', 'Jose P. Laurel',\n              'Fidel V. Ramos', 3]\n    \n        q2 = ['When was the Philippines granted independece from the US?'\n              , '1977', '1946', '1935', '1907', 2]\n    \n        q3 = ['When was the Philippines colonized by Spain', '1898', '1523', '1654',\n              '1521', 4]\n    \n        questions = [q1, q2, q3]\n    \n        random.shuffle(questions)\n    \n        question = questions.pop(0)\n        clock.schedule_interval(update_time_left, 1.0)\n        clock.schedule_interval(score_lower, 1.0)\n    \n        pgzrun.go()\n\nexcept:\n        import traceback\n        with open(logname, 'a', encoding = 'utf-8') as f:\n            f.write(''.join(traceback.format_exc()) + '\\n')\n            \n\n        \n</code></pre>\n<p>**</p>\n", "abstract": "Ok, so I'm making a quiz game using python. I have it so that when your mouse hovers over one of the options, it changes color. However, there are two problems that are occurring when I try to do it. Here is the code: **"}, "answers": [{"id": 64859388, "score": 2, "vote": 0, "content": "<p>Each time the mouse goes over the boxes, you iterate all the boxes</p>\n<pre><code class=\"python\">def on_mouse_move(pos):\n            global color \n            for box in answer_boxes:\n    \n                if box.collidepoint(pos):\n                    color = \"medium blue\"\n                    print(color)\n    \n                else:\n                    color = \"green yellow\"\n                    print(color)\n</code></pre>\n<p>The last box being box4 <code>answer_boxes = [answer_box1, answer_box2, answer_box3, answer_box4]</code>. In the end, if you hover box1, you'll change its color to blue, then move to box2 in the loop, going in the \"else\" block and changing the color of box1 to green.</p>\n<p>Why? I suspect is the declaration of <code>global color</code>: each box refers to the same color. This is consistent with the fact that box4 is different and when clicked changes color to all of them: being the last in the for loop, once is hovered overrides the color to the desired one, and if clicked updates the color for all boxes.</p>\n<p>You should implement each box as an object having its own color, then change the color for the specific box.</p>\n", "abstract": "Each time the mouse goes over the boxes, you iterate all the boxes The last box being box4 answer_boxes = [answer_box1, answer_box2, answer_box3, answer_box4]. In the end, if you hover box1, you'll change its color to blue, then move to box2 in the loop, going in the \"else\" block and changing the color of box1 to green. Why? I suspect is the declaration of global color: each box refers to the same color. This is consistent with the fact that box4 is different and when clicked changes color to all of them: being the last in the for loop, once is hovered overrides the color to the desired one, and if clicked updates the color for all boxes. You should implement each box as an object having its own color, then change the color for the specific box."}]}, {"link": "https://stackoverflow.com/questions/50106246/how-would-you-get-turtle-to-overlap-certain-areas-of-squares", "question": {"id": "50106246", "title": "How would you get turtle to overlap certain areas of squares?", "content": "<p>So I had to get familiar with turtle for a project with school. I got basically everything my professor asked besides for overlapping the squares. <a href=\"https://i.stack.imgur.com/YJhY7.png\" rel=\"nofollow noreferrer\"><img alt=\"My squares\" src=\"https://i.stack.imgur.com/YJhY7.png\"/></a></p>\n<p>However he would like the squares to overlap like this</p>\n<p><a href=\"https://i.stack.imgur.com/0H1id.png\" rel=\"nofollow noreferrer\"><img alt=\"Profsquares\" src=\"https://i.stack.imgur.com/0H1id.png\"/></a></p>\n<p>I haven't been able to replicate this at all. I am wondering if their is something I need to throw into my code to easily solve it.</p>\n<p>Here is my code</p>\n<pre><code class=\"python\">import turtle #Imports the 'turtle module' which allows intricate shapes and pictures to be drawn\nmy_turtle_pos = (10 , 10)\ndef square(my_turtle,x,y,length) : #I set up a function that helps me determine the square\n\n    my_turtle.penup() #Picks 'up' the turtle pen\n    my_turtle.setposition(x-length/2,y-length/2) #Helps set positon\n    my_turtle.pendown() #Puts 'down' the turtle pen\n    my_turtle.color('black','red') #Allows black outline, with red filling\n    my_turtle.begin_fill() #Starts the filling of red and helps remember the starting point for a filled area\n    my_turtle.forward(length) #Moves the turtle by the specified amount 'length'\n    my_turtle.left(90) #Moves the turtle by given amount '90'\n    my_turtle.forward(length)\n    my_turtle.left(90)\n    my_turtle.forward(length)\n    my_turtle.left(90)\n    my_turtle.forward(length)\n    my_turtle.left(90)\n    my_turtle.end_fill() #Stops filling with red, which will close with the current color\n\ndef graphic_pattern(my_turtle,x,y,length,times): #recursive function\n    if times &lt;= 0:  #This just tells us how many 'times' it needs to repeat till given amount\n        return\n    newSize = length/2.2 #This will grab the new size\n    graphic_pattern(my_turtle,x-length/2,y-length/2,newSize,times-1) #Functions to help with writing 'smaller' squares\n    graphic_pattern(my_turtle,x-length/2,y+length/2,newSize,times-1)\n    graphic_pattern(my_turtle,x+length/2,y-length/2,newSize,times-1)\n    graphic_pattern(my_turtle,x+length/2,y+length/2,newSize,times-1)\n    square(my_turtle,x,y,length)\n\n\nmy_turtle = turtle.Turtle(shape=\"arrow\") #You can use differen't shapes for the turtle, I chose arrow, though the turtle was cool :)\nmy_turtle.speed(100) #I am not sure how fast the turtle can go, I just chose 100 cause it went by quicker.\n\ngraphic_pattern(my_turtle,3,0,300,4) #Example pattern stated from homework assignment.\n</code></pre>\n<p>I think it's something to do with where the pen draws the squares first. Thanks for any input!</p>\n", "abstract": "So I had to get familiar with turtle for a project with school. I got basically everything my professor asked besides for overlapping the squares.  However he would like the squares to overlap like this  I haven't been able to replicate this at all. I am wondering if their is something I need to throw into my code to easily solve it. Here is my code I think it's something to do with where the pen draws the squares first. Thanks for any input!"}, "answers": [{"id": 50106357, "score": 1, "vote": 0, "content": "<p>Sounds like it's a simple sequencing of your <code>graphic_pattern()</code> and <code>square()</code> methods. It seems you would want to draw the top right <code>graphic_pattern()</code> first, followed by the middle square, and then followed by the rest of the <code>graphic_pattern()</code> calls:</p>\n<pre><code class=\"python\">import turtle #Imports the 'turtle module' which allows intricate shapes and pictures to be drawn\nmy_turtle_pos = (10 , 10)\ndef square(my_turtle,x,y,length) : #I set up a function that helps me determine the square\n\n    my_turtle.penup() #Picks 'up' the turtle pen\n    my_turtle.setposition(x-length/2,y-length/2) #Helps set positon\n    my_turtle.pendown() #Puts 'down' the turtle pen\n    my_turtle.color('black','red') #Allows black outline, with red filling\n    my_turtle.begin_fill() #Starts the filling of red and helps remember the starting point for a filled area\n    my_turtle.forward(length) #Moves the turtle by the specified amount 'length'\n    my_turtle.left(90) #Moves the turtle by given amount '90'\n    my_turtle.forward(length)\n    my_turtle.left(90)\n    my_turtle.forward(length)\n    my_turtle.left(90)\n    my_turtle.forward(length)\n    my_turtle.left(90)\n    my_turtle.end_fill() #Stops filling with red, which will close with the current color\n\ndef graphic_pattern(my_turtle,x,y,length,times): #recursive function\n    if times &lt;= 0:  #This just tells us how many 'times' it needs to repeat till given amount\n        return\n    newSize = length/2.2 #This will grab the new size\n\n    graphic_pattern(my_turtle,x+length/2,y+length/2,newSize,times-1)\n    square(my_turtle,x,y,length)\n    graphic_pattern(my_turtle,x-length/2,y-length/2,newSize,times-1)\n    graphic_pattern(my_turtle,x-length/2,y+length/2,newSize,times-1)\n    graphic_pattern(my_turtle,x+length/2,y-length/2,newSize,times-1)\n\n\nmy_turtle = turtle.Turtle(shape=\"arrow\") #You can use differen't shapes for the turtle, I chose arrow, though the turtle was cool :)\nmy_turtle.speed(100) #I am not sure how fast the turtle can go, I just chose 100 cause it went by quicker.\n\ngraphic_pattern(my_turtle,3,0,300,4) #Example pattern stated from homework assignment.\n</code></pre>\n", "abstract": "Sounds like it's a simple sequencing of your graphic_pattern() and square() methods. It seems you would want to draw the top right graphic_pattern() first, followed by the middle square, and then followed by the rest of the graphic_pattern() calls:"}, {"id": 50106362, "score": 1, "vote": 0, "content": "<p>You have to change the visit order of your recursive calls.</p>\n<p>Now the order is post-order (visit all children, then visit the node).</p>\n<p>With this particular order (visit upper right child, visit the node, visit the remaining children):</p>\n<pre><code class=\"python\">def graphic_pattern(my_turtle,x,y,length,times): #recursive function\n    if times &lt;= 0:  #This just tells us how many 'times' it needs to repeat till given amount\n        return\n    newSize = length/2.2 #This will grab the new size\n    graphic_pattern(my_turtle,x+length/2,y+length/2,newSize,times-1)\n    square(my_turtle,x,y,length)\n    graphic_pattern(my_turtle,x-length/2,y-length/2,newSize,times-1) #Functions to help with writing 'smaller' squares\n    graphic_pattern(my_turtle,x-length/2,y+length/2,newSize,times-1)\n    graphic_pattern(my_turtle,x+length/2,y-length/2,newSize,times-1)\n</code></pre>\n<p>you can obtain the desired pattern.</p>\n", "abstract": "You have to change the visit order of your recursive calls. Now the order is post-order (visit all children, then visit the node). With this particular order (visit upper right child, visit the node, visit the remaining children): you can obtain the desired pattern."}]}, {"link": "https://stackoverflow.com/questions/26701640/drawing-nodes-of-multigraph-in-fixed-position", "question": {"id": "26701640", "title": "Drawing nodes of multigraph in fixed position", "content": "<p><strong>What i Have</strong> : a multigraph with four nodes and four edge. Each node has a position specified (the nodes form a squadre structure)<br/>\n<strong>What i want</strong>: drawing the multigraph with nodes posistions.<br/>\n<strong>PROBLEM</strong>: Positions are ignored in the final layout.<br/></p>\n<p>This is my code :</p>\n<pre><code class=\"python\">import networkx as nx\nimport pydot\nfrom my_lib import *\ngraph= nx.MultiGraph()\n\n#add 4 nodes in the vertexs of a square. X and Y are the coordinates\ngraph.add_node(1,x=10,y=10)\ngraph.add_node(2,x=10,y=20)\ngraph.add_node(3,x=20,y=10)\ngraph.add_node(4,x=20,y=20)\ngraph.add_edge(1,2)\ngraph.add_edge(2,3)\ngraph.add_edge(3,4)\ngraph.add_edge(4,1)\n\n#transform the multigraph in pydot for draw it\ngraphDot=nx.to_pydot(graph)\n\n#change some attribute for the draw, like shape of nodes and the position of nodes \nfor node in graphDot.get_nodes():\n\n    node.set_shape('circle')\n    #getAttrDot is a function that returns the value of attribute passed\n    pos_string='\\''+ get_attrDot(node,'x')+','+get_attrDot(node,'y')+'!\\''\n    print 'coordinate: ' + pos_string  #the pos_string printed is correct form: 'x,y!'\n    node.set('pos',pos_string)\n\ngraphDot.write_png('test_position.png')\n</code></pre>\n<p>Here the result of this code. <br/>\nThe image 'test_position.png' is :[1]: <a href=\"http://imgur.com/dDj3xFl\" rel=\"nofollow\">http://imgur.com/dDj3xFl</a></p>\n<p>As you can see, the node positions are ignored.</p>\n<p>Can you help me please?\nThanks!</p>\n<p><strong>EDIT SOLVED:</strong> The suggest of Aric solved my problem. THANKS!!!</p>\n", "abstract": "What i Have : a multigraph with four nodes and four edge. Each node has a position specified (the nodes form a squadre structure)\nWhat i want: drawing the multigraph with nodes posistions.\nPROBLEM: Positions are ignored in the final layout. This is my code : Here the result of this code. \nThe image 'test_position.png' is :[1]: http://imgur.com/dDj3xFl As you can see, the node positions are ignored. Can you help me please?\nThanks! EDIT SOLVED: The suggest of Aric solved my problem. THANKS!!!"}, "answers": [{"id": 26702116, "score": 2, "vote": 0, "content": "<p>You can set the attributes before you convert the graph to a Pydot object:</p>\n<pre><code class=\"python\">import networkx as nx                                                                                     \ngraph= nx.MultiGraph()                                                                                    \n\n#add 4 nodes in the vertexs of a square. X and Y are the coordinates                                      \ngraph.add_node(1,x=100,y=100)                                                                             \ngraph.add_node(2,x=100,y=200)                                                                             \ngraph.add_node(3,x=200,y=100)                                                                             \ngraph.add_node(4,x=200,y=200)                                                                             \ngraph.add_edge(1,2)                                                                                       \ngraph.add_edge(2,3)                                                                                       \ngraph.add_edge(3,4)                                                                                       \ngraph.add_edge(4,1)                                                                                       \n                                                                                                         # assign positions                                                                                        \nfor n in graph:                                                                                           \n    graph.node[n]['pos'] = '\"%d,%d\"'%(graph.node[n]['x'], graph.node[n]['y'])                             \np = nx.to_pydot(graph)                                                                                    \nprint p.to_string()                                                                                       \np.write('foo.dot')                                                                                        \n# run neato -n2 -Tpng foo.dot &gt;foo.png  \n</code></pre>\n<p>The output is:</p>\n<pre><code class=\"python\">graph G {\n1 [y=100, x=100, pos=\"100,100\"];\n2 [y=200, x=100, pos=\"100,200\"];\n3 [y=100, x=200, pos=\"200,100\"];\n4 [y=200, x=200, pos=\"200,200\"];\n1 -- 2  [key=0];\n1 -- 4  [key=0];\n2 -- 3  [key=0];\n3 -- 4  [key=0];\n}\n</code></pre>\n<p>Run \n<code>neato -n2 -Tpng foo.dot &gt;foo.png</code> \n(the -n2 keeps your node positions)</p>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/VpOIb.png\"/></p>\n", "abstract": "You can set the attributes before you convert the graph to a Pydot object: The output is: Run \nneato -n2 -Tpng foo.dot >foo.png \n(the -n2 keeps your node positions) "}]}, {"link": "https://stackoverflow.com/questions/19383988/force-instantaneous-matplotlib-figure-update", "question": {"id": "19383988", "title": "force instantaneous matplotlib figure update", "content": "<p>I have a scatter plot in matplotlib, with a <code>onpick()</code> action on them, as in the MWE below.</p>\n<p>Whenever a point is selected, I run a computation on that point, that takes about <code>30</code> seconds. I want to notify the user by drawing a red circle in the figure on the same point, as soon as the user clicks on it.</p>\n<p>The following MWE works, but it draws the red circle only after the <code>30</code> seconds:</p>\n<pre><code class=\"python\">from numpy import take\nfrom numpy.random import randn\nfrom time import sleep\nimport matplotlib.pylab as plt\n\nfig, ax = plt.subplots()\nX, Y = randn(2, 10)\nax.scatter(X, Y, picker=True)\ndef onpick(event):\n    ax.scatter(take(X, event.ind), take(Y, event.ind), s=40, facecolors='none', edgecolors='red')\n    fig.canvas.draw()\n    sleep(30)#here I have MyLongComputation() in my code\n\nfig.canvas.mpl_connect('pick_event', onpick)\nplt.show()\n</code></pre>\n<p>Is there a way to request a figure drawing action with immediate effect? In case it matters, I am invoking the file from Ipython in interactive mode.</p>\n<p>Notice that my call to <code>fig.canvas.draw()</code> is not ignored by matplotlib, but only postponed to when <code>onpick()</code> returns.</p>\n", "abstract": "I have a scatter plot in matplotlib, with a onpick() action on them, as in the MWE below. Whenever a point is selected, I run a computation on that point, that takes about 30 seconds. I want to notify the user by drawing a red circle in the figure on the same point, as soon as the user clicks on it. The following MWE works, but it draws the red circle only after the 30 seconds: Is there a way to request a figure drawing action with immediate effect? In case it matters, I am invoking the file from Ipython in interactive mode. Notice that my call to fig.canvas.draw() is not ignored by matplotlib, but only postponed to when onpick() returns."}, "answers": [{"id": 19384202, "score": 2, "vote": 0, "content": "<p>The hidden main loop only gets run between times to update the plot, you need to start your long computation in a way that lets the GUI carry on working, this can be:</p>\n<ul>\n<li>in a separate thread, (see python thread module), </li>\n<li>as an external process, (see the subprocess module),</li>\n<li>on other cores using <a href=\"http://docs.python.org/library/multiprocessing.html\" rel=\"nofollow\">multiprocessing</a>,</li>\n<li>as an external object, possibly on a remote server, using <a href=\"http://pythonhosted.org/Pyro4/index.html\" rel=\"nofollow\">pyro</a>, <a href=\"http://pythonhosted.org/mpi4py/usrman/index.html\" rel=\"nofollow\">mpi4py</a>, or <a href=\"http://celeryproject.org/\" rel=\"nofollow\">celery</a> in non blocking mode, note that the server can be on the same machine.</li>\n</ul>\n<p>then when it notifies it has finished display the results.  The good news is you can potentially queue the requests for the results so your user could click on several points, (each highlighted immediately), the go to lunch or possibly away for the weekend.</p>\n<p>Note that sleep blocks in python.</p>\n", "abstract": "The hidden main loop only gets run between times to update the plot, you need to start your long computation in a way that lets the GUI carry on working, this can be: then when it notifies it has finished display the results.  The good news is you can potentially queue the requests for the results so your user could click on several points, (each highlighted immediately), the go to lunch or possibly away for the weekend. Note that sleep blocks in python."}]}, {"link": "https://stackoverflow.com/questions/64344740/how-to-shrink-a-textbox-in-pygame-when-you-delete-text", "question": {"id": "64344740", "title": "how to shrink a textbox in pygame when you delete text?", "content": "<p>When the user enters or deletes text I want the rectangle to shrink and grow depending on how much text is entered. This process works just fine except for one small error. When you delete text an empty rectangle forms in place of the letter that was deleted. How do I fix this?</p>\n<pre><code class=\"python\">from pygame import *\n\ninit()\nscreen = display.set_mode((800, 600))\n\nname_font = font.Font(None, 32)\nname_text = ''\n\nclass Rectangle:\n\n    def __init__(self, x, y):\n        self.active = False\n        self.x = x\n        self.y = y\n        self.text_surface = name_font.render(name_text, True, (255, 255, 255))\n        self.rect_width = max(140, 10 + self.text_surface.get_width())\n        self.input_rect = Rect(x, y, self.rect_width, 32)\n        self.input_rect.w = self.text_surface.get_width() + 10\n        self.click_value = 10\n\n\n    def naming(self, events):\n        global rect_1\n        global name_text\n\n        for e in events:\n            if e.type == MOUSEBUTTONDOWN:\n                if self.input_rect.x + self.click_value &gt;= mx &gt;= self.input_rect.x - 10 and self.input_rect.y + 26 &gt;= my &gt;= self.input_rect.y - 10:\n                    self.active = True\n                else:\n                    self.active = False\n\n            if e.type == KEYDOWN:\n                if self.active:\n                    if e.key == K_BACKSPACE:\n                        name_text = name_text[:-1]\n                        screen.fill((0, 0, 0))\n                    else:\n                        name_text += e.unicode\n                        self.click_value += 7\n\n                    self.text_surface = name_font.render(name_text, True, (255, 255, 255))\n\n    def draw(self, screen):\n        draw.rect(screen, (0, 0, 0), self.input_rect, 0)\n        draw.rect(screen, (255, 255, 255), self.input_rect, 2)\n        self.input_rect.w = self.text_surface.get_width() + 10\n        screen.blit(self.text_surface, (self.input_rect.x + 5, self.input_rect.y + 5))\n\n\nrect_1 = Rectangle(200, 200)\n\nwhile True:\n    mx, my = mouse.get_pos()\n    events = event.get()\n    for e in events:\n        if e.type == QUIT:\n            quit()\n\n    rect_1.naming(events)\n    rect_1.draw(screen)\n    display.update()\n    time.delay(1)\n</code></pre>\n", "abstract": "When the user enters or deletes text I want the rectangle to shrink and grow depending on how much text is entered. This process works just fine except for one small error. When you delete text an empty rectangle forms in place of the letter that was deleted. How do I fix this?"}, "answers": [{"id": 64346790, "score": 1, "vote": 0, "content": "<p>You have to compute the width of the input rectangle before you draw it:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">class Rectangle:\n    # [...]\n\n    def draw(self, screen):\n        self.input_rect.w = self.text_surface.get_width() + 10\n        draw.rect(screen, (0, 0, 0), self.input_rect, 0)\n        draw.rect(screen, (255, 255, 255), self.input_rect, 2)\n        screen.blit(self.text_surface, (self.input_rect.x + 5, self.input_rect.y + 5))\n</code></pre>\n<p>However, the wrong order doesn't matter if you were to clear the screen every frame. The bug would hardly be noticeable as it would only be visible for a single frame. Clear the screen in every frame and not in case of <code>K_BACKSPACE</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">while True:\n    mx, my = mouse.get_pos()\n    events = event.get()\n    for e in events:\n        if e.type == QUIT:\n            quit()\n\n    rect_1.naming(events)\n\n    screen.fill((0, 0, 0)) # &lt;---\n    rect_1.draw(screen)\n    display.update()\n    time.delay(1)\n</code></pre>\n", "abstract": "You have to compute the width of the input rectangle before you draw it: However, the wrong order doesn't matter if you were to clear the screen every frame. The bug would hardly be noticeable as it would only be visible for a single frame. Clear the screen in every frame and not in case of K_BACKSPACE:"}]}, {"link": "https://stackoverflow.com/questions/60324790/how-can-i-have-multiple-drawings-on-the-screen-at-once-without-them-flashing", "question": {"id": "60324790", "title": "How can I have multiple drawings on the screen at once without them flashing?", "content": "<p>I am currently coding a simple computer game for a school coursework project and have encountered an issue in pygame. In my game, the player simply has to shoot at targets which fly through the air, almost a reverse space invaders. My current issue is that I can not have two shapes in the arena at once without one of them flickering and lagging. Below is my code, any help is welcomed. Cheers.</p>\n<p>Also, does anyone know how I can add delay between each drawing being drawn. As I insinuated above, I aim to have targets fairly space out without overlaps but I do want multiple on the screen at the same time. Cheers.</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">import pygame\n\n#Setting window dimensions and caption (Module 1)\n\npygame.init()\nwindow = pygame.display.set_mode((800, 575))\npygame.display.set_caption(\"TARGET PRACTICE\")\n\n#Colour variables (Module 1)\n\nBLACK = (0, 0, 0)\nWHITE = (255, 255, 255)\nRED = (200, 0, 0)\nGREEN = (0, 200, 0)\nBLUE = (0, 0, 200)\n\n#Target coordinates and dimensions (Module 3)\n\n#target_x = 0\n#target_y = 80\n#target_w = 60\n#target_h = 40\n#target_v = 1\n\nexec = True\n\nclass Target:\n  def __init__(self, x, y, h, w, v):\n    self.x = x\n    self.y = y\n    self.h = h\n    self.w = w\n    self.v = v\n\ntarget_1 = Target(0, 80, 60, 40, 0.1)\ntarget_2 = Target(0, 100, 60, 40, 0.1)\ntarget_3 = Target(0, 50, 60, 40, 1)\n\nclock = 0\n\nwhile exec:\n  pygame.time.delay(1)\n  for event in pygame.event.get():\n    if event.type == pygame.QUIT:\n      exec = False\n\n  #Target Movement (Module 4)\n\n  window.fill(RED)\n\n  #Background and target drawing (Module 2)\n\n  target_1.x += target_1.v\n  pygame.draw.rect(window, BLUE, (target_1.x, target_1.y, target_1.h, target_1.w))\n  clock += 1\n\n  if clock%2 == 0:\n    target_2.x += target_2.v\n    pygame.draw.rect(window, BLUE, (target_2.x, target_2.y, target_2.h, target_2.w))\n\n\n  pygame.display.update()\n\n\n\n\npygame.quit()```\n</code></pre>\n", "abstract": "I am currently coding a simple computer game for a school coursework project and have encountered an issue in pygame. In my game, the player simply has to shoot at targets which fly through the air, almost a reverse space invaders. My current issue is that I can not have two shapes in the arena at once without one of them flickering and lagging. Below is my code, any help is welcomed. Cheers. Also, does anyone know how I can add delay between each drawing being drawn. As I insinuated above, I aim to have targets fairly space out without overlaps but I do want multiple on the screen at the same time. Cheers."}, "answers": [{"id": 60324983, "score": 1, "vote": 0, "content": "<p><code>target_2</code> is flashing, because it is just drawn in every 2nd frame. Change the position of  <code>target_2</code> in every 2nd frame, but draw it in every frame:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">while exec:\n    # [...]\n\n    # update positions \n    target_1.x += target_1.v\n    if clock%2 == 0:\n        target_2.x += target_2.v\n    clock += 1\n\n    # clear window (fill in rED)\n    window.fill(RED)\n\n    # draw all the objects of the scene in every frame \n    pygame.draw.rect(window, BLUE, (target_1.x, target_1.y, target_1.h, target_1.w))\n    pygame.draw.rect(window, BLUE, (target_2.x, target_2.y, target_2.h, target_2.w))   \n\n    # update display\n    pygame.display.update()\n</code></pre>\n<p>Note, the scene has to be redrawn in every frame. First the background is cleared filled <code>window.fill(RED)</code>, then the entire scene has to be drawn and finally the display has to be updated (<code>pygame.display.update()</code>).</p>\n<hr/>\n<p>If you want to delay the <code>target_2</code>, then you have to draw and update the position after <code>clock</code> has reached a certain limit:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">clock = 0\ntarget_2_threshold = 500\n\nwhile exec:\n    # [...]\n\n    # update positions \n    clock += 1\n    target_1.x += target_1.v\n    if clock &gt; target_2_threshold and clock % 2 == 0:\n        target_2.x += target_2.v\n\n    # clear window (fill in rED)\n    window.fill(RED)\n\n    # draw all the objects of the scene in every frame \n    pygame.draw.rect(window, BLUE, (target_1.x, target_1.y, target_1.h, target_1.w))\n    if clock &gt; target_2_threshold:\n        pygame.draw.rect(window, BLUE, (target_2.x, target_2.y, target_2.h, target_2.w))   \n\n    # update display\n    pygame.display.update()\n</code></pre>\n", "abstract": "target_2 is flashing, because it is just drawn in every 2nd frame. Change the position of  target_2 in every 2nd frame, but draw it in every frame: Note, the scene has to be redrawn in every frame. First the background is cleared filled window.fill(RED), then the entire scene has to be drawn and finally the display has to be updated (pygame.display.update()). If you want to delay the target_2, then you have to draw and update the position after clock has reached a certain limit:"}]}, {"link": "https://stackoverflow.com/questions/59587081/an-arc-that-follows-my-mouse-but-stays-on-the-circle", "question": {"id": "59587081", "title": "An arc that follows my mouse but stays on the circle", "content": "<p>I am trying to make the arc follow my mouse while staying on the circle path.</p>\n<p>I do not know why it is not working.</p>\n<p>When I run it, it just create a pygame white screen with no error. </p>\n<p>Here is my code:</p>\n<pre><code class=\"python\">from __future__ import division \nfrom math import atan2, degrees, pi\nimport math\nimport pygame\n\npygame.init()\nscreen = pygame.display.set_mode((800, 800))\npygame.display.set_caption(\"globe\")\nCENTER = (400, 400)\nRADIUS = 350\n\nrunning = True\n\ndef drawCircleArc(screen,color,center,radius,startDeg,endDeg,thickness):\n\n    (x,y) = center\n    rect = (x-radius,y-radius,radius*2,radius*2)\n    startRad = math.radians(startDeg)\n    endRad = math.radians(endDeg)\n    pygame.draw.arc(screen,color,rect,startRad,endRad,thickness)\n\n\nwhile running:\n\n  for event in pygame.event.get():\n    if event.type == pygame.QUIT: \n        running = False\n\n  mouse = pygame.mouse.get_pos()\n\n  relx = mouse[0] - CENTER[0]\n  rely = mouse[1] - CENTER[1]\n  rad = atan2(-rely,relx)\n  rad %= 2*pi\n  degs = degrees(rad)\n\n\n  screen.fill((152,206,231))\n\n  drawCircleArc(screen,(243,79,79),CENTER,RADIUS, degs + 90,degs + 100 ,10)\n\n\n  pygame.draw.circle(screen, (71,153,192), CENTER, RADIUS)\n  pygame.display.update()\n\npygame.quit()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/PPsn2.png\" rel=\"nofollow noreferrer\">Picture</a>\n<a href=\"https://i.stack.imgur.com/4A5OU.png\" rel=\"nofollow noreferrer\">Picture2</a></p>\n<p>What I really want is the following picture\nThank you</p>\n", "abstract": "I am trying to make the arc follow my mouse while staying on the circle path. I do not know why it is not working. When I run it, it just create a pygame white screen with no error.  Here is my code: Picture\nPicture2 What I really want is the following picture\nThank you"}, "answers": [{"id": 59587481, "score": 1, "vote": 0, "content": "<p>I think the follow will do what you want. I fixed two problems: </p>\n<ol>\n<li><p>You were drawing the graphics in the wrong order and covering up the short reddish arc (they need to be drawn from back to front), and</p></li>\n<li><p>The two literal values you were adding to the calcuated <code>degs</code> angle were too large.</p></li>\n</ol>\n<p>I also made a several other changes that weren't strictly needed, including reformatting the code follow the <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP 8 - Style Guide for Python Code</a> guidelines and adding a <code>pygame.time.Clock</code> to slow down the refresh rate to something I though was more reasonable.</p>\n<pre><code class=\"python\">from __future__ import division\nfrom math import atan2, degrees, pi\nimport math\nimport pygame\n\npygame.init()\nscreen = pygame.display.set_mode((800, 800))\npygame.display.set_caption(\"globe\")\nclock = pygame.time.Clock()\nFPS = 60  # Frames per sec\nCENTER = (400, 400)\nRADIUS = 350\n\nrunning = True\n\ndef draw_circle_arc(screen, color, center, radius, start_deg, end_deg, thickness):\n    x, y = center\n    rect = (x-radius, y-radius, radius*2, radius*2)\n    start_rad = math.radians(start_deg)\n    end_rad = math.radians(end_deg)\n    pygame.draw.arc(screen, color, rect, start_rad, end_rad, thickness)\n\nwhile running:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False\n\n    mouse = pygame.mouse.get_pos()\n    relx = mouse[0] - CENTER[0]\n    rely = mouse[1] - CENTER[1]\n    rad = atan2(-rely, relx)\n    degs = degrees(rad)\n\n    screen.fill((152,206,231))\n    pygame.draw.circle(screen, (71,153,192), CENTER, RADIUS)\n    draw_circle_arc(screen, (243,79,79), CENTER, RADIUS, degs-10, degs+10, 10)\n    pygame.display.update()\n    clock.tick(FPS)\n\npygame.quit()\n</code></pre>\n<p>Here's what it looks like running</p>\n<p><a href=\"https://i.stack.imgur.com/7t4Fq.png\" rel=\"nofollow noreferrer\"><img alt=\"screenshot of script running showing arc and mouse position\" src=\"https://i.stack.imgur.com/7t4Fq.png\"/></a></p>\n", "abstract": "I think the follow will do what you want. I fixed two problems:  You were drawing the graphics in the wrong order and covering up the short reddish arc (they need to be drawn from back to front), and The two literal values you were adding to the calcuated degs angle were too large. I also made a several other changes that weren't strictly needed, including reformatting the code follow the PEP 8 - Style Guide for Python Code guidelines and adding a pygame.time.Clock to slow down the refresh rate to something I though was more reasonable. Here's what it looks like running "}]}, {"link": "https://stackoverflow.com/questions/57924551/arrow-in-pycairo", "question": {"id": "57924551", "title": "Arrow in pycairo", "content": "<p>I need to draw a directed line or arrow.</p>\n<p>context.move_to (10,10)\ncontext.line_to(10,100) </p>\n<p>this provide an undirected line but I need an arrow. How can I accomplish this in pycairo?</p>\n", "abstract": "I need to draw a directed line or arrow. context.move_to (10,10)\ncontext.line_to(10,100)  this provide an undirected line but I need an arrow. How can I accomplish this in pycairo?"}, "answers": [{"id": 57924851, "score": 1, "vote": 0, "content": "<p>Since there is no builtin arrow, you'll have to define one geometrically. Here's how.</p>\n<pre><code class=\"python\">arrow_length = 0.45\narrow_angle = math.pi/4\narrowhead_angle = math.pi/6\narrowhead_length = 0.3\n\nctx.move_to(0.5, 0.5) # move to center of canvas\n\nctx.rel_line_to(arrow_length * math.cos(arrow_angle), arrow_length * math.sin(arrow_angle))\nctx.rel_move_to(-arrowhead_length * math.cos(arrow_angle - arrowhead_angle), -arrowhead_length * math.sin(arrow_angle - arrowhead_angle))\nctx.rel_line_to(arrowhead_length * math.cos(arrow_angle - arrowhead_angle), arrowhead_length * math.sin(arrow_angle - arrowhead_angle))\nctx.rel_line_to(-arrowhead_length * math.cos(arrow_angle + arrowhead_angle), -arrowhead_length * math.sin(arrow_angle + arrowhead_angle))\n\nctx.set_source_rgb(0,0,0)\nctx.set_line_width(0.08)\nctx.stroke()\n</code></pre>\n<p>This produces the following image:</p>\n<p><a href=\"https://i.stack.imgur.com/XMFGj.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/XMFGj.png\"/></a></p>\n<p>Change the parameters as you need.</p>\n", "abstract": "Since there is no builtin arrow, you'll have to define one geometrically. Here's how. This produces the following image:  Change the parameters as you need."}]}, {"link": "https://stackoverflow.com/questions/44210785/pyglet-text-background-is-not-transparent", "question": {"id": "44210785", "title": "Pyglet text background is not transparent", "content": "<p>I am using Pyglet to create a main menu for my python game. I want to draw text on top of a box that would act as its container. Whenever I render the text, instead of it having a transparent background, it draws whatever the glClearColor is set to. This also happens whenever I try and draw an image that has no background. </p>\n<p>I am currently using these two lines for my textbox and the text.</p>\n<pre><code class=\"python\">self.text_box = pyglet.sprite.Sprite(pyglet.image.load('../Resources/Textures/Menu/text_box.png'),640-150,360-25, batch=self.menuBatch,group=boxGroup)\n\nself.play_text = pyglet.text.Label(\"Play\", font_name=\"Arial\", font_size=32, x=640, y=360, anchor_x='center', anchor_y='center', color=(255,255,255,255), batch=self.menuBatch,group=textGroup)\n</code></pre>\n<p>Then I just call self.menuBatch.draw(). A picture of the problem I am having is:</p>\n<p><a href=\"https://i.stack.imgur.com/4gY5h.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/4gY5h.png\"/></a></p>\n", "abstract": "I am using Pyglet to create a main menu for my python game. I want to draw text on top of a box that would act as its container. Whenever I render the text, instead of it having a transparent background, it draws whatever the glClearColor is set to. This also happens whenever I try and draw an image that has no background.  I am currently using these two lines for my textbox and the text. Then I just call self.menuBatch.draw(). A picture of the problem I am having is: "}, "answers": [{"id": 44214716, "score": 1, "vote": 0, "content": "<p>For transparency effects to work, 'blend' should be enabled in OpenGL.</p>\n<p>To enable blend:</p>\n<pre><code class=\"python\">glEnable(GL_BLEND)                                  # transparency\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)   # transparency\n</code></pre>\n<p>This complete snippet is working for me:</p>\n<pre><code class=\"python\">import pyglet\nfrom pyglet.gl import *\n\n\n# Pyglet Window stuff ---------------------------------------------------------\nbatch = pyglet.graphics.Batch()  # holds all graphics\nconfig = Config(sample_buffers=1, samples=4,depth_size=16, double_buffer=True, mouse_visible=False)\nwindow = pyglet.window.Window(fullscreen=False, config=config)\n\nglClearColor(  0, 100,   0, 255)  # background color\nglEnable(GL_LINE_SMOOTH)\nglHint(GL_LINE_SMOOTH_HINT, GL_DONT_CARE)\nglEnable(GL_BLEND)                                  # transparency\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)   # transparency\n\nplay_text = pyglet.text.Label(\"Play\", font_name=\"Arial\", font_size=32, x=240, y=140, anchor_x='center', anchor_y='center', color=(255,0,255,255), batch=batch,group=None)\ntext_box = pyglet.sprite.Sprite(pyglet.image.load('text_box.png'),240-150,160-25, batch=batch,group=None)\n\n@window.event\ndef draw(dt):\n    window.clear()\n    batch.draw()\n\n\nif __name__ == \"__main__\":\n    pyglet.clock.schedule_interval(draw, 1.0/60)\n    pyglet.app.run()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/EV6H4.jpg\" rel=\"nofollow noreferrer\"><img alt=\"screen\" src=\"https://i.stack.imgur.com/EV6H4.jpg\"/></a></p>\n", "abstract": "For transparency effects to work, 'blend' should be enabled in OpenGL. To enable blend: This complete snippet is working for me: "}, {"id": 56893762, "score": 0, "vote": 0, "content": "<p>I have done something very similar to this before when making the GUI for one of my 3D programs. To make things very simple, I firstly turned off GL_DEPTH_TEST before the draw() call and then I re-enabled GL_DEPTH_TEST after the draw() call. I believe that the reason why the previous answer was working for them is because they didn't have GL_DEPTH_TEST enabled in the first place. I made a <strong>button class</strong> that you could maybe use as well (It's important to note that the argument \"pos\" is for the (x, y) coordinate of the lower left corner of the button and the argument \"dim\" is for the (width, height) dimensions of the button. The \"texture_coords\" argument refers to the texture coordinates of the background image of the button. If you want the full image, just leave it at the default. The rest is pretty self explanatory). So here's the code:</p>\n<pre><code class=\"python\">class Button:\n    def __init__(self, btn_img_file, text = \"Button\", pos = (0, 0), dim = (10, 10), text_color = (255, 255, 255), texture_coords = (0, 0, 1, 0, 1, 1, 0, 1)):\n        self.x, self.y = pos\n        self.w, self.h = dim\n        self.text = text\n        self.img = btn_img_file\n        self.tex = get_tex(self.img)\n        self.coords = texture_coords\n        self.color = text_color\n        self.batch = pyglet.graphics.Batch()\n\n    def on_click(self, mouse_x, mouse_y, function, *args, **kwargs):\n        x, y = self.x, self.y\n        X, Y = x + self.w, y + self.h\n        if mouse_x &gt; x and mouse_x &lt; X and mouse_y &gt; y and mouse_y &lt; Y:\n            function(*args, **kwargs)\n\n    def draw(self):\n        x, y = self.x, self.y\n        X, Y = x + self.w, y + self.h\n        font_size = (self.w // len(self.text)) - 5\n        label = pyglet.text.Label(self.text,\n            font_name = 'Times New Roman',\n            font_size = font_size,\n            x = x + (self.w // 2), y = y + (self.h // 2),\n            anchor_x = 'center', anchor_y = 'center',\n            color = (*self.color, 255))\n        self.batch.add(4, GL_QUADS, self.tex, ('v2f', (x, y, X, y, X, Y, x, Y)), ('t2f', self.coords))\n        glDisable(GL_DEPTH_TEST)\n        self.batch.draw()\n        label.draw()\n        glEnable(GL_DEPTH_TEST)\n</code></pre>\n<p>I hope this was helpful!</p>\n<p>~ Rick Bowen</p>\n", "abstract": "I have done something very similar to this before when making the GUI for one of my 3D programs. To make things very simple, I firstly turned off GL_DEPTH_TEST before the draw() call and then I re-enabled GL_DEPTH_TEST after the draw() call. I believe that the reason why the previous answer was working for them is because they didn't have GL_DEPTH_TEST enabled in the first place. I made a button class that you could maybe use as well (It's important to note that the argument \"pos\" is for the (x, y) coordinate of the lower left corner of the button and the argument \"dim\" is for the (width, height) dimensions of the button. The \"texture_coords\" argument refers to the texture coordinates of the background image of the button. If you want the full image, just leave it at the default. The rest is pretty self explanatory). So here's the code: I hope this was helpful! ~ Rick Bowen"}]}, {"link": "https://stackoverflow.com/questions/39067400/how-to-draw-rectangles-using-list-in-python", "question": {"id": "39067400", "title": "how to draw rectangles using list in python", "content": "<pre><code class=\"python\">for line, images_files in zip(lines, image_list):\n                    info = line.split(',')\n\n                    image_index = [int(info[0])]\n                    box_coordiante1 = [info[2]]\n                    box_coordiante2 = [info[3]]\n                    box_coordiante3 = [info[4]]\n                    box_coordiante4 = [info[5]]\n\n                    prev_image_num = 1\n                    for image_number in image_index:    #### read each other image_number\n\n                        if prev_image_num != image_number: # if read 11111 but appear different number such as 2, 3 and ect\n                            prev_image_num = image_number  # the different number becomes pre_image_num(it was 1)\n                            #box_coordinate = []  # empty box_coordinate\n                            #box_coordinate.append(info[2:6])\n                            #print box_coordinate\n                            # box_coordinate.append() #insert 2 to 6 axis\n                        rect = plt.Rectangle((int(box_coordiante1), int(box_coordiante2)), int(box_coordiante3), int(box_coordiante4), linewidth=1, edgecolor='r', facecolor='none')\n                        ax.add_patch(rect)\n\n                    im = cv2.imread(images_files)\n                    im = im[:, :, (2, 1, 0)]\n                    #     # Display the image\n                    plt.imshow(im)\n                    plt.draw()\n                    plt.pause(0.1)\n                    plt.cla()\n</code></pre>\n<p>I  am supposed to draw boxes on each picture.\nFor showing boxes on each picture, \ni guess that gather location of boxes and show them at that same time. \nSo i used a way using LIST to plt.Rectanle\nbut it said \"TypeError: int() argument must be a string or a number, not 'list'\"\nAre there other ways?? </p>\n", "abstract": "I  am supposed to draw boxes on each picture.\nFor showing boxes on each picture, \ni guess that gather location of boxes and show them at that same time. \nSo i used a way using LIST to plt.Rectanle\nbut it said \"TypeError: int() argument must be a string or a number, not 'list'\"\nAre there other ways?? "}, "answers": [{"id": 68332796, "score": 1, "vote": 0, "content": "<p>Umm, I just did just. I don't know if this is what you wanted though.</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">x = 10\ny = 10\na = []\nfor unit for range(x):\n    a.append(0)\nfor unit for range(y):\n    print(a)\n</code></pre>\n", "abstract": "Umm, I just did just. I don't know if this is what you wanted though."}, {"id": 39069104, "score": 0, "vote": 0, "content": "<p>I'm not very familiar with Python, but it seems like you want a plain number in the variables <code>image_index</code> and <code>box_coordinateN</code>. It looks like you're assigning single-element arrays to them. Try changing:</p>\n<pre><code class=\"python\">image_index = [int(info[0])] // list containing one element: int(info[0])\nbox_coordiante1 = [info[2]]\nbox_coordiante2 = [info[3]]\nbox_coordiante3 = [info[4]]\nbox_coordiante4 = [info[5]]\n</code></pre>\n<p>to:</p>\n<pre><code class=\"python\">image_index = int(info[0]) // number: int(info[0])\nbox_coordiante1 = info[2]\nbox_coordiante2 = info[3]\nbox_coordiante3 = info[4]\nbox_coordiante4 = info[5]\n</code></pre>\n", "abstract": "I'm not very familiar with Python, but it seems like you want a plain number in the variables image_index and box_coordinateN. It looks like you're assigning single-element arrays to them. Try changing: to:"}, {"id": 68333401, "score": 0, "vote": 0, "content": "<p>The answer above is carelessly sloppy and incorrect Python.</p>\n<p>It must be rewritten and corrected as follows:</p>\n<pre><code class=\"python\">x = 10\ny = 10\na = []\nfor unit in range(x):\n    a.append(0)\nfor unit in range(y):\n    print(a)\n</code></pre>\n", "abstract": "The answer above is carelessly sloppy and incorrect Python. It must be rewritten and corrected as follows:"}]}, {"link": "https://stackoverflow.com/questions/25576455/how-can-i-draw-objects-in-kivy-without-using-the-kv-language", "question": {"id": "25576455", "title": "How Can I Draw Objects in Kivy Without Using the kv Language?", "content": "<p>I've been following in this <a href=\"http://kivy.org/docs/tutorials/pong.html\" rel=\"nofollow\">tutorial</a>, the section \"Add Simple Graphics\". But I'm having trouble getting the program to draw the images. Kivy isn't detecting the <em>pong.kv</em> file, and I've tried everything I can think of. Does anyone know of a way to draw objects in kivy without using the kv language?</p>\n<p>EDIT: Sorry for not saying this before. I'd rather lose the kv file.</p>\n", "abstract": "I've been following in this tutorial, the section \"Add Simple Graphics\". But I'm having trouble getting the program to draw the images. Kivy isn't detecting the pong.kv file, and I've tried everything I can think of. Does anyone know of a way to draw objects in kivy without using the kv language? EDIT: Sorry for not saying this before. I'd rather lose the kv file."}, "answers": [{"id": 25582174, "score": 1, "vote": 0, "content": "<p>As Mark suggested, it would be best to get the .kv file working. You should tell us what you've tried and we can try to spot the problem. However, it is possible to draw the graphics without:</p>\n<pre><code class=\"python\">def __init__(self, **kwargs):\n    super(PongBall, self).__init__(**kwargs)\n    with self.canvas:\n        Color(1,1,1,1)\n        self.ball = Ellipse(size=[50,50],pos=[150,150])\n</code></pre>\n<p>Here I've just created a white ball of a given size at a given position. You can also add other properties or other graphical objects here.</p>\n<p>(I haven't tested the above so apologies if it contains errors).</p>\n<p>Hope that helps a bit.</p>\n", "abstract": "As Mark suggested, it would be best to get the .kv file working. You should tell us what you've tried and we can try to spot the problem. However, it is possible to draw the graphics without: Here I've just created a white ball of a given size at a given position. You can also add other properties or other graphical objects here. (I haven't tested the above so apologies if it contains errors). Hope that helps a bit."}]}, {"link": "https://stackoverflow.com/questions/14909930/networkx-directed-graph-python", "question": {"id": "14909930", "title": "Networkx Directed Graph Python", "content": "<p>I want to draw a directed graph with Python library Networkx, the problem is that when I have a connection from Node1 to Node1, and back from Node2 to Node2, their labels are overwritten.</p>\n<p>Is there a method to draw curves from one node to another, or a way to configure labels position?</p>\n<p><img alt=\"\" src=\"https://i.stack.imgur.com/25NID.png\"/></p>\n<p>In screenshot you can see that I have two directed lines but only one label, second label is over first.</p>\n", "abstract": "I want to draw a directed graph with Python library Networkx, the problem is that when I have a connection from Node1 to Node1, and back from Node2 to Node2, their labels are overwritten. Is there a method to draw curves from one node to another, or a way to configure labels position?  In screenshot you can see that I have two directed lines but only one label, second label is over first."}, "answers": [{"id": 29200646, "score": 1, "vote": 0, "content": "<p>It was resolved with label_pos=0.2</p>\n", "abstract": "It was resolved with label_pos=0.2"}]}, {"link": "https://stackoverflow.com/questions/63366600/how-to-add-a-marker-manually-or-with-draw-plugin-folium-python-and-be-able-t", "question": {"id": "63366600", "title": "How to add a marker manually or with draw plugin (folium - Python) and be able to export it or save it?", "content": "<p>Draw plugin can save a geoJson file with the objects put on the map. But if I add a marker programmatically or the map already has markers, I lose them, they are not included when draw plugin exports the data into the GeoJson file.</p>\n<p>On the other hand, avoiding draw plugin, I made markers with 'ClickForMarker' on an existing map w/markers and then saved the map, but I lose the new markers; they are not present in the HTML, just the original ones (programmatically generated).</p>\n<p>Finally, the idea is to find a way to, having a base map with markers, add some new ones, and save (or export) the whole thing.</p>\n<pre><code class=\"python\">from folium.plugins import Draw\n\nm = folium.Map(location=[52.1, 5.1], zoom_start=12) \n\ndraw.add_to(m)\ndraw = Draw(\n            export=True,\n            filename='data.geojson',\n            position='topleft',\n            draw_options={'polyline': {'allowIntersection': False}},\n            edit_options={'poly': {'allowIntersection': False}}\n) \n\nfolium.Marker((52.0, 5.0), tooltip='both', icon=icon_red).add_to(m) \n    \nm\n</code></pre>\n", "abstract": "Draw plugin can save a geoJson file with the objects put on the map. But if I add a marker programmatically or the map already has markers, I lose them, they are not included when draw plugin exports the data into the GeoJson file. On the other hand, avoiding draw plugin, I made markers with 'ClickForMarker' on an existing map w/markers and then saved the map, but I lose the new markers; they are not present in the HTML, just the original ones (programmatically generated). Finally, the idea is to find a way to, having a base map with markers, add some new ones, and save (or export) the whole thing."}, "answers": []}, {"link": "https://stackoverflow.com/questions/56379888/gaps-in-a-line-while-trying-to-draw-them-with-a-mouse-problem", "question": {"id": "56379888", "title": "Gaps in a line while trying to draw them with a mouse problem", "content": "<p>I have written a program to draw a sin function in a way it is not easy to explain, but really easy to see it, so this is the whole </p>\n<pre><code class=\"python\">import pygame\nimport math\nimport fractions\n\nwindow = pygame.display.set_mode((0, 0))#, pygame.FULLSCREEN)\npygame.font.init()\nrunning = True\nw, h = pygame.display.get_surface().get_size()\nmyfont = pygame.font.SysFont(\"monospace\", 12)\nmyfont2 = pygame.font.SysFont(\"monospace\", 30)\n\nwhite = (255, 255, 255)\nblack = (0, 0, 0)\nred = (255, 0, 0)\ngreen = (0, 255, 0)\nwCol = (100, 100, 100)\nyellow = (0, 0, 255)\n\n#temp\nlast = [0, 0]\nlastQ = 0\nq = 0\n\nunit = 50\nradius = 100\nxa = int(w/3)\nya1 = 0\nya2 = int(h)\nxb1 = 0\nxb2 = int(w)        \nyb = int(h/2)\nxc = int(xa - radius)\nyc = int(yb)\nsubtraction = 2\nrotCount = 0\npoints = []\n\ndef check4points(angleC, sinC):\n    isInArr = False\n    for i in points:\n        if i[0] == angleC and i[1] == sinC:\n            isInArr = True\n        else:\n            isInArr = False\n    return(isInArr)\n\ndef draw():\n    global points\n    window.fill(white)\n    #axis and units\n    pygame.draw.line(window, black, (xa, ya1), (xa, ya2), 2) # OY\n    pygame.draw.line(window, black, (xb1, yb), (xb2, yb), 2) # OX\n    #x units\n    deltaU = 0\n    for i in range(xa, w, 50):\n        pygame.draw.line(window, black, (i, (yb - 5)), (i, (yb + 5)), 1)\n        text = myfont.render(str(fractions.Fraction(deltaU).limit_denominator()) + \"PI\", 1, black)\n        window.blit(text, (i - 15, yb + 5))\n        deltaU += 1/6\n    deltaU = 0\n    for i in range(xa, 0, -50):\n        pygame.draw.line(window, black, (i, (yb - 5)), (i, (yb + 5)), 1)\n        text = myfont.render(str(fractions.Fraction(deltaU).limit_denominator()) + \"PI\", 1, black)\n        window.blit(text, ((i) - 15, yb + 5))\n        deltaU -= 1/6\n    #y units\n    deltaU = 0\n    for i in range(yb, h, 50):\n        pygame.draw.line(window, black, ((xa - 5), i), ((xa + 5), i), 1)\n        text = myfont.render(str(deltaU), 1, black)\n        window.blit(text, (xa + 10, i - 10))\n        deltaU -= 0.5\n    deltaU = 0\n    for i in range(yb, 0, -50):\n        pygame.draw.line(window, black, ((xa - 5), i), ((xa + 5), i), 1)\n        text = myfont.render(str(deltaU), 1, black)\n        window.blit(text, (xa + 10, i - 10))\n        deltaU += 0.5\n    text1 = myfont2.render(\"K\u0105t: \" + str(angle), 2, black)\n    text2 = myfont2.render(\"Sinus k\u0105ta: \" + str(sinFinal), 2, black)\n    text3 = myfont2.render(\"R - Reset\", 2, black)\n    window.blit(text1, (50, 100))\n    window.blit(text2, (50, 130))\n    window.blit(text3, (w*0.9, h*0.9))\n\n    #circle thingy\n    pygame.draw.circle(window, black, (xc, yc), radius, 2)\n    pygame.draw.line(window, wCol, (xa - (2*unit), yb), satelliteCenter, 3)\n    #pygame.draw.line(window, wCol, (mouse_xPos, mouse_yPos), (mouse_xPos, yb), 2)\n    #pygame.draw.line(window, wCol, (mouse_xPos, mouse_yPos), (xa, mouse_yPos), 2)\n\n\n    #point/sin graph\n    pygame.draw.line(window, yellow, satelliteCenter, (satelliteCenter[0], yb), 2)\n    pygame.draw.line(window, wCol, satelliteCenter, (w, satelliteCenter[1]), 2)\n    pygame.draw.line(window, wCol, (0, satelliteCenter[1]), satelliteCenter, 2)\n    pygame.draw.circle(window, red, satelliteCenter, 6)\n\n    sinC = int(yb - (sinFinal * 100))\n    angleC = (int(angle*(5/9)*3) + xa)\n\n    point = [angleC, sinC]\n\n    if check4points(angleC, sinC) == False:\n        points.append(point)\n\n    for i in range(len(points) - 1):\n        pygame.draw.circle(window, red, (points[i][0], points[i][1]), 6, 0)\n\n    pygame.draw.line(window, yellow, (angleC, sinC), (angleC, yb), 2)\n\nwhile running:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False\n            quit()\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_ESCAPE:\n                running = False\n                quit()\n            if event.key == pygame.K_LEFT:\n                rotCount -= 1\n            if event.key == pygame.K_RIGHT:\n                rotCount += 1\n            if event.key == pygame.K_r:\n                points = []\n                rotCount = 0\n\n    mouse_xPos = pygame.mouse.get_pos()[0]\n    mouse_yPos = pygame.mouse.get_pos()[1]\n\n    satelliteCenter = (xc+radius, yb)\n    vector = (mouse_xPos-xc, mouse_yPos-yb)\n    distance = (vector[0]**2 + vector[1]**2)**0.5\n\n    if distance &gt; 0:\n        scalar = radius/distance\n        satelliteCenter = (int(round(xc + vector[0]*scalar)),\n                           int(round(yb + vector[1]*scalar)) )\n\n    if q == 1 and lastQ == 4:    \n        rotCount += 1\n    elif q == 4 and lastQ == 1:\n        rotCount -= 1\n\n    lastQ = q\n\n\n    last = satelliteCenter\n\n    xrel = (mouse_xPos - xa)/50\n    yrel = -(mouse_yPos - yb)/50\n    xcircle = -2\n\n    x = xrel - xcircle\n    y = yrel\n    hypotenuse = math.sqrt(x**2 + y**2)\n\n    sin = y/hypotenuse\n    angle = math.degrees(math.asin(sin))\n    if x &gt;= 0 and y &gt; 0:\n        angle = angle + (rotCount*360)\n        q = 1\n    elif x &gt; 0 and y &lt;= 0:\n        angle = angle + 360 + (rotCount*360)\n        q = 4\n    elif x &lt;= 0 and y &lt; 0:\n        angle = 180 - angle + (rotCount*360)\n        q = 3\n    elif x &lt; 0 and y &gt;= 0:\n        angle = 180 - angle + (rotCount*360)\n        q = 2\n\n    sinFinal = math.sin(math.radians(angle))\n\n    draw()\n\n    pygame.display.flip()\n\n</code></pre>\n<p>I have tried to subtract x coordinate of last drawn point and x coordinate of currently drawn one and check if it is greater than a given number (eg. 2 pixels). It seems to fail and is really non-efficient</p>\n<p>These are the lines drawing the points:</p>\n<pre><code class=\"python\">\n    sinC = int(yb - (sinFinal * 100))\n    angleC = (int(angle*(5/9)*3) + xa)\n\n    point = [angleC, sinC]\n\n    if check4points(angleC, sinC) == False:\n        points.append(point)\n\n    for i in range(len(points) - 1):\n        pygame.draw.circle(window, red, (points[i][0], points[i][1]), 6, 0)\n\n    pygame.draw.line(window, yellow, (angleC, sinC), (angleC, yb), 2)\n</code></pre>\n<p>If you could, please, tell me how I could make a perception of a smooth line.\nThanks in advance :)</p>\n<p>BTW Don't judge me for my spaghetti code, I am just a beginner :D</p>\n", "abstract": "I have written a program to draw a sin function in a way it is not easy to explain, but really easy to see it, so this is the whole  I have tried to subtract x coordinate of last drawn point and x coordinate of currently drawn one and check if it is greater than a given number (eg. 2 pixels). It seems to fail and is really non-efficient These are the lines drawing the points: If you could, please, tell me how I could make a perception of a smooth line.\nThanks in advance :) BTW Don't judge me for my spaghetti code, I am just a beginner :D"}, "answers": [{"id": 56380523, "score": 0, "vote": 0, "content": "<p>Use <a href=\"https://docs.python.org/3/library/functions.html#round\" rel=\"nofollow noreferrer\"><code>round</code></a> instead of <code>int</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">sinC   = round(yb - (sinFinal * 100))\nangleC = round(angle*(5/9)*3 + xa)\n</code></pre>\n<p>To find existing points in the list (<code>points</code>) it is sufficient to find <a href=\"https://docs.python.org/3/library/functions.html#any\" rel=\"nofollow noreferrer\"><code>any</code></a> point with the same <em>x</em> coordinate:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">any([x for x in points if x==point[0]])\n</code></pre>\n<p>Sort (<a href=\"https://docs.python.org/3/library/functions.html#sorted\" rel=\"nofollow noreferrer\"><code>sorted</code></a>) the list of points, after a new point was added:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">point = [angleC, sinC]\nif not any([x for x in points if x==point[0]]):\n    points.append(point)\n    points = sorted(points, key = lambda p : p[0])\n</code></pre>\n<p>When the curve is drawn, then calculate the <em>x</em>-distance of a point to its successor and predecessor:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">dist_p = 0 if i==0 else points[i][0]-points[i-1][0]\ndist_s = 0 if i&gt;len(points)-2 else points[i+1][0]-points[i][0]\n</code></pre>\n<p>Draw a point, when the distance to the successor and predecessor is acceeded by a certain <code>threshold</code> and draw a line else:</p>\n<p><a href=\"https://i.stack.imgur.com/sCdN0.gif\" rel=\"nofollow noreferrer\"><img alt=\"\" src=\"https://i.stack.imgur.com/sCdN0.gif\"/></a></p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">sinC   = round(yb - (sinFinal * 100))\nangleC = round(angle*(5/9)*3 + xa)\n\npoint = [angleC, sinC]\nif not any([x for x in points if x==point[0]]):\n    points.append(point)\n    points = sorted(points, key = lambda p : p[0])\n\nthreshold = 10\nfor i in range(len(points)):\n    dist_p = 0 if i==0 else points[i][0]-points[i-1][0]\n    dist_s = 0 if i&gt;len(points)-2 else points[i+1][0]-points[i][0]\n    if dist_p &gt; threshold and dist_s &gt; threshold: \n        pygame.draw.circle(window, red, points[i], 6, 0)\n    elif 0 &lt; dist_p &lt; threshold:\n        pygame.draw.line(window, red, points[i-1], points[i], 2)\n</code></pre>\n", "abstract": "Use round instead of int: To find existing points in the list (points) it is sufficient to find any point with the same x coordinate: Sort (sorted) the list of points, after a new point was added: When the curve is drawn, then calculate the x-distance of a point to its successor and predecessor: Draw a point, when the distance to the successor and predecessor is acceeded by a certain threshold and draw a line else: "}]}, {"link": "https://stackoverflow.com/questions/53312641/draw-dependency-tree-in-python-with-stanfordcorenlp-format", "question": {"id": "53312641", "title": "Draw dependency tree in Python with stanfordcorenlp format", "content": "<p>I am using StanfordCoreNLP for dependency parser sentence. I set up and use StanfordCoreNLP follow this tutorial: <a href=\"https://www.khalidalnajjar.com/setup-use-stanford-corenlp-server-python/\" rel=\"nofollow noreferrer\">https://www.khalidalnajjar.com/setup-use-stanford-corenlp-server-python/</a> . </p>\n<p>Input a sentence \"He derives great joy and happiness from cycling\", I got an output:</p>\n<blockquote>\n<p>[('ROOT', 0, 2), ('nsubj', 2, 1), ('amod', 4, 3), ('dobj', 2, 4),\n  ('cc', 4, 5), ('conj', 4, 6), ('prep', 2, 7), ('pobj', 7, 8)]</p>\n</blockquote>\n<p>How i draw a dependency tree using nltk package or other package using this output. </p>\n<p>Thank for help.</p>\n", "abstract": "I am using StanfordCoreNLP for dependency parser sentence. I set up and use StanfordCoreNLP follow this tutorial: https://www.khalidalnajjar.com/setup-use-stanford-corenlp-server-python/ .  Input a sentence \"He derives great joy and happiness from cycling\", I got an output: [('ROOT', 0, 2), ('nsubj', 2, 1), ('amod', 4, 3), ('dobj', 2, 4),\n  ('cc', 4, 5), ('conj', 4, 6), ('prep', 2, 7), ('pobj', 7, 8)] How i draw a dependency tree using nltk package or other package using this output.  Thank for help."}, "answers": [{"id": 55062479, "score": 0, "vote": 0, "content": "<p><a href=\"https://stackoverflow.com/questions/13468872/how-to-get-a-dependency-tree-with-stanford-nlp-parser\">@ambientlight</a> answered this question to draw a tree using stanford dependency tree.</p>\n<p>The dependency tree looks as follows:</p>\n<p><a href=\"https://i.stack.imgur.com/iwIuM.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/iwIuM.png\"/></a></p>\n<p>Using NLTK python, you can try as follows.</p>\n<pre><code class=\"python\">import nltk\nfrom nltk.tokenize import word_tokenize\nfrom nltk.tag import pos_tag\ndoc = \"He derives great joy and happiness from cycling\"\ndoc = nltk.word_tokenize(doc)\ndoc = nltk.pos_tag(doc)\ngrammar = \"NP: {&lt;DT&gt;?&lt;JJ&gt;*&lt;NN&gt;}\"\ncp = nltk.RegexpParser(grammar)\nresult = cp.parse(doc)\nresult.draw()\n</code></pre>\n<p>Output:\n<a href=\"https://i.stack.imgur.com/n3y9a.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/n3y9a.png\"/></a></p>\n", "abstract": "@ambientlight answered this question to draw a tree using stanford dependency tree. The dependency tree looks as follows:  Using NLTK python, you can try as follows. Output:\n"}]}, {"link": "https://stackoverflow.com/questions/44080680/pyglet-opengl-bind-texture", "question": {"id": "44080680", "title": "Pyglet OpenGL bind texture", "content": "<p>I am trying to bind a texture to OpenGL in Pyglet. I can't get the texture to be drawn on the quad, it just draws a white quad. I am getting the id to bind using:</p>\n<pre><code class=\"python\">myimage = pyglet.image.load(\"filename.png\").get_texture()\n...\ndef on_draw(self):\n    glEnable(GL_TEXTURE_2D)\n    glBindTexture(GL_TEXTURE_2D, myimage.id)\n    self.planet.draw()\n    glBindTexture(GL_TEXTURE_2D, 0)\n    glDisable(GL_TEXTURE_2D)\n</code></pre>\n<p>It draws it in the correct position with no texture. Here is my planet class with its verticies, texture coords, and draw function:</p>\n<pre><code class=\"python\">class Planet():\n def __init__(self):\n    self.planet_x = 100\n    self.planet_z = 100\n    self.sky_height = 300\n\n    self.setPlanet([0,0,0])\n    self.planet_texcoords = [(0,0,0), (1,0,0), (1,0,1), (0,0,1)]\n\n def setPlanet(self, ppos):\n    self.planet_x = ppos[0] + 100\n    self.planet_z = ppos[2] + 100\n    self.planet_nx = ppos[0] - 100\n    self.planet_nz = ppos[2] - 100\n    self.sky_height = ppos[1] + 300\n\n    self.planet_verticies = [(self.planet_nx,self.sky_height,self.planet_nz,), \n                            (self.planet_x,self.sky_height,self.planet_nz,),\n                            (self.planet_x,self.sky_height,self.planet_z,),\n                            (self.planet_nx,self.sky_height,self.planet_z)]\ndef draw(self):\n    glBegin(GL_QUADS)\n    glTexCoord3i(self.planet_texcoords[0][0], self.planet_texcoords[0][1], self.planet_texcoords[0][2])\n    glVertex3f(self.planet_verticies[0][0], self.planet_verticies[0][1], self.planet_verticies[0][2])\n    glTexCoord3i(self.planet_texcoords[1][0], self.planet_texcoords[1][1], self.planet_texcoords[1][2])\n    glVertex3f(self.planet_verticies[1][0], self.planet_verticies[1][1], self.planet_verticies[1][2])\n    glTexCoord3i(self.planet_texcoords[2][0], self.planet_texcoords[2][1], self.planet_texcoords[2][2])\n    glVertex3f(self.planet_verticies[2][0], self.planet_verticies[2][1], self.planet_verticies[2][2])\n    glTexCoord3i(self.planet_texcoords[3][0], self.planet_texcoords[3][1], self.planet_texcoords[3][2])\n    glVertex3f(self.planet_verticies[3][0], self.planet_verticies[3][1], self.planet_verticies[3][2])\n    glEnd()\n</code></pre>\n", "abstract": "I am trying to bind a texture to OpenGL in Pyglet. I can't get the texture to be drawn on the quad, it just draws a white quad. I am getting the id to bind using: It draws it in the correct position with no texture. Here is my planet class with its verticies, texture coords, and draw function:"}, "answers": []}, {"link": "https://stackoverflow.com/questions/43967871/snake-game-help-not-using-pygamepython", "question": {"id": "43967871", "title": "Snake Game Help- not using Pygame(Python)", "content": "<p>Currently working on designing a snake game using python, with import.draw, without pygame! Most of my game is completed and it is working out very well, except for the fact that any time an arrow is clicked( up,down,left,or right) the length of the snake just becomes bigger, that is not what i want to happen, because the length should only become larger once the snake eats the apple!\nThis is my code:\n    import Draw\n    import random</p>\n<pre><code class=\"python\">Draw.setCanvasSize(600,600)\nmasterList = [[None for col in range(30)] for row in range(30)]\n\ndef startscreen():  #WELCOME SCREEN\n#set screen\n#(may change to loop later)\nDraw.setBackground(Draw.CYAN)\nDraw.setColor(Draw.RED)\nDraw.filledRect(0,100,600,200)\nDraw.setColor(Draw.GREEN)\nDraw.filledRect(0,200,600,200)\nDraw.setColor(Draw.PINK)\nDraw.filledRect(0,200,600,200)\nDraw.setColor(Draw.BLUE)\nDraw.filledRect(0,300,600,200)\nDraw.setColor(Draw.YELLOW)\nDraw.filledRect(0,400,600,200)\nDraw.setColor(Draw.VIOLET)\nDraw.filledRect(0,500,600,200)\nDraw.setFontSize(80)\nDraw.setFontFamily(\"Courier\")\na = \"SNAKE GAME\"\nDraw.setColor(Draw.BLACK)\nDraw.string(a,50,220)\nDraw.setFontSize(35)\nDraw.string(\"CLICK ANYWHERE TO CONTINUE\",30,330)\n\ndef clickAnywhere():\nwhile True:\n    if Draw.mousePressed():\n        return True\n\n#code for press enter to continue using draw package and keys\ndef playGame(size):\n#choose starting point for apple\nappleX = random.randrange(0, 580, 20)\nappleY = random.randrange(0, 580, 20)  \npositionApple = random.randrange(0, 580, 20) \n\nmasterList[positionApple//20][positionApple//20] = 'a'\n\n# initial position of snake in middle\nlengthSnake = 4 # four boxes\npositionSnakeX = 300\npositionSnakeY = 300\nfor i in range(15, 19):\n    masterList[15][i] = 'x'\n\ndrawTheBoard(appleX,appleY, positionSnakeX, positionSnakeY,lengthSnake)\n\n#while positionSnake != 0 and positionSnake != 600:\nwhile True:\n    # check if user pressed a key to change snake direction\n    if Draw.hasNextKeyTyped():\n        newKey = Draw.nextKeyTyped()\n        if newKey == \"Left\":\n            positionSnakeX -= 20\n            lengthSnake += 1\n        elif newKey == \"Right\":\n            positionSnakeX += 20   \n            lengthSnake += 1\n        elif newKey == \"Up\":\n            positionSnakeY -= 20 \n            lengthSnake += 1\n        elif newKey == \"Down\":\n            positionSnakeY += 20  \n            lengthSnake += 1\n\n        drawTheBoard(appleX,appleY, positionSnakeX, positionSnakeY, \nlengthSnake)\n\n\n    # if snake hit the apple, then add a box to the snake\n    if hitApple(positionSnakeX, positionSnakeY, positionApple, positionApple):\n        lengthSnake += 1\n        masterList[positionApple/20][positionApple/20] = None\n        positionApple = random.randrange(0, 580, 20)\n        masterList[positionApple/20][positionApple/20] = 'a'\n\n    #check if snake hit wall using hitWall()\n  #      if hitWall(positionSnake, positionSnake):\n   #          return False # will this break the while loop \n\n    # check if snake hit itself\n\n    # otherwise draw the board\n    #    drawTheBoard(positionApple, positionSnakeX, positionSnakeY, \n   lengthSnake) # function that clears and resets board after each round\n    #def moveSnake(s,dx,dy):\n   #head= s[0]\n   #news= [[head[0] + dy, head[1]+dx]]+s[0:-1]]\n   #return news\n\n def drawTheBoard(appleX,appleY,snakeX,snakeY,lengthSnake):\n#clear Canvas\nDraw.clear()\n#Draw Snake using for loop to draw the number of rectangles corresponding to\n#how many boxes in 2D list it has\nDraw.picture(\"snakeBackground.gif\",0,0)\nDraw.setColor(Draw.BLACK)\nfor i in range(lengthSnake):\n    Draw.filledRect(snakeX+(20*i), snakeY, 20, 20)\n    # change the x, y coordinates based on 2D list\n\n# Draw Apple\nDraw.setColor(Draw.RED)\ndrawApple(appleX, appleY)\nif snakeX == appleX and snakeY == appleY:\n    drawApple()\n\n    #return true\n    #if snake hit wall\n    #return False\nDraw.show()\n\n def drawApple(appleX, appleY):\n   #appleX = random.randrange(0, 580, 20) \n   #appleY = random.randrange(0, 580, 20) \n   Draw.setColor(Draw.RED)\n   Draw.filledOval(appleX, appleY, 20, 20)       \n\n def hitApple(snakeX, snakeY, appleX, appleY):\nif (appleX &lt; snakeX &lt; appleX + 20) or (appleY &lt; snakeY &lt; appleY + 20):\n    return True\nreturn False\n\n #def hitWall(snakeCoords):\n#use x, y coordinates to check if snake hit wall, returning True or False\n#if snake's x is less than 0 or x is greater than or equal to numCols\n#if y is less than 0 or y is greater than or equal to numRows\n#return True\n# Else, return False\n# (0,600) is considered hitting the wall\n\n def main():\nstartscreen()\nif clickAnywhere():\n    Draw.clear()\n#clear the screen\nsnakeSize = 4\n#for each of x times\n#ans= playGame(size)\n#If ans= playGame(size):\n#snakeSize += 1\nplayGame(snakeSize)\n</code></pre>\n<p># Draw.show()\n    main()</p>\n", "abstract": "Currently working on designing a snake game using python, with import.draw, without pygame! Most of my game is completed and it is working out very well, except for the fact that any time an arrow is clicked( up,down,left,or right) the length of the snake just becomes bigger, that is not what i want to happen, because the length should only become larger once the snake eats the apple!\nThis is my code:\n    import Draw\n    import random # Draw.show()\n    main()"}, "answers": [{"id": 43967955, "score": 0, "vote": 0, "content": "<p>You execute</p>\n<pre><code class=\"python\">lengthSnake += 1\n</code></pre>\n<p>every time <code>Draw.hasNextKeyTyped()</code> is truthy (and the key is \"Left\"/\"Right\"/\"Up\"/\"Down\").</p>\n", "abstract": "You execute every time Draw.hasNextKeyTyped() is truthy (and the key is \"Left\"/\"Right\"/\"Up\"/\"Down\")."}, {"id": 43968117, "score": 0, "vote": 0, "content": "<p>With this while loop, you are telling the computer each time a key is pressed add one to the length of snake. </p>\n<pre><code class=\"python\">while True:\n    # check if user pressed a key to change snake direction\n    if Draw.hasNextKeyTyped():\n        newKey = Draw.nextKeyTyped()\n        if newKey == \"Left\":\n            positionSnakeX -= 20\n            lengthSnake += 1\n        elif newKey == \"Right\":\n            positionSnakeX += 20   \n            lengthSnake += 1\n        elif newKey == \"Up\":\n            positionSnakeY -= 20 \n            lengthSnake += 1\n        elif newKey == \"Down\":\n            positionSnakeY += 20  \n            lengthSnake += 1`enter code here`\n</code></pre>\n<p>Remove lengthSnake += 1 from each if block.</p>\n", "abstract": "With this while loop, you are telling the computer each time a key is pressed add one to the length of snake.  Remove lengthSnake += 1 from each if block."}]}, {"link": "https://stackoverflow.com/questions/37846542/pil-imagedraw-draw-text-prevent-the-text-running-out-of-the-scope", "question": {"id": "37846542", "title": "PIL.ImageDraw.Draw.text prevent the text running out of the scope", "content": "<p>I'm trying to \"draw\" text onto pitures with a python script using PIL.</p>\n<p>The code looks like following:</p>\n<pre><code class=\"python\">    text = TextBoxDedication.get(\"1.0\",END).split(\"\\n\")\n\n    # Text auf dem Hintergund platzieren\n    lineCnt = 0\n    for line in text:\n        draw = ImageDraw.Draw(BackgroundDummy)\n        draw.text((IMG_POSITIONS[4][0],IMG_POSITIONS[4][1]+80*lineCnt), line, font=font)\n        print draw.size\n        lineCnt = lineCnt +1\n\n    BackgroundDummy = BackgroundDummy.resize(IMG_SIZES[2])\n    photo = ImageTk.PhotoImage(BackgroundDummy)\n</code></pre>\n<p>The Problem is: if the text results in a overlay which is to wide the text reaches the right border of the picture below.</p>\n<p>Does someone see a possibility to have a kind of \"auto-newline\" if the text would be to wide?</p>\n<p>Or can I at least determine the resulting size (in px) of a given text to estimate if it would fit onto the background or not?</p>\n<p>thanks a lot in advance!</p>\n<p>BR DaZeller</p>\n", "abstract": "I'm trying to \"draw\" text onto pitures with a python script using PIL. The code looks like following: The Problem is: if the text results in a overlay which is to wide the text reaches the right border of the picture below. Does someone see a possibility to have a kind of \"auto-newline\" if the text would be to wide? Or can I at least determine the resulting size (in px) of a given text to estimate if it would fit onto the background or not? thanks a lot in advance! BR DaZeller"}, "answers": []}, {"link": "https://stackoverflow.com/questions/27108810/pygame-draw-arc-completion-bug-or-just-me", "question": {"id": "27108810", "title": "Pygame.draw.arc() completion bug or just me?", "content": "<p>I'm trying to draw several arc with squares at the end points and I have most of it but something is not quite right with the end points. there's always a few pixels gap between where I think the arc should end and where it is drawn. Example code below:</p>\n<pre><code class=\"python\">import pygame\nfrom math import pi\n\npygame.init()\nscreen = pygame.display.set_mode([1000,1000])\nclock = pygame.time.Clock()\ndone = False\n\nwhile not done:\n    clock.tick(10)\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n    screen.fill((0,0,0))\n\n    # draw first arc just past pi/2 to make sure arc is not cut off by rectangle bounds\n    pygame.draw.arc(screen, (255,255,255),[100,100,800,800], 0, 9 * pi / 16, 1)\n\n    # normal, easy, simple, arc does not touch vertical red line as expected\n    pygame.draw.arc(screen, (255,255,255),[200,200,600,600], 0, 2 * pi, 1)\n\n    # shorter arc because in my actual code it seems that smaller arcs have larger gaps\n    # but I can't seem to tell here besides it doesn't connect either\n    pygame.draw.arc(screen, (255,255,255),[300,300,400,400], 4 * pi / 16, pi / 2, 1)\n\n    # Horizontal and vertical lines for comparison\n    pygame.draw.line(screen, (255,0,0), [500,500], [500,0])\n    pygame.draw.line(screen, (255,0,0), [500,500], [900,500])\n\n    pygame.display.flip()\n\npygame.quit()\n</code></pre>\n<p>[Sample output][1] Notice the gaps just to the left of the mouse cursor. <a href=\"http://i.stack.imgur.com/0zxkG.jpg\" rel=\"nofollow\">http://i.stack.imgur.com/0zxkG.jpg</a></p>\n<p>Same results on  OS X and Linux Mint. Drawing the lines first doesn't make a difference and it's always the end points not the starting points. Thanks for reading!</p>\n", "abstract": "I'm trying to draw several arc with squares at the end points and I have most of it but something is not quite right with the end points. there's always a few pixels gap between where I think the arc should end and where it is drawn. Example code below: [Sample output][1] Notice the gaps just to the left of the mouse cursor. http://i.stack.imgur.com/0zxkG.jpg Same results on  OS X and Linux Mint. Drawing the lines first doesn't make a difference and it's always the end points not the starting points. Thanks for reading!"}, "answers": [{"id": 27279907, "score": 0, "vote": 0, "content": "<p>Solved thanks to /u/Mekire in <a href=\"https://www.reddit.com/r/pygame/comments/2o5vb4/does_anyone_here_have_any_ideas_on_this_arc/\" rel=\"nofollow\">this reddit post</a></p>\n<pre><code class=\"python\">import pygame\nfrom pygame import gfxdraw\n\nRED = pygame.Color(\"red\")\nWHITE = pygame.Color(\"white\")\n\ndef draw_arc(surface, center, radius, start_angle, stop_angle, color):\n    x,y = center\n    start_angle = int(start_angle%360)\n    stop_angle = int(stop_angle%360)\n    if start_angle == stop_angle:\n        gfxdraw.circle(surface, x, y, radius, color)\n    else:\n        gfxdraw.arc(surface, x, y, radius, start_angle, stop_angle, color)\n\n\npygame.init()\nscreen = pygame.display.set_mode([500,500])\nscreen_rect = screen.get_rect()\nx,y = screen_rect.center\nclock = pygame.time.Clock()\ndone = False\n\nwhile not done:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n    screen.fill((0,0,0))\n    #Arcs\n    draw_arc(screen, screen_rect.center, 200, 45, 360, WHITE)\n    draw_arc(screen, screen_rect.center, 220, 0, 360, WHITE)\n    draw_arc(screen, screen_rect.center, 100, -90, -135, WHITE)\n    draw_arc(screen, screen_rect.center, 120, -135, -90, WHITE)\n    # Horizontal and vertical lines for comparison\n    pygame.draw.line(screen, RED, screen_rect.center, screen_rect.midright)\n    pygame.draw.line(screen, RED, screen_rect.center, screen_rect.midtop)\n    pygame.draw.line(screen, RED, screen_rect.topleft, screen_rect.bottomright)\n    pygame.display.flip()\n    clock.tick(30)\n\npygame.quit()\n</code></pre>\n", "abstract": "Solved thanks to /u/Mekire in this reddit post"}]}, {"link": "https://stackoverflow.com/questions/19968066/pygame-set-alpha-level-for-shapes", "question": {"id": "19968066", "title": "Pygame: Set alpha level for shapes", "content": "<p>How would I go about setting the alpha value of a pygame shape: <code>pygame.draw.circle()</code></p>\n<p>I tried using an RGBA value, but to no avail.. here is the draw code:</p>\n<pre><code class=\"python\">pygame.draw.circle(screen, ((0,255,0,alpha)), (px,py), 15)\n</code></pre>\n<p><code>px</code> and <code>py</code> are the player's (circle's) position. <code>alpha</code> is just a place holder for what I thought would be an alpha value.</p>\n<p>Anyone got any ideas?</p>\n", "abstract": "How would I go about setting the alpha value of a pygame shape: pygame.draw.circle() I tried using an RGBA value, but to no avail.. here is the draw code: px and py are the player's (circle's) position. alpha is just a place holder for what I thought would be an alpha value. Anyone got any ideas?"}, "answers": [{"id": 19968328, "score": 5, "vote": 0, "content": "<p><code>draw.circle()</code> doesn't use <code>alpha</code> so you have to draw on <code>Surface()</code> (to get bitmap) and add <code>alpha</code> and <code>colorkey</code> to <code>Surface()</code></p>\n<pre><code class=\"python\">import pygame\n\npygame.init()\n\nscreen = pygame.display.set_mode((800, 600), 0, 32)\n\nsurface1 = pygame.Surface((100,100))\nsurface1.set_colorkey((0,0,0))\nsurface1.set_alpha(128)\npygame.draw.circle(surface1, (0,255,0), (50,50), 50)\n\nsurface2 = pygame.Surface((100,100))\nsurface2.set_colorkey((0,0,0))\nsurface2.set_alpha(128)\npygame.draw.circle(surface2, (255,0,0), (50,50), 50)\n\nscreen.blit(surface1, (100,100))\nscreen.blit(surface2, (120,120))\n\npygame.display.update()\n\nRUNNING = True\n\nwhile RUNNING:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            RUNNING = False\n\npygame.quit()\n</code></pre>\n", "abstract": "draw.circle() doesn't use alpha so you have to draw on Surface() (to get bitmap) and add alpha and colorkey to Surface()"}, {"id": 19968388, "score": 1, "vote": 0, "content": "<p><a href=\"http://www.pygame.org/docs/ref/draw.html#pygame.draw.circle\" rel=\"nofollow\">pygame.draw.circle</a></p>\n<p>It seems the circle() function do not support alpha. If you want to draw translucent circle by pygame, you can load a image which include alpha(i.e PNG) as a surface and then set the alpha value.</p>\n", "abstract": "pygame.draw.circle It seems the circle() function do not support alpha. If you want to draw translucent circle by pygame, you can load a image which include alpha(i.e PNG) as a surface and then set the alpha value."}]}, {"link": "https://stackoverflow.com/questions/49098518/specifying-a-rectangle-around-a-binary-object-to-define-a-spatially-constrained", "question": {"id": "49098518", "title": "Specifying a rectangle around a binary object to define a spatially-constrained area?", "content": "<p>I am programming in python. I have the coordinate of the center of the object in a binary image. How can I define a bounding box area around the object in python, which starts from left-top most nonzero point and ends in right-bottom most point? </p>\n<p>I want to consider a rectangle area around the object to spatially and virtually constrain the working area for an algorithm. For this purpose, how to check whether a point is falling in that region or not? </p>\n<p>Your help is appreciated</p>\n", "abstract": "I am programming in python. I have the coordinate of the center of the object in a binary image. How can I define a bounding box area around the object in python, which starts from left-top most nonzero point and ends in right-bottom most point?  I want to consider a rectangle area around the object to spatially and virtually constrain the working area for an algorithm. For this purpose, how to check whether a point is falling in that region or not?  Your help is appreciated"}, "answers": [{"id": 49099600, "score": 3, "vote": 0, "content": "<p>I found out very simple way:</p>\n<p>First, I found the indices of nonzero values (here my values are 1) by using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.argwhere.html#numpy-argwhere\" rel=\"nofollow noreferrer\">numpy.argwhere</a></p>\n<pre><code class=\"python\">pp=np.argwhere(img==1)\n</code></pre>\n<p>It will give coordinates like this:</p>\n<pre><code class=\"python\">[[ 95  63]\n [ 95  64]\n [ 95  65]\n ...\n [197  71]\n [198  68]\n [198  69]]\n</code></pre>\n<p>and then,</p>\n<pre><code class=\"python\">min_point=np.min(pp[:],axis=0)   #output: [95  0] \nmax_point=np.max(pp[:],axis=0)   #output: [198 123]\nheight=max_point[0]-min_point[0]+1  #height=104\nwidth=max_point[1]-min_point[1]+1  #width=124\n</code></pre>\n<p>the starting point is (0,95) and ending point is (123,198), I am showing in a figure:</p>\n<pre><code class=\"python\">from matplotlib.patches import Rectangle\nfig, ax = plt.subplots(1)\nax.imshow(img, cmap=plt.cm.gray)\nax.axis('off')\nax.add_patch(Rectangle((0,95),124,104,alpha=0.6))\nplt.show(fig)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/kVrc3.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/kVrc3.png\"/></a></p>\n", "abstract": "I found out very simple way: First, I found the indices of nonzero values (here my values are 1) by using numpy.argwhere It will give coordinates like this: and then, the starting point is (0,95) and ending point is (123,198), I am showing in a figure: "}, {"id": 49210161, "score": 2, "vote": 0, "content": "<p>You can use the <code>boundingRect</code> function as described in this <a href=\"https://docs.opencv.org/3.1.0/dd/d49/tutorial_py_contour_features.html\" rel=\"nofollow noreferrer\"><em>Contour Features</em> tutorial</a>: </p>\n<p>The <code>img.png</code> is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/zOiga.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/zOiga.png\"/></a></p>\n<pre><code class=\"python\">import cv2\nimport numpy as np\n\nimg = cv2.imread('img.png')\nactive_px = np.argwhere(img!=0)\nactive_px = active_px[:,[1,0]]\nx,y,w,h = cv2.boundingRect(active_px)\ncv2.rectangle(img,(x,y),(x+w,y+h),(255,0,0),1)\ncv2.imwrite('result.png',img)\n</code></pre>\n<p><code>result.png</code> is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/BieoE.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/BieoE.png\"/></a></p>\n", "abstract": "You can use the boundingRect function as described in this Contour Features tutorial:  The img.png is the following:  result.png is the following: "}, {"id": 49098617, "score": 0, "vote": 0, "content": "<p>Off the top of my head, since you know the center of the object but not its shape or its height/width, I would do this by finding the connected components in the image. In Opencv, this can be done via the <code>connectedComponents</code> function. Take a look at <a href=\"https://stackoverflow.com/questions/35854197/how-to-use-opencvs-connected-components-with-stats-in-python\">this</a> post for an example explaining how to call it from python. This function is quite optimized so unless you want to do real-time compute-intensive optimization you can use it without noticing any overhead.</p>\n<p>Once you have the connected components, you can order the pixels of each component (once according to the horizontal component, and once according to the vertical one), and get a bounding box of the form <code>[left,right,top,bottom]</code>. After that, checking whether a point falls inside it is trivial. </p>\n", "abstract": "Off the top of my head, since you know the center of the object but not its shape or its height/width, I would do this by finding the connected components in the image. In Opencv, this can be done via the connectedComponents function. Take a look at this post for an example explaining how to call it from python. This function is quite optimized so unless you want to do real-time compute-intensive optimization you can use it without noticing any overhead. Once you have the connected components, you can order the pixels of each component (once according to the horizontal component, and once according to the vertical one), and get a bounding box of the form [left,right,top,bottom]. After that, checking whether a point falls inside it is trivial. "}]}, {"link": "https://stackoverflow.com/questions/42935318/pygame-move-a-rectangle-and-remove-the-old-rectangle-in-precedent-position", "question": {"id": "42935318", "title": "Pygame, move a rectangle and remove the old rectangle in precedent position", "content": "<p>I'm writing this code because I want to move a rectangle using the arrow keys.\nIt works, but the loop cycle doesn't move the rectangle, instead it creates a new one every time. The result is like a contrail. You can see it in the pic:<a href=\"https://i.stack.imgur.com/QXzZx.png\" rel=\"nofollow noreferrer\">the result of the code after some key pressure</a></p>\n<p>Here the code I wrote:</p>\n<pre><code class=\"python\">import sys\nimport pygame\n\npygame.init()\npygame.display.set_caption('SAGA')\nclock=pygame.time.Clock()\nFPS=30\n#the initial position\nPOS_X=300\nPOS_Y=300\nship = pygame.image.load(\"fighter_0.png\")\n\nwhile True:\n    #if cycle for detect the key pressure\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n        if event.type == pygame.KEYDOWN:\n            if event.key ==pygame.K_UP:\n                POS_Y=POS_Y-10\n        if event.type == pygame.KEYDOWN:\n            if event.key ==pygame.K_DOWN:\n                POS_Y=POS_Y+10\n        if event.type == pygame.KEYDOWN:\n            if event.key ==pygame.K_RIGHT:\n                POS_X=POS_X+10\n        if event.type == pygame.KEYDOWN:\n            if event.key ==pygame.K_LEFT:\n                POS_X=POS_X-10\n    #here i draw the rectangle \n    pygame.draw.rect(screen,(255,255,255),(POS_X,POS_Y,30,30))\n    clock.tick(FPS)\n    pygame.display.update()\npygame.quit()\n</code></pre>\n<p>I think I don't understand some principle of pygame, but honestly I don't know which one.</p>\n", "abstract": "I'm writing this code because I want to move a rectangle using the arrow keys.\nIt works, but the loop cycle doesn't move the rectangle, instead it creates a new one every time. The result is like a contrail. You can see it in the pic:the result of the code after some key pressure Here the code I wrote: I think I don't understand some principle of pygame, but honestly I don't know which one."}, "answers": [{"id": 42935530, "score": 3, "vote": 0, "content": "<p>It's doing exactly what you told it to do: draw a new rectangle each time.  Computers are frustrating that way.  You used <strong>draw</strong> instead of moving an object.</p>\n<p>To fix this, you have two basic alternatives:</p>\n<ol>\n<li>In each iteration, first obliterate the previous rectangle with one that matches the background (black).  <em>Then</em> draw the new rectangle.</li>\n<li>Use a movable object, such as a sprite, and update your game with the <strong>move</strong> method instead of redrawing.  If you search StackOverflow or the internet for \"pygame move object\" you'll likely find a lot of code you can adapt for this purpose.</li>\n</ol>\n", "abstract": "It's doing exactly what you told it to do: draw a new rectangle each time.  Computers are frustrating that way.  You used draw instead of moving an object. To fix this, you have two basic alternatives:"}, {"id": 42935567, "score": 2, "vote": 0, "content": "<p>Each time you run your loop, you draw over the old screen's image. So in your case you are drawing rectangles on top of the previous rectangles. You need to clear the screen of what was there on the previous iteration of the loop. The easiest way to do this is to fill the screen with a single colour or image:</p>\n<pre><code class=\"python\">import sys\nimport pygame\n\n# Colours\nblack = [0, 0, 0]\n\npygame.init()\nscreen = pygame.display.set_mode((640,480))\npygame.display.set_caption('SAGA')\nclock=pygame.time.Clock()\nFPS=30\n#the initial position\nPOS_X=300\nPOS_Y=300\nship = pygame.image.load(\"fighter_0.png\")\n\nwhile True:\n    #if cycle for detect the key pressure\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n        if event.type == pygame.KEYDOWN:\n            if event.key ==pygame.K_UP:\n                POS_Y=POS_Y-10\n        if event.type == pygame.KEYDOWN:\n            if event.key ==pygame.K_DOWN:\n                POS_Y=POS_Y+10\n        if event.type == pygame.KEYDOWN:\n            if event.key ==pygame.K_RIGHT:\n                POS_X=POS_X+10\n        if event.type == pygame.KEYDOWN:\n            if event.key ==pygame.K_LEFT:\n                POS_X=POS_X-10\n    #here i draw the rectangle \n    screen.fill(black) # Fill the entire screen with black\n    pygame.draw.rect(screen,(255,255,255),(POS_X,POS_Y,30,30))\n    clock.tick(FPS)\n    pygame.display.update()\npygame.quit()\n</code></pre>\n", "abstract": "Each time you run your loop, you draw over the old screen's image. So in your case you are drawing rectangles on top of the previous rectangles. You need to clear the screen of what was there on the previous iteration of the loop. The easiest way to do this is to fill the screen with a single colour or image:"}]}, {"link": "https://stackoverflow.com/questions/22001870/the-pygame-drawing-functions-leave-pixel-wide-gaps-why", "question": {"id": "22001870", "title": "The pygame drawing functions leave pixel-wide gaps. Why?", "content": "<p>After converting a piece of code (that animates a pattern of rectangles) from Java to Python, I noticed that the animation that the code produced seemed quite glitchy. I managed to reproduce the problem with a minimal example as follows:</p>\n<pre><code class=\"python\">import pygame\nSIZE = 200\npygame.init()\nDISPLAYSURF = pygame.display.set_mode((SIZE, SIZE))\nD = 70.9\nxT = 0.3\nyT = 0\n#pygame.draw.rect(DISPLAYSURF, (255,0,0),     (0, 0, SIZE, SIZE))\npygame.draw.rect(DISPLAYSURF, (255,255,255), (xT,   yT,   D, D))\npygame.draw.rect(DISPLAYSURF, (255,255,255), (xT+D, yT+D, D, D))\npygame.draw.rect(DISPLAYSURF, (0,0,0),       (xT,   yT+D, D, D))\npygame.draw.rect(DISPLAYSURF, (0,0,0),       (xT+D, yT,   D, D))\npygame.display.update()\n</code></pre>\n<p>This code generates the following image:</p>\n<p><img src=\"https://i.imgur.com/Qhuk4Ne.png\"/></p>\n<p>Notice that the squares don't line up perfectly in the middle. Uncommenting the commented line in the code above results in the following image, which serves to illuminate the problem further:</p>\n<p><img src=\"https://i.imgur.com/jtIcO1t.png\"/></p>\n<p>It seems that there are pixel-wide gaps in the black and white pattern, even though it can be seen in the code (by the data that is passed in the calls to pygame.draw.rect()) that this shouldn't be the case. What is the reason for this behaviour, and how can I fix it?</p>\n<p>(This didn't happen in Java, <a href=\"http://pastebin.com/52PuNjEr\" rel=\"nofollow noreferrer\">here</a> is a piece of Java code corresponding to the Python code above).</p>\n", "abstract": "After converting a piece of code (that animates a pattern of rectangles) from Java to Python, I noticed that the animation that the code produced seemed quite glitchy. I managed to reproduce the problem with a minimal example as follows: This code generates the following image:  Notice that the squares don't line up perfectly in the middle. Uncommenting the commented line in the code above results in the following image, which serves to illuminate the problem further:  It seems that there are pixel-wide gaps in the black and white pattern, even though it can be seen in the code (by the data that is passed in the calls to pygame.draw.rect()) that this shouldn't be the case. What is the reason for this behaviour, and how can I fix it? (This didn't happen in Java, here is a piece of Java code corresponding to the Python code above)."}, "answers": [{"id": 22008777, "score": 5, "vote": 0, "content": "<p>Looking at the rendered picture in an image editor, the pixel distances can be confirmed as such:</p>\n<p><img alt=\"Picture with measurements\" src=\"https://i.stack.imgur.com/5gJKa.png\"/></p>\n<p>Expanding the function calls (i.e. performing the additions manually), one can see that the input arguments to draw the white rectangles are of the form</p>\n<pre><code class=\"python\">pygame.draw.rect(DISPLAYSURF, (255,255,255), ( 0.3,    0, 70.9, 70.9))\npygame.draw.rect(DISPLAYSURF, (255,255,255), (71.2, 70.9, 70.9, 70.9))\n</code></pre>\n<p>Since fractions of pixels do not make sense screen-wise, the input must be discretized in some way. Pygame (or SDL, as mentioned in the comments to the question) seems to choose truncating, which in practice transforms the drawing commands to:</p>\n<pre><code class=\"python\">pygame.draw.rect(DISPLAYSURF, (255,255,255), ( 0,  0, 70, 70))\npygame.draw.rect(DISPLAYSURF, (255,255,255), (71, 70, 70, 70))\n</code></pre>\n<p>which corresponds to the dimensions in the rendered image. If AWT draws it differently, my guess is that it uses rounding (of some sort) instead of truncating. This could be investigated by trying different rendering inputs, or by digging in the documentation.</p>\n<p>If one wants pixel perfect rendering, using floating points as input is not well defined. If one keeps to the integers, the result should be independent of renderer, though.</p>\n<hr/>\n<p><strong>EDIT</strong>: I expand a bit if anyone else finds this, since I couldn't find much info on this behavior apart from the source code.</p>\n<p>The function call in question takes the following input arguments (<a href=\"http://www.pygame.org/docs/ref/draw.html#pygame.draw.rect\" rel=\"nofollow noreferrer\">documentation</a>):</p>\n<pre><code class=\"python\">pygame.draw.rect(Surface, color, Rect, width=0)\n</code></pre>\n<p>where <code>Rect</code> is a specific object defined by a top-left coordinate, a width and a height. By design it only handles integer attributes, since it is meant as a low-level \"this is what you see on the screen\" data type. The data type handles floats by truncating:</p>\n<pre><code class=\"python\">&gt;&gt;&gt; import pygame\n&gt;&gt;&gt; r = pygame.Rect((1, 1, 8, 12))\n&gt;&gt;&gt; r.bottomright\n(9, 13)\n&gt;&gt;&gt; r.bottomright = (9.9, 13.5)\n&gt;&gt;&gt; r.bottomright\n(9, 13)\n&gt;&gt;&gt; r.bottomright = (11.9, 13.5)\n&gt;&gt;&gt; r.bottomright\n(11, 13)\n</code></pre>\n<p>i.e., a regular <code>(int)</code> cast is done.</p>\n<p>The <code>Rect</code> object is not meant as a \"store the coordinates for my sprite\" object, but as a \"this is what the screen will represent\" object. Floating points are certainly useful for the former purpose, and the designer would probably want to keep an internal list of floats to store this information. Otherwise, incrementing a screen position by e.g. <code>r.left += 0.8</code> (where <code>r</code> is the <code>Rect</code> object) would never move <code>r</code> at all.</p>\n<p>The problem in the question comes from (quite reasonably) assuming that the right <code>x</code> coordinate of the rectangle will at least be calculated as something like <code>x\u2082 = int(x\u2081 + width)</code>, but since the function call implicitly transforms the input tuple to a <code>Rect</code> object before proceeding, and since <code>Rect</code> will truncate its input arguments, it will instead calculate it as <code>x\u2082 = int(x\u2081) + int(width)</code>, which  is not always the same for float input.</p>\n<p>To create a <code>Rect</code> using rounding rules, one could e.g. define a wrapper like:</p>\n<pre><code class=\"python\">def rect_round(x1, y1, w, h):\n    \"\"\"Returns pygame.Rect object after applying sane rounding rules.\n\n    Args:\n        x1, y1, w, h:\n            (x1, y1) is the top-left coordinate of the rectangle,\n            w is width,\n            h is height.\n\n    Returns:\n        pygame.Rect object.\n    \"\"\"\n    r_x1 = round(x1)\n    r_y1 = round(y1)\n    r_w = round(x1 - r_x1 + w)\n    r_h = round(y1 - r_y1 + h)\n    return pygame.Rect(map(int, (r_x1, r_y1, r_w, r_h)))\n</code></pre>\n<p>(or modified for other rounding rules) and then call the draw function as e.g.</p>\n<pre><code class=\"python\">pygame.draw.rect(DISPLAYSURF, (255,255,255), rect_round(71.2, 70.9, 70.9, 70.9))\n</code></pre>\n<p>One will never bypass the fact that the pixel by definition is the smallest addressable unit on the screen, though, so this solution might also have its quirks.</p>\n<hr/>\n<p>Related thread on the Pygame mailing list from 2005: <a href=\"http://osdir.com/ml/python.pygame/2005-04/msg00029.html\" rel=\"nofollow noreferrer\">Suggestion: make Rect use float coordinates</a></p>\n", "abstract": "Looking at the rendered picture in an image editor, the pixel distances can be confirmed as such:  Expanding the function calls (i.e. performing the additions manually), one can see that the input arguments to draw the white rectangles are of the form Since fractions of pixels do not make sense screen-wise, the input must be discretized in some way. Pygame (or SDL, as mentioned in the comments to the question) seems to choose truncating, which in practice transforms the drawing commands to: which corresponds to the dimensions in the rendered image. If AWT draws it differently, my guess is that it uses rounding (of some sort) instead of truncating. This could be investigated by trying different rendering inputs, or by digging in the documentation. If one wants pixel perfect rendering, using floating points as input is not well defined. If one keeps to the integers, the result should be independent of renderer, though. EDIT: I expand a bit if anyone else finds this, since I couldn't find much info on this behavior apart from the source code. The function call in question takes the following input arguments (documentation): where Rect is a specific object defined by a top-left coordinate, a width and a height. By design it only handles integer attributes, since it is meant as a low-level \"this is what you see on the screen\" data type. The data type handles floats by truncating: i.e., a regular (int) cast is done. The Rect object is not meant as a \"store the coordinates for my sprite\" object, but as a \"this is what the screen will represent\" object. Floating points are certainly useful for the former purpose, and the designer would probably want to keep an internal list of floats to store this information. Otherwise, incrementing a screen position by e.g. r.left += 0.8 (where r is the Rect object) would never move r at all. The problem in the question comes from (quite reasonably) assuming that the right x coordinate of the rectangle will at least be calculated as something like x\u2082 = int(x\u2081 + width), but since the function call implicitly transforms the input tuple to a Rect object before proceeding, and since Rect will truncate its input arguments, it will instead calculate it as x\u2082 = int(x\u2081) + int(width), which  is not always the same for float input. To create a Rect using rounding rules, one could e.g. define a wrapper like: (or modified for other rounding rules) and then call the draw function as e.g. One will never bypass the fact that the pixel by definition is the smallest addressable unit on the screen, though, so this solution might also have its quirks. Related thread on the Pygame mailing list from 2005: Suggestion: make Rect use float coordinates"}]}, {"link": "https://stackoverflow.com/questions/16994243/pygame-not-filled-shapes-python", "question": {"id": "16994243", "title": "pygame not filled shapes (Python)", "content": "<p>If I want to craw a circle, I use the regualr draw.circle but the problem is that I don't want it filled so I draw a smaller circle inside of it, it makes a circle with thickness.</p>\n<p>Everything is good right? no. The background image inside that circle disappeared because the circles are filled.</p>\n<p><em><strong>Now my question is: There is a function that draws a circle (and other shapes[?]) that gets thick and not filling the whole inside of the shape?</strong></em></p>\n<p>EDIT: If you can give me the signature so I know how to use it.</p>\n", "abstract": "If I want to craw a circle, I use the regualr draw.circle but the problem is that I don't want it filled so I draw a smaller circle inside of it, it makes a circle with thickness. Everything is good right? no. The background image inside that circle disappeared because the circles are filled. Now my question is: There is a function that draws a circle (and other shapes[?]) that gets thick and not filling the whole inside of the shape? EDIT: If you can give me the signature so I know how to use it."}, "answers": [{"id": 17000916, "score": 5, "vote": 0, "content": "<p>The command is <code>pygame.draw.circle(Surface, color, pos, radius, width=0)</code>.  The last argument of width can be changed to not fill the circle in.  If it is zero, the circle is solid and if it is anything else it is with an edge thickness of whatever the parameter is.</p>\n", "abstract": "The command is pygame.draw.circle(Surface, color, pos, radius, width=0).  The last argument of width can be changed to not fill the circle in.  If it is zero, the circle is solid and if it is anything else it is with an edge thickness of whatever the parameter is."}]}, {"link": "https://stackoverflow.com/questions/69810519/circle-not-being-drawn-at-the-correct-position-pygame", "question": {"id": "69810519", "title": "Circle not being drawn at the correct position pygame", "content": "<p>problem in my tic tac toe project once again, the circle isnt appearing where it should when I click a square, i tried multiple different coordinates but still cant figure it out, so if any of you know what to do then let me know, thanks.</p>\n<pre><code class=\"python\">import pygame, sys\nimport numpy as np\npygame.init()\n\nscreen_color = (28, 170, 156)\nline_color = (23, 140, 135)\nline_width = 9\n\nscreen = pygame.display.set_mode((550, 450))\npygame.display.set_caption(\"Tic Tac Toe\")\nscreen.fill(screen_color)\nboard = np.zeros((3, 3))\n\n\ndef draw_lines():\n    #1st horizontal\n    pygame.draw.line(screen, line_color, (0, 135), (550, 135), line_width)\n    #2nd horizontal\n    pygame.draw.line(screen, line_color, (0, 300), (550, 300), line_width)\n    #1st vertical\n    pygame.draw.line(screen, line_color, (175, 0), (175, 450), line_width)\n    #2nd vertical\n    pygame.draw.line(screen, line_color, (370, 0), (370, 450), line_width)\n\ndef draw_figures():\n    for row in range(3):\n        for col in range(3):\n            if board[row][col] == 1:\n                pygame.draw.circle(screen, 'cyan', (int(col * 550/3), int(row * 450/3)), 60, 10)\n            \n\ndef mark_square(row, col, player):\n    board[row][col] = player\n\ndef available_square(row, col):\n    if board[row][col] == 0:\n        return True\n\n    else:\n        return False\n\ndef is_board_full():\n    for row in range(3):\n        for col in range(3):\n            if board[row][col] == 0:\n                return False\n\nprint(is_board_full())\nprint(board)\ndraw_lines()\n\nplayer = 1\n\nwhile True:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            sys.exit()\n\n        if event.type == pygame.MOUSEBUTTONDOWN:\n            mouseX = event.pos[0] #X coordinate\n            mouseY = event.pos[1] #Y coordinate\n\n            clicked_row = int(mouseY * 3 // 450)\n            clicked_col = int(mouseX * 3 // 550)\n\n            #print(clicked_col)\n            #print(clicked_row)\n\n            if available_square(clicked_row, clicked_col):\n                if player == 1:\n                    mark_square(clicked_row, clicked_col, 1)\n                    player = 2\n                \n                elif player == 2:\n                    mark_square(clicked_row, clicked_col, 2)\n                    player = 1\n\n                draw_figures()\n                print(board)\n\n    pygame.display.update()\n\n</code></pre>\n<p>(if there any other errors let me know too)\nalso let me know if getting the coordinates is trial and error or there is a specific way to do it, thanks!</p>\n", "abstract": "problem in my tic tac toe project once again, the circle isnt appearing where it should when I click a square, i tried multiple different coordinates but still cant figure it out, so if any of you know what to do then let me know, thanks. (if there any other errors let me know too)\nalso let me know if getting the coordinates is trial and error or there is a specific way to do it, thanks!"}, "answers": [{"id": 69810661, "score": 2, "vote": 0, "content": "<p>The problem is that the circle is centered on the grid and on on the middle of the squares.\nYou need to add an offset to the center like this:</p>\n<pre><code class=\"python\">pygame.draw.circle(screen, 'cyan', (int(col * 550/3 + x_offset), int(row * 450/3 + y_offset)), 60, 10)\n</code></pre>\n<p>I would also recommend you to create a variable called grid_width so that you don't need to have numbers like 550 or 450 everywhere in your programm.</p>\n", "abstract": "The problem is that the circle is centered on the grid and on on the middle of the squares.\nYou need to add an offset to the center like this: I would also recommend you to create a variable called grid_width so that you don't need to have numbers like 550 or 450 everywhere in your programm."}, {"id": 69810670, "score": 2, "vote": 0, "content": "<p>The 3rd argument of <code>pygame.draw.circle</code> is the center of the circle. Draw the circle at (col + 0.5) and (row + 0.5):</p>\n<p><s><code>pygame.draw.circle(screen, 'cyan', (int(col * 550/3), int(row * 450/3)), 60, 10)</code></s></p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">pygame.draw.circle(screen, 'cyan', (int((col + 0.5) * 550/3), int((row+0.5) * 450/3)), 60, 10)\n</code></pre>\n", "abstract": "The 3rd argument of pygame.draw.circle is the center of the circle. Draw the circle at (col + 0.5) and (row + 0.5): pygame.draw.circle(screen, 'cyan', (int(col * 550/3), int(row * 450/3)), 60, 10)"}]}, {"link": "https://stackoverflow.com/questions/63911375/what-is-the-quickest-way-to-draw-multiple-circles-in-pygame", "question": {"id": "63911375", "title": "What is the quickest way to draw multiple circles in pygame?", "content": "<p>I am making an agario clone for a project and I was wondering what the quickest way to draw many dots in pygame.</p>\n<pre><code class=\"python\">from pygame import *\nimport random as rd \n\nx = rd.randint(100, 700)\ny = rd.randint(100, 500)\n\n\n# I would like to draw about 50 dots of this type. \ndot = draw.circle(screen, (0, 0, 0), (x, y), 5)\n</code></pre>\n", "abstract": "I am making an agario clone for a project and I was wondering what the quickest way to draw many dots in pygame."}, "answers": [{"id": 63911508, "score": 2, "vote": 0, "content": "<p>Here's some basic code to draw circles using pygame:</p>\n<pre><code class=\"python\">import pygame as pg\nimport random as rd \n\npg.init()  # initialize pygame  \nscreen = pg.display.set_mode((500,500))  # create main screen\n\nfor ctr in range(25):  # 25 circles\n    x = rd.randint(50, 450)\n    y = rd.randint(50, 450)\n   \n    # I would like to draw about 50 dots of this type. \n    dot = pg.draw.circle(screen, (100, 200, 100), (x, y), 15)\n    pg.display.update()  # update screen\n    \nwhile True:  # main pygame loop, always include this\n    for event in pg.event.get(): # required for OS events\n      if event.type == pg.QUIT:  # user closed window\n         pg.quit()\n</code></pre>\n<p>Output</p>\n<p><a href=\"https://i.stack.imgur.com/aeTjk.png\" rel=\"nofollow noreferrer\"><img alt=\"Circles\" src=\"https://i.stack.imgur.com/aeTjk.png\"/></a></p>\n", "abstract": "Here's some basic code to draw circles using pygame: Output "}, {"id": 63911495, "score": 1, "vote": 0, "content": "<p>Any easy way to do this to use a simple python <a href=\"https://wiki.python.org/moin/ForLoop\" rel=\"nofollow noreferrer\">\"for\" loop with a \"range\"</a>:</p>\n<p>As the loop iterates, it executes the content of the loop body, with the variable <code>i</code> incrementing from 0 to <em>N-1</em> (i.e. 49).  The variable <code>i</code> could be any valid variable name, but for simple numbered loops, <code>i</code>, <code>j</code> &amp; <code>k</code> are commonly used.</p>\n<pre><code class=\"python\">from pygame import *\nimport random as rd \n\n# Draw 50 dots \nfor i in range( 0, 50 ):\n    x = rd.randint(100, 700)\n    y = rd.randint(100, 500)\n    dot = draw.circle(screen, (0, 0, 0), (x, y), 5)\n</code></pre>\n", "abstract": "Any easy way to do this to use a simple python \"for\" loop with a \"range\": As the loop iterates, it executes the content of the loop body, with the variable i incrementing from 0 to N-1 (i.e. 49).  The variable i could be any valid variable name, but for simple numbered loops, i, j & k are commonly used."}, {"id": 64013769, "score": 1, "vote": 0, "content": "<p>I made a class for dots:</p>\n<pre><code class=\"python\">class Dot():\n    SIZE = 5\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n    def draw(self):\n        draw.circle(screen, self.color, (self.x, self.y), Dot.SIZE)\n</code></pre>\n<p>Then I made an array and generate <code>NUMBER_OF_DOTS</code> like this:</p>\n<pre><code class=\"python\">dots = []\n\nfor i in range(NUMBER_OF_DOTS):\n    x = rd.randint(100, 700)\n    y = rd.randint(100, 500)\n    dots.append(Dot(x,y))\n</code></pre>\n<p>and in the <code>while</code> loop and redraw after filling the whole scene by white color:</p>\n<p>while True:\nscreen.fill((255, 255, 255))\n...\nfor dot in dots:\ndot.draw()</p>\n<p>The whole source:</p>\n<pre><code class=\"python\">from pygame import *\nimport random as rd\n\nSCREEN_WIDTH = 800\nSCREEN_HEIGHT = 600\nNUMBER_OF_DOTS = 300\n\nclass Dot():\n    SIZE = 5\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n        self.color = random_color()\n\n    def draw(self):\n        draw.circle(screen, self.color, (self.x, self.y), Dot.SIZE)\n    \ndef random_color():\n    r = rd.randint(0, 255)\n    g = rd.randint(0, 255)\n    b = rd.randint(0, 255)\n    return (r, g, b)\n\n\ninit()\nscreen = display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))\n\ndots = []\n\n# generate random dots all over the screen\nfor i in range(NUMBER_OF_DOTS):\n    x = rd.randint(100, 700)\n    y = rd.randint(100, 500)\n    dots.append(Dot(x,y))\n\n\n# main while loop\nwhile True:\n    screen.fill((255, 255, 255))\n    \n    for dot in dots:\n        dot.draw()\n\n\n    display.update()\n    time.delay(1) # Speed down\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/LO8Ei.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/LO8Ei.png\"/></a></p>\n", "abstract": "I made a class for dots: Then I made an array and generate NUMBER_OF_DOTS like this: and in the while loop and redraw after filling the whole scene by white color: while True:\nscreen.fill((255, 255, 255))\n...\nfor dot in dots:\ndot.draw() The whole source: "}, {"id": 63913224, "score": 0, "vote": 0, "content": "<p>If you want to draw the same circles continuously in the main application loop, then you've to generate a list of random positions:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">import pygame as pg\nimport random as rd \n\npg.init()\nscreen = pg.display.set_mode((800,600))\n\ncpts = []\nfor i in range(25):\n    x = rd.randint(100, 700)\n    y = rd.randint(100, 500)\n    cpts.append((x, y))\n    \nrun = True\nwhile run: \n    for event in pg.event.get(): \n        if event.type == pg.QUIT: \n            run = False\n\n    for cpt in cpts: \n        pg.draw.circle(screen, (255, 255, 255), cpt, 15)\n    pg.display.update()\n</code></pre>\n<p>See the answer to <a href=\"https://stackoverflow.com/questions/63540062/pygame-unresponsive-display/63540113?noredirect=1\">Pygame unresponsive display</a> for a minimum pygame application.</p>\n", "abstract": "If you want to draw the same circles continuously in the main application loop, then you've to generate a list of random positions: See the answer to Pygame unresponsive display for a minimum pygame application."}]}, {"link": "https://stackoverflow.com/questions/30921359/error-while-drawing-net-in-caffe", "question": {"id": "30921359", "title": "Error while drawing net in Caffe", "content": "<p>I'm trying to draw my net in Caffe. The net is defined in <code>expt/expt.prototxt</code> and the desired image path is <code>expt/net.png</code>. When I run the command <code>./python/draw_net.py expt/expt.prototxt expt/net.png</code>, I get the following error:</p>\n<pre><code class=\"python\">Couldn't import dot_parser, loading of dot files will not be possible.\nDrawing net to expt/net.png\nTraceback (most recent call last):\n  File \"./python/draw_net.py\", line 44, in &lt;module&gt;\n    main()\n  File \"./python/draw_net.py\", line 40, in main\n    caffe.draw.draw_net_to_file(net, args.output_image_file, args.rankdir)\n  File \"/home/pras/caffe/python/caffe/draw.py\", line 165, in draw_net_to_file\n    fid.write(draw_net(caffe_net, rankdir, ext))\n  File \"/home/pras/caffe/python/caffe/draw.py\", line 156, in draw_net\n    return get_pydot_graph(caffe_net, rankdir).create(format=ext)\n  File \"/home/pras/anaconda/lib/python2.7/site-packages/pydot.py\", line 1727, in create\n    'GraphViz\\'s executables not found' )\npydot.InvocationException: GraphViz's executables not found\n</code></pre>\n<p>I'm running Caffe on Ubuntu 14.04 in CPU mode using the Anaconda Python interface. Any ideas why this error might be occuring and how to go about correcting it?</p>\n", "abstract": "I'm trying to draw my net in Caffe. The net is defined in expt/expt.prototxt and the desired image path is expt/net.png. When I run the command ./python/draw_net.py expt/expt.prototxt expt/net.png, I get the following error: I'm running Caffe on Ubuntu 14.04 in CPU mode using the Anaconda Python interface. Any ideas why this error might be occuring and how to go about correcting it?"}, "answers": [{"id": 30943006, "score": 4, "vote": 0, "content": "<p>The error log mentions that GraphViz's executables are not found. So, I did the following:</p>\n<ol>\n<li>Installed GraphViz on Ubuntu: <code>sudo apt-get install GraphViz</code>.</li>\n<li>Installed GraphViz for Python: <code>pip install GraphViz</code>.</li>\n</ol>\n<p>I'm not sure if step 2 is required or not, but step 1 is definitely required. After doing that, the command to draw the net in Caffe works like a charm!</p>\n", "abstract": "The error log mentions that GraphViz's executables are not found. So, I did the following: I'm not sure if step 2 is required or not, but step 1 is definitely required. After doing that, the command to draw the net in Caffe works like a charm!"}]}, {"link": "https://stackoverflow.com/questions/16968226/drawing-a-circle-at-my-mouse-location-when-i-hit-the-space-bar-pygame", "question": {"id": "16968226", "title": "Drawing a circle at my mouse location when I hit the space bar (Pygame)", "content": "<p>I am attempting to draw circle at the location of my mouse whenever I hit the space bar. The goal is to draw this circle around a character that is following my mouse cursor and kill other objects it comes in contact with. Am I on the right track, also how the heck does drawing a circle work </p>\n<pre><code class=\"python\">import math\nimport pygame, sys, time \nfrom pygame.locals import *\n\npygame.init()\nWINDOW_WIDTH = 1000\nWINDOW_HEIGHT = 600\nsurface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT),0,32)\npygame.display.set_caption('follow mouse')\nsurface.fill((255,255,255))\n\nclass Hero():\n    def Attack(self):\n        for event in pygame.event.get():\n            surface.fill ((255,255,255))\n            amntTuple = pygame.mouse.get_pos()\n            pygame.draw.circle(surface, BLUE, amntTuple, 20, 300)\n            surface.blit (self.space, self.spaceRect)\n            pygame.display.update()\n\nvar = Hero()\nwhile True:\n    for event in pygame.event.get():\n            if event.type == KEYDOWN:\n                if event.key == K_SPACE:\n                    var.Attack()\n</code></pre>\n", "abstract": "I am attempting to draw circle at the location of my mouse whenever I hit the space bar. The goal is to draw this circle around a character that is following my mouse cursor and kill other objects it comes in contact with. Am I on the right track, also how the heck does drawing a circle work "}, "answers": [{"id": 16970470, "score": 4, "vote": 0, "content": "<p>There are a few things you need to change to make it work. I've included a somewhat lengthy explanation behind all of these changes, so that you will be able to understand them and apply them correctly in other parts of your game. If you do not need the extra explanation, you can skip to working code at the bottom of this answer. I've placed comments everywhere I made a change.</p>\n<h2>Event handling</h2>\n<p>Pygame keeps a list of events that happen in the game, such as keypresses. When you call <code>pygame.event.get()</code>, a list of all events that have happened <em>since the last call</em> is returned. This means that in your <code>Attack()</code> function, none of your code is being run because it happens for each event in <code>pygame.event.get()</code>, but <code>pygame.event.get()</code> returns an empty list because you just called it in the while loop. Generally speaking, you should only call <code>pygame.event.get()</code> once per loop, exactly like you have it in the bottom of your code. You should delete the for loop in <code>Attack()</code> because it has no purpose there.</p>\n<h2>Quitting</h2>\n<p>A small inconvenience with pygame is that the close button doesn't work by default, which means you have to forcefully close your game. To fix this, you should check for QUIT events in your event loop, and close the game. Here's an example of how the code would look inserted into your game:</p>\n<pre><code class=\"python\">while True:\n    for event in pygame.event.get():\n            if event.type == QUIT:\n                pygame.quit()\n                sys.exit()\n            if event.type == KEYDOWN:\n                if event.key == K_SPACE:\n                    var.Attack()\n</code></pre>\n<h2>Colors</h2>\n<p>Sadly, Pygame has no built-in Colors, so <code>BLUE</code> in <code>pygame.draw.circle(surface, BLUE, amntTuple, 20, 300)</code> will not work. Instead, replace <code>BLUE</code> with <code>pygame.Color(0,0,255)</code> to create blue yourself, using the RGB color model.</p>\n<h2>Drawing</h2>\n<p>Drawing is done in two steps in Pygame. First, objects are drawn to a virtual surface, which can not be seen. Then, when you call <code>pygame.display.update()</code>, the virtual surface is drawn to the screen, which the user can see. This has technical advantages such as allowing the computer to draw smoothly without screen flickering, but it also means that as long as you don't call <code>pygame.display.update()</code>, nothing you draw will ever be seen.<code>pygame.display.update()</code>, nothing you draw will ever be visible. However, if you call it too many times, your game may flicker or act in unexpected ways. Because of this, you will generally want to call <code>pygame.display.update()</code> exactly once per gameloop (just like with <code>pygame.event.get()</code>). Generally, <code>pygame.display.update()</code> can be the very last line of code in your while loop, with everything else coming before it.</p>\n<p>There are different ways you can do to draw to the screen in Pygame. One way is to use built-in functions like <code>pygame.draw.circle.</code> You were close in your use of it, but made two mistakes. First, BLUE doesn't exist, as I mentioned before. Second, the width parameter is the width of the line used to draw the circle, not the width of the circle itself. So you generally want it to be a small number. If you set the width to 0, the circle will be filled instead of drawn as an outline. Here's a fixed version of your draw.circle: <code>pygame.draw.circle(surface, pygame.Color(0,0,255), amntTuple, 20, 2)</code></p>\n<p>Another way to draw to the screen is with blitting. Everything in Pygame must be drawn to a Surface, which is like a virtual canvas. When you load an image using pygame.image.load(), the image is loaded as a Surface. And once you have a surface, you use blitting to draw it to the screen. For example:</p>\n<pre><code class=\"python\">man = pygame.image.load(\"/images/man.png\")\nsurface.blit (man, (0,0))\n</code></pre>\n<p>would be used to draw an image of a man to the screen at pixels 0,0. This will be useful later in your game development process. However, the blit you currently have right after drawing your circle does nothing and causes errors because <code>self.space</code> and <code>self.spaceRect</code> do not exist, so you should delete it for now.</p>\n<h2>The Working Code</h2>\n<pre><code class=\"python\">import math\nimport pygame, sys, time \nfrom pygame.locals import *\n\npygame.init()\nWINDOW_WIDTH = 1000\nWINDOW_HEIGHT = 600\nsurface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT),0,32)\npygame.display.set_caption('follow mouse')\nsurface.fill((255,255,255))\n\nclass Hero():\n    def Attack(self):\n        surface.fill ((255,255,255))\n        amntTuple = pygame.mouse.get_pos()\n        #Use pygame.Color to make a color.\n        #The last parameter is linewidth, and can be set to 0 for filled circles.\n        pygame.draw.circle(surface, pygame.Color(0,0,255), amntTuple, 20, 2)\n        #The blit was deleted because it did nothing and the broke code.\n\nvar = Hero()\nwhile True:\n    for event in pygame.event.get():\n            #Add a quit event so you can close your game normally.\n            if event.type == QUIT:\n                pygame.quit()\n                sys.exit()\n            if event.type == KEYDOWN:\n                if event.key == K_SPACE:\n                    var.Attack()\n\n    #Update once at the end of each gameloop.\n    pygame.display.update()\n</code></pre>\n", "abstract": "There are a few things you need to change to make it work. I've included a somewhat lengthy explanation behind all of these changes, so that you will be able to understand them and apply them correctly in other parts of your game. If you do not need the extra explanation, you can skip to working code at the bottom of this answer. I've placed comments everywhere I made a change. Pygame keeps a list of events that happen in the game, such as keypresses. When you call pygame.event.get(), a list of all events that have happened since the last call is returned. This means that in your Attack() function, none of your code is being run because it happens for each event in pygame.event.get(), but pygame.event.get() returns an empty list because you just called it in the while loop. Generally speaking, you should only call pygame.event.get() once per loop, exactly like you have it in the bottom of your code. You should delete the for loop in Attack() because it has no purpose there. A small inconvenience with pygame is that the close button doesn't work by default, which means you have to forcefully close your game. To fix this, you should check for QUIT events in your event loop, and close the game. Here's an example of how the code would look inserted into your game: Sadly, Pygame has no built-in Colors, so BLUE in pygame.draw.circle(surface, BLUE, amntTuple, 20, 300) will not work. Instead, replace BLUE with pygame.Color(0,0,255) to create blue yourself, using the RGB color model. Drawing is done in two steps in Pygame. First, objects are drawn to a virtual surface, which can not be seen. Then, when you call pygame.display.update(), the virtual surface is drawn to the screen, which the user can see. This has technical advantages such as allowing the computer to draw smoothly without screen flickering, but it also means that as long as you don't call pygame.display.update(), nothing you draw will ever be seen.pygame.display.update(), nothing you draw will ever be visible. However, if you call it too many times, your game may flicker or act in unexpected ways. Because of this, you will generally want to call pygame.display.update() exactly once per gameloop (just like with pygame.event.get()). Generally, pygame.display.update() can be the very last line of code in your while loop, with everything else coming before it. There are different ways you can do to draw to the screen in Pygame. One way is to use built-in functions like pygame.draw.circle. You were close in your use of it, but made two mistakes. First, BLUE doesn't exist, as I mentioned before. Second, the width parameter is the width of the line used to draw the circle, not the width of the circle itself. So you generally want it to be a small number. If you set the width to 0, the circle will be filled instead of drawn as an outline. Here's a fixed version of your draw.circle: pygame.draw.circle(surface, pygame.Color(0,0,255), amntTuple, 20, 2) Another way to draw to the screen is with blitting. Everything in Pygame must be drawn to a Surface, which is like a virtual canvas. When you load an image using pygame.image.load(), the image is loaded as a Surface. And once you have a surface, you use blitting to draw it to the screen. For example: would be used to draw an image of a man to the screen at pixels 0,0. This will be useful later in your game development process. However, the blit you currently have right after drawing your circle does nothing and causes errors because self.space and self.spaceRect do not exist, so you should delete it for now."}, {"id": 16968270, "score": 0, "vote": 0, "content": "<p>With the following line (the last one in your program):</p>\n<pre><code class=\"python\">var.Attack\n</code></pre>\n<p>You aren't calling the <code>attack</code> function.</p>\n<p>Replace it with </p>\n<pre><code class=\"python\">var.Attack()\n</code></pre>\n<p>and see if that works instead.</p>\n", "abstract": "With the following line (the last one in your program): You aren't calling the attack function. Replace it with  and see if that works instead."}, {"id": 16970475, "score": 0, "vote": 0, "content": "<p>The code is conceptually wrong, you should process events and update display only in the main loop:</p>\n<pre><code class=\"python\">...\nclass Hero():\n    def __init__(self):\n        self.attacks = []\n\n    def attack(self):\n        self.attacks.add(pygame.mouse.get_pos())\n\n    def update(self):\n        for amntTuple in self.attacks:\n            pygame.draw.circle(surface, BLUE, amntTuple, 20, 300)\n            surface.blit(self.space, self.spaceRect)\n\nhero = Hero()\nwhile True:\n    for event in pygame.event.get():\n        if event.type == KEYDOWN:\n            if event.key == K_SPACE:\n                hero.attack()\n\n    # Clean background\n    surface.fill((255,255,255))\n\n    # Update/Draw sprites\n    hero.update()\n\n    # Update screen\n    pygame.display.update()\n</code></pre>\n<p>During events you should only execute game logic to update status, then every frame you draw the screen according to the current status.</p>\n", "abstract": "The code is conceptually wrong, you should process events and update display only in the main loop: During events you should only execute game logic to update status, then every frame you draw the screen according to the current status."}]}, {"link": "https://stackoverflow.com/questions/13527402/how-to-animate-drawings-in-pygame-movement", "question": {"id": "13527402", "title": "How to animate drawings in pygame (movement)", "content": "<p>I have been trying to animate drawing elements without success. I can animate imported images, but when I try to animate drawings generated by pygame they remain static.</p>\n<p>Edit: By \"animate\" I mean \"to move\". As in making a circle move in x and y direction. </p>\n<p>This is my code:  </p>\n<pre><code class=\"python\">import pygame, sys\nfrom pygame.locals import *\n\npygame.init()\n\nFPS = 60\nWIDTH = 600\nHEIGHT = 500\nfpsClock = pygame.time.Clock()\nDISPLAYSURF = pygame.display.set_mode((WIDTH, HEIGHT), 0, 32)\nWHITE = (255, 255, 255)\nBLACK = (0, 0, 0)\nballx = WIDTH / 2\nbally = HEIGHT / 2\nball_vel = [1, 1]\nball_pos =(ballx, bally)\nRADIUS = 20\n\n# Game Loop:\nwhile True:\n    # Check for quit event\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n\n    # Erase the screen (I have tried with and without this step)\n    DISPLAYSURF.fill(BLACK)\n\n    # Update circle position\n    ballx += ball_vel[0]\n    bally += ball_vel[1]\n\n    # Draw Circle (I have tried with and without locks/unlocks)\n    DISPLAYSURF.lock()\n    pygame.draw.circle(DISPLAYSURF, WHITE, ball_pos, RADIUS, 2)\n    DISPLAYSURF.unlock()\n\n    # Update the screen\n    pygame.display.update()\n    fpsClock.tick(FPS)\n</code></pre>\n<p>I've tried with and without locking/unlocking the display surface (as the documentation suggests). I've tried with and without erasing the screen before updating it (as some tutorials suggest). I just can't get it to work.</p>\n<p>What am I doing wrong? How do you animate drawing elements?</p>\n<p>Thanks for your time. </p>\n", "abstract": "I have been trying to animate drawing elements without success. I can animate imported images, but when I try to animate drawings generated by pygame they remain static. Edit: By \"animate\" I mean \"to move\". As in making a circle move in x and y direction.  This is my code:   I've tried with and without locking/unlocking the display surface (as the documentation suggests). I've tried with and without erasing the screen before updating it (as some tutorials suggest). I just can't get it to work. What am I doing wrong? How do you animate drawing elements? Thanks for your time. "}, "answers": [{"id": 13528667, "score": 3, "vote": 0, "content": "<p>You are not updating the ball_pos tuple: you set it to the start coordinates:</p>\n<pre><code class=\"python\">ballx = WIDTH / 2\nbally = HEIGHT / 2\nball_vel = [1, 1]\nball_pos =(ballx, bally)\n</code></pre>\n<p>You later update ballx and bally, but never set ball_pos again to ballx, and bally.\nIn the while loop, after setting the ballx and bally, do this:</p>\n<pre><code class=\"python\">ball_pos = (ballx,bally)\n</code></pre>\n", "abstract": "You are not updating the ball_pos tuple: you set it to the start coordinates: You later update ballx and bally, but never set ball_pos again to ballx, and bally.\nIn the while loop, after setting the ballx and bally, do this:"}, {"id": 24791231, "score": 1, "vote": 0, "content": "<pre><code class=\"python\">import pygame, sys\nfrom pygame.locals import *\n\npygame.init()\n\nFPS = 60\nWIDTH = 600\nHEIGHT = 500\nfpsClock = pygame.time.Clock()\nDISPLAYSURF = pygame.display.set_mode((WIDTH, HEIGHT), 0, 32)\nWHITE = (255, 255, 255)\nBLACK = (0, 0, 0)\nballx = WIDTH / 2\nbally = HEIGHT / 2\nball_vel = [1, 1]\nball_pos =(ballx, bally)\nRADIUS = 20\n\n# Game Loop:\nwhile True:\n    # Check for quit event\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n\n    # Erase the screen (I have tried with and without this step)\n    DISPLAYSURF.fill(BLACK)\n\n    # Update circle position\n    ballx += ball_vel[0]\n    bally += ball_vel[1]\n    ball_pos =(ballx, bally)\n\n    # Draw Circle (I have tried with and without locks/unlocks)\n    pygame.draw.circle(DISPLAYSURF, WHITE, ball_pos, RADIUS, 2)\n\n    # Update the screen\n    pygame.display.flip()\n    fpsClock.tick(FPS)\n</code></pre>\n<p>flip = update()</p>\n", "abstract": "flip = update()"}]}, {"link": "https://stackoverflow.com/questions/65402350/how-to-draw-line-in-each-widget-in-python-kivy", "question": {"id": "65402350", "title": "How to draw line in each widget in Python Kivy", "content": "<p>I'm trying to show binary tree on labels. How can I draw lines inside each label from the center to the right and left edges? The task is very strange, I understand, but you i need to display a self-written tree with the most basic Kivy objects. Kivy trees cannot be used. All solutions on the Internet are only for the touchscreen.</p>\n<p>In this loop i add labels with node value, if node is not found it is 0</p>\n<pre><code class=\"python\">class TreeApp(App):\n    def build(self):\n        bl = BoxLayout(orientation='vertical', padding=5, spacing=5)\n            for i in range(maxdepth):\n                inside_bl = BoxLayout(orientation='horizontal')\n                for j in range(2 ** i):\n                    try: inside_bl.add_widget(Label01(text=str(mx_lvl[i][j]),color=(0.5,0.5,0.5,1)))\n                    except: inside_bl.add_widget(Label111(text=\"0\",color=(0.5,0.5,0.5,0.5)))\n                bl.add_widget(inside_bl)\n        return bl\n</code></pre>\n<p>Here i tried to make class label01. I thought using self. will create its own line for each label and draw relative to the origin or center of the label.</p>\n<pre><code class=\"python\">class Label01(Label):\n    def __init__(self,**kwargs):\n        super(Label01,self).__init__(**kwargs)\n\n        with self.canvas:\n            self.pos = self.pos\n            Color(0,1,0,1)\n            self.line= Line(points=(self.x+100,self.y+100,self.x+250,self.y+250),close = True)\n</code></pre>\n<p>Likewise for label 111. I thought using self. will create its own unique line for each label and draw relative to the origin or center of the label.</p>\n<ul>\n<li>tree.kv</li>\n</ul>\n<pre><code class=\"python\">#:kivy 1.11.1\n&lt;Label111&gt;:\n    canvas.before:\n        Line:\n            \n            width: 2\n            points: (self.x, self.y+50, self.x+200, self.y+100, self.x+300, self.y+200)\n        Color:\n            rgb: (0.9,0.9,0.9,0.9)\n</code></pre>\n<ul>\n<li>main.py:</li>\n</ul>\n<pre><code class=\"python\">class Label111(Label):\n    pass\n</code></pre>\n<p>I thought that when using self. i will get a test line inside each label (31 in total) but i got only 2 lines at the bottom of the window. Question: How do I draw two lines inside each label relative to its center?\n<a href=\"https://i.stack.imgur.com/KOglD.png\" rel=\"nofollow noreferrer\"><img alt=\"Window with only two lines\" src=\"https://i.stack.imgur.com/KOglD.png\"/></a></p>\n", "abstract": "I'm trying to show binary tree on labels. How can I draw lines inside each label from the center to the right and left edges? The task is very strange, I understand, but you i need to display a self-written tree with the most basic Kivy objects. Kivy trees cannot be used. All solutions on the Internet are only for the touchscreen. In this loop i add labels with node value, if node is not found it is 0 Here i tried to make class label01. I thought using self. will create its own line for each label and draw relative to the origin or center of the label. Likewise for label 111. I thought using self. will create its own unique line for each label and draw relative to the origin or center of the label. I thought that when using self. i will get a test line inside each label (31 in total) but i got only 2 lines at the bottom of the window. Question: How do I draw two lines inside each label relative to its center?\n"}, "answers": [{"id": 65402903, "score": 3, "vote": 0, "content": "<p>Because you are drawing the lines for <code>Label01</code> in its <code>__init__()</code> method, all the lines are drawn before the position and size of the <code>Label01</code> are set. So all the lines are drawn using the default position of the <code>Label01</code>, which is (0,0). Since you are doing this in the python code, there is no binding to adjust the lines when the position of the <code>Label01</code> is changed.</p>\n<p>This can be fixed by either writing your own bindings to do the adjustments, or by letting <code>kv</code> do it for you by defining the lines in <code>kv</code>. Like this:</p>\n<pre><code class=\"python\">&lt;Label01&gt;:\n    canvas.before:\n        Color:\n            rgba: 0,1,0,1\n        Line:\n            points: self.center_x,self.center_y,self.center_x+250,self.center_y+250\n</code></pre>\n<p>The points are defined relative to the center of the <code>Label01</code> (as you mentioned), and then the definition for <code>Label01</code> becomes simply:</p>\n<pre><code class=\"python\">class Label01(Label):\n    pass\n</code></pre>\n", "abstract": "Because you are drawing the lines for Label01 in its __init__() method, all the lines are drawn before the position and size of the Label01 are set. So all the lines are drawn using the default position of the Label01, which is (0,0). Since you are doing this in the python code, there is no binding to adjust the lines when the position of the Label01 is changed. This can be fixed by either writing your own bindings to do the adjustments, or by letting kv do it for you by defining the lines in kv. Like this: The points are defined relative to the center of the Label01 (as you mentioned), and then the definition for Label01 becomes simply:"}]}, {"link": "https://stackoverflow.com/questions/63541241/networkx-drawing-in-layered-manner", "question": {"id": "63541241", "title": "networkx: drawing in Layered manner", "content": "<p>I want to draw a layered graph\nIf you can look at the graph below, it can be ordered the following way</p>\n<pre><code class=\"python\"> 95   85\n 21  31\n 42  52  62  22 32\n 13\n 14\n</code></pre>\n<p>I can provide hints which node in which layer goes if needed.</p>\n<p>In the past I had similar need, but it does not work in this case :\n<a href=\"https://stackoverflow.com/questions/42286858/networkx-draw-graph-in-layers\">NetworkX: draw graph in layers</a></p>\n<p>I tried all standard layouts and all graph_viz layouts :  \u2018dot\u2019, \u2018twopi\u2019, \u2018fdp\u2019, \u2018sfdp\u2019, \u2018circo\u2019</p>\n<p><a href=\"https://i.stack.imgur.com/U5z76.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/U5z76.png\"/></a></p>\n<hr/>\n<p>By layered I mean where every group of nodes are on the same layer (vertical coordinates : Y)</p>\n<p>Like I've ordered them above ...</p>\n<hr/>\n<p>this my first crack on it ...now i have to do the x-axis more clearly based on edges. thanks mathfux</p>\n<pre><code class=\"python\">def layered_layout(nodes, base):\n    nodes = np.array(nodes)\n\n    ncols = np.unique( nodes % base, return_counts=True)[1].max()                                                                                                                      \n    nlayers = np.unique(nodes % base).size\n    ys = np.linspace(0, 1, nlayers)\n    xs = np.linspace(0, 1, ncols)\n    pos = {}\n    for j,b in enumerate(np.unique(nodes % base)):\n        ixs = np.where(nodes % base == b)[0]\n    \n        for i,x in enumerate(ixs) :\n            node = nodes[x]\n            pos[node] = (xs[i], ys[j])\n\n    return pos      \n</code></pre>\n", "abstract": "I want to draw a layered graph\nIf you can look at the graph below, it can be ordered the following way I can provide hints which node in which layer goes if needed. In the past I had similar need, but it does not work in this case :\nNetworkX: draw graph in layers I tried all standard layouts and all graph_viz layouts :  \u2018dot\u2019, \u2018twopi\u2019, \u2018fdp\u2019, \u2018sfdp\u2019, \u2018circo\u2019  By layered I mean where every group of nodes are on the same layer (vertical coordinates : Y) Like I've ordered them above ... this my first crack on it ...now i have to do the x-axis more clearly based on edges. thanks mathfux"}, "answers": [{"id": 63541519, "score": 3, "vote": 0, "content": "<p>In case you can't find any default layout, you can define your custom layout. It seems not that complicated for layered manner.</p>\n<pre><code class=\"python\">def layered_layout(layers, stretch=0, alignment='c'):\n    sizes = np.array([len(n) for n in layers])\n    lfill = [np.linspace(0, 1, n) for n in sizes]\n    scales = (sizes - 1)/(max(sizes) - 1)\n    if alignment == 'l':\n        x_coord_levels = [(x - x[0]) * (s + (1 - s) * stretch) for x, s in zip(lfill, scales)]\n    elif alignment == 'r':\n        x_coord_levels = [(x - x[-1]) * (s + (1 - s) * stretch) for x, s in zip(lfill, scales)]\n    elif alignment == 'c':\n        x_coord_levels = [(x - (x[0]+x[-1])/2) * (s + (1 - s) * stretch) for x, s in zip(lfill, scales)]\n    else:\n        raise AttributeError('invalid alignment attribute')\n    y_coord_levels = [np.repeat(-y, times) for y, times in zip(np.arange(len(sizes)), sizes)]\n    pos_levels = [dict(zip(l, zip(*p))) for l,p in zip(layers, zip(x_coord_levels, y_coord_levels))]\n    pos = {k: v for d in pos_levels for k, v in d.items()}\n    return pos\n</code></pre>\n<p>After you create a graph :</p>\n<pre><code class=\"python\">import networkx as nx\nimport matplotlib.pyplot as plt\nimport numpy as np\nG = nx.DiGraph()\nG.add_edges_from([(21, 42), (52, 13), (42, 13), (95, 21), (31, 52), (31, 62), (95, 31), (62, 13), (32, 95), (13, 22), (85, 31), (22, 14), (14, 32)])\nnx.set_edge_attributes(G, {(21, 42): 0.20, (52, 13): 0.52, (42, 13): 0.49, (95, 21): 0.15, (31, 52): 0.52, (31, 62): 0.42, (95, 31): 0.47, (62, 13): 0.42, (32, 95): 0.42, (13, 22): 0.71, (85, 31): -0.00, (22, 14): 0.74, (14, 32): 0.74}, 'w')\n</code></pre>\n<p><code>layered_layout</code> should be used to define values of <code>pos</code> parameter:</p>\n<pre><code class=\"python\">layers = [[95, 85], [21, 31, 42], [52, 62, 22, 32], [13], [14]]\npos = layered_layout(layers, stretch=..., alignment=...)\n</code></pre>\n<p>Example of usage:</p>\n<pre><code class=\"python\">layers = [[95, 85], [21, 31, 42], [52, 62, 22, 32], [13], [14]]\nfig = plt.figure(figsize=(20,10))\nfor i in range(3):\n    for j in range(3):\n        ax = fig.add_subplot(3, 3, 1+3*j+i)\n        ax.set_title(f'stretch = {[0, 0.5, 1][j]}, alignment={\"lcr\"[i]}')\n        pos = layered_layout(layers, stretch = [0, 0.5, 1][j], alignment='lcr'[i])\n        nx.draw_networkx(G, pos, with_labels=True, font_size=7, node_size=100)\n        nx.draw_networkx_edge_labels(G, pos, edge_labels = nx.get_edge_attributes(G,'w'), font_size=7)\n        plt.axis('on'); plt.tick_params(left=True, bottom=True, labelleft=True, labelbottom=True)\nplt.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cF1Y6.png\" rel=\"nofollow noreferrer\"><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/cF1Y6.png\"/></a></p>\n", "abstract": "In case you can't find any default layout, you can define your custom layout. It seems not that complicated for layered manner. After you create a graph : layered_layout should be used to define values of pos parameter: Example of usage: "}]}, {"link": "https://stackoverflow.com/questions/52486188/python-turtle-drawing-circle-with-squares", "question": {"id": "52486188", "title": "Python Turtle drawing circle with squares", "content": "<p>Trying to draw this picture using turtle, just stuck on the last bit of drawing square into a circle. <a href=\"https://i.stack.imgur.com/YIyYv.png\" rel=\"nofollow noreferrer\">squares to make circle</a>\nso far I've tried just drawing out the points of each individual line but takes way to long with some inconsistencies. What I have so far is </p>\n<pre><code class=\"python\">def square(side_length):\n    for i in range(4):\n        turtle.fd(side_length)\n        turtle.lt(90)\n\nsquare (150)\n\nturtle.penup()\n        ####New Square###\nturtle.left(90)\nturtle.forward(75)\nturtle.left(90)\nturtle.forward(30)\nturtle.right(180)\nturtle.right(45)\nturtle.pendown()\n\n\ndef square(side_length):\n    for i in range(4):\n        turtle.fd(side_length)\n        turtle.lt(90)\nsquare (150)\n</code></pre>\n<p>This draws two squares.  Now I just need to figure out a way to rotate the two squares by, say, 30 degrees clockwise 4 times.  Is there a function I can use to do this, or do I just need to do a lot of math and calculate to draw each individual line?</p>\n", "abstract": "Trying to draw this picture using turtle, just stuck on the last bit of drawing square into a circle. squares to make circle\nso far I've tried just drawing out the points of each individual line but takes way to long with some inconsistencies. What I have so far is  This draws two squares.  Now I just need to figure out a way to rotate the two squares by, say, 30 degrees clockwise 4 times.  Is there a function I can use to do this, or do I just need to do a lot of math and calculate to draw each individual line?"}, "answers": [{"id": 52486321, "score": 2, "vote": 0, "content": "<p>Despite its  name, <code>turtle.circle</code> can be used to draw other regular polygons. It also can be used to draw only part of the polygon. Combined with picking the pen up and down, you can easily draw a series of rotated shapes sharing the same center.</p>\n<p>For example,</p>\n<pre><code class=\"python\"> for i in range(19):\n     turtle.circle(100, 360, 4)  # draw a square\n     turtle.penup()\n     # \"draw\" 10 degrees of the same circle, with the pen up, just to move the pen\n     turtle.circle(100, 10, 4)\n     turtle.pendown()\n</code></pre>\n<p>(The circle is just a polygon with enough sides to approximate a circle. If you don't specify the third argument explicitly, <code>turtle</code> picks a sufficiently large value based on the radius.)</p>\n", "abstract": "Despite its  name, turtle.circle can be used to draw other regular polygons. It also can be used to draw only part of the polygon. Combined with picking the pen up and down, you can easily draw a series of rotated shapes sharing the same center. For example, (The circle is just a polygon with enough sides to approximate a circle. If you don't specify the third argument explicitly, turtle picks a sufficiently large value based on the radius.)"}, {"id": 52486275, "score": 1, "vote": 0, "content": "<p>It's a combination of the two.  You need to do a little math to find the starting point for each square.  However, once you move the turtle to that point and turn it to the correct heading, your block of statements to draw the four sides will work just fine.</p>\n<p>After you draw the last side of a square, the turtle is sitting on the outer circle, facing 45 degrees off a radius to that point.</p>\n<ul>\n<li>Turn the turtle 60 degrees to face across a shallow chord of the circle.</li>\n<li>Move it the appropriate distance to traverse that chord (this is where your math comes in).</li>\n<li>Turn the turtle another 60 degrees.  You are now ready to draw the next square.</li>\n</ul>\n<p>Repeat those steps for each added square.</p>\n", "abstract": "It's a combination of the two.  You need to do a little math to find the starting point for each square.  However, once you move the turtle to that point and turn it to the correct heading, your block of statements to draw the four sides will work just fine. After you draw the last side of a square, the turtle is sitting on the outer circle, facing 45 degrees off a radius to that point. Repeat those steps for each added square."}]}, {"link": "https://stackoverflow.com/questions/48490948/how-do-have-the-same-drawn-object-appear-at-the-same-time-pygame", "question": {"id": "48490948", "title": "How do have the same drawn object appear at the same time? (pygame)", "content": "<p>I'm trying to get the red rectangle (note) to show up more than once on the screen instead of having only 1 rectangle appear at one time. Is there any way I could achieve this without creating multiple identical rectangles and deleting more code? I'm a beginner to pygame so a simple answer would definitely be appreciated.</p>\n<pre><code class=\"python\">import pygame\nimport time\n\npygame.init()\n\ncont = True\ndelNote = False\ndelUser = False\ndelScoreUpdate = False\nreset = False\n\nwhite = (255, 255, 255)\nblack = (0, 0, 0)\nred = (255, 0, 0)\nuserColor = (0, 255, 0)\ngrey = (224, 224, 224)\n\ndisplayX = 800\ndisplayY = 600\n\nnoteY = -600\n\ncurrentScore = 0\n\nspeed = 5\n\ngameDisplay = pygame.display.set_mode((displayX, displayY))\n\npygame.display.set_caption(\"game\")\n\nclock = pygame.time.Clock()\n\ndef drawUser():\n    user = pygame.draw.rect(gameDisplay, userColor, [375, 430, 50, 50])\n\ndef drawNote():\n    note = pygame.draw.rect(gameDisplay, red, [385, noteY, 30, 30])\n\ndef crashDisplay():\n    font = pygame.font.Font(\"freesansbold.ttf\", 115)\n    text = font.render(str(currentScore), True, black)\n    gameDisplay.blit(text, [150, 200])\n\ndef scoreUpdate():\n    fontS = pygame.font.Font(\"freesansbold.ttf\", 30)\n    textS = fontS.render(str(currentScore), True, black)\n    gameDisplay.blit(textS, [0, 0])\n\nwhile cont is True:\n\n    if reset is True:\n        reset = False\n        delNote = False\n\n    gameDisplay.fill(grey)\n\n    for event in pygame.event.get():\n\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_RIGHT and noteY &gt; 420 and noteY &lt; 490:\n                delNote = True\n                reset = True\n\n            if event.key == pygame.K_RIGHT:\n                 userColor = (0, 150, 0)\n\n        if event.type == pygame.KEYUP:\n            if event.key == pygame.K_RIGHT:\n                userColor = (0, 255, 0)\n\n        if event.type == pygame.QUIT:\n            cont = False\n\n    if delScoreUpdate is False:\n        scoreUpdate()\n\n    if delUser is False:\n        drawUser()\n\n    if delNote is False:\n        noteY += speed\n        drawNote()\n\n    if reset is True:\n        noteY = -600\n        noteY += speed\n\n    if noteY &gt; 600:\n        delUser = True\n        delScoreUpdate = True\n        delNote = True\n        crashDisplay()\n\n    pygame.display.update()\n\n    if delScoreUpdate is False:\n        clock.tick(60)\n        currentScore += 0.1\n        currentScore = round(currentScore, 4)\n\n\npygame.quit()\nquit()\n</code></pre>\n", "abstract": "I'm trying to get the red rectangle (note) to show up more than once on the screen instead of having only 1 rectangle appear at one time. Is there any way I could achieve this without creating multiple identical rectangles and deleting more code? I'm a beginner to pygame so a simple answer would definitely be appreciated."}, "answers": [{"id": 48491952, "score": 3, "vote": 0, "content": "<p>Define a list with the note positions (<code>notes</code>) and iterate over this list in your while loop to move and draw the notes and also for the collision detection in the event loop.</p>\n<pre><code class=\"python\">import pygame\n\n\npygame.init()\ngameDisplay = pygame.display.set_mode((800, 600))\nclock = pygame.time.Clock()\n\ncont = True\nred = (255, 0, 0)\nuserColor = (0, 255, 0)\ngrey = (224, 224, 224)\nspeed = 5\nnotes = [0, 100, 200]\n\nwhile cont:\n    # Event handling.\n    for event in pygame.event.get():\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_RIGHT:\n                userColor = (0, 150, 0)\n                # Use enumerate to get the index and the\n                # item at the same time.\n                for i, noteY in enumerate(notes):\n                    # If the player rect collides with a note.\n                    if noteY &gt; 420 and noteY &lt; 490:\n                        notes[i] -= 660  # Reset the position.\n        elif event.type == pygame.KEYUP:\n            if event.key == pygame.K_RIGHT:\n                userColor = (0, 255, 0)\n        elif event.type == pygame.QUIT:\n            cont = False\n\n    # Game logic.\n    for i in range(len(notes)):  # Loop over the notes.\n        notes[i] += speed  # Move the note.\n        if notes[i] &gt;= 600:  # If below the screen ...\n            notes[i] -= 660  # reset the position.\n\n    # Draw everything.\n    gameDisplay.fill(grey)\n    pygame.draw.rect(gameDisplay, userColor, [375, 430, 50, 50])\n    for noteY in notes:\n        pygame.draw.rect(gameDisplay, red, [385, noteY, 30, 30])\n\n    pygame.display.update()\n    clock.tick(60)\n\n\npygame.quit()\n</code></pre>\n<p>You could also put <a href=\"http://www.pygame.org/docs/ref/rect.html\" rel=\"nofollow noreferrer\"><code>pygame.Rect</code>s</a> into the list instead of just the y-position. They have some handy collision detection methods and attributes.</p>\n", "abstract": "Define a list with the note positions (notes) and iterate over this list in your while loop to move and draw the notes and also for the collision detection in the event loop. You could also put pygame.Rects into the list instead of just the y-position. They have some handy collision detection methods and attributes."}, {"id": 60173571, "score": 0, "vote": 0, "content": "<p>It is a little late but this is for others if they have same problem.</p>\n<p>Check if red block is out of screen with something like if y coordinate of the block is &gt; than display height then,\ny coordinate = 0 (or -60 or something to make it like its coming from up)</p>\n", "abstract": "It is a little late but this is for others if they have same problem. Check if red block is out of screen with something like if y coordinate of the block is > than display height then,\ny coordinate = 0 (or -60 or something to make it like its coming from up)"}]}, {"link": "https://stackoverflow.com/questions/42570280/non-continuous-line-user-draw-tkinter-python", "question": {"id": "42570280", "title": "non continuous line user draw tkinter python", "content": "<p>So here's the code for a program where the user can click on a point and it draws a point and then subsequent clicks draw more lines all attached to the previous line. How would I edit this program to just let the user press down on the button and have like (xp1, yp1) and then drag some where and release at (xp2, yp2) then draw a line between (xp1, yp1) and (xp2, yp2). Finally it would let the user create many different lines then eventually be able to clear the canvas screen by pressing \"c\". Like I know the last thing would have to bind some function to \"c\" but I don't know what it is.</p>\n<pre><code class=\"python\">from Tkinter import Canvas, Tk, mainloop\nimport Tkinter as tk\n\n# Image dimensions\nw,h = 640,480\n\n# Create canvas\nroot = Tk()\ncanvas = Canvas(root, width = w, height = h, bg = 'white')\ncanvas.pack()\n\n# Create poly line\nclass PolyLine(object):\n    def __init__(x, canvas):\n        x.canvas = canvas\n        x.start_coords = None # first click\n        x.end_coords = None # subsequent clicks\n    def __call__(x, event):\n        coords = event.x, event.y # coordinates of the click\n        if not x.start_coords:\n            x.start_coords = coords\n            return\n        x.end_coords = coords # last click\n        x.canvas.create_line(x.start_coords[0], # first dot x\n                                x.start_coords[1], # first dot y\n                                x.end_coords[0], # next location x\n                                x.end_coords[1]) # next location y\n        x.start_coords = x.end_coords\n\ncanvas.bind(\"&lt;Button-1&gt;\", PolyLine(canvas)) # left click is used\nmainloop()\n</code></pre>\n<p>Thank you so much for your time! I really appreciate it!</p>\n", "abstract": "So here's the code for a program where the user can click on a point and it draws a point and then subsequent clicks draw more lines all attached to the previous line. How would I edit this program to just let the user press down on the button and have like (xp1, yp1) and then drag some where and release at (xp2, yp2) then draw a line between (xp1, yp1) and (xp2, yp2). Finally it would let the user create many different lines then eventually be able to clear the canvas screen by pressing \"c\". Like I know the last thing would have to bind some function to \"c\" but I don't know what it is. Thank you so much for your time! I really appreciate it!"}, "answers": [{"id": 42575989, "score": 2, "vote": 0, "content": "<p>For the drawing line part, I use a global list variable to store the line points. If the list is empty, then I store the line starting point coordinates inside the list. Otherwise, I draw the line between the starting point and the current cursor position and I reset the list.</p>\n<p>For the clearing part, what you need is to bind the <code>canvas.delete</code> method to \"c\" key press.</p>\n<pre><code class=\"python\">from Tkinter import Canvas, Tk\n\nline = []\n\ndef on_click(event):\n    global line\n    if len(line) == 2:\n        # starting point has been defined\n        line.extend([event.x, event.y])\n        canvas.create_line(*line)\n        line = []   # reset variable\n    else:\n        # define line starting point\n        line = [event.x, event.y]\n\ndef clear_canvas(event):\n    canvas.delete('all')\n\nroot = Tk()\ncanvas = Canvas(root, bg='white')\ncanvas.pack()\n\ncanvas.bind(\"&lt;Button-1&gt;\", on_click) \nroot.bind(\"&lt;Key-c&gt;\", clear_canvas)\n\nroot.mainloop()\n</code></pre>\n", "abstract": "For the drawing line part, I use a global list variable to store the line points. If the list is empty, then I store the line starting point coordinates inside the list. Otherwise, I draw the line between the starting point and the current cursor position and I reset the list. For the clearing part, what you need is to bind the canvas.delete method to \"c\" key press."}, {"id": 47996159, "score": 1, "vote": 0, "content": "<pre><code class=\"python\">import tkinter as tk\nfrom time import sleep\n\ndef getpoint1(event):\n    global x, y\n    x, y = event.x, event.y\n\ndef getpoint2(event):\n    global x1, y1\n    x1, y1 = event.x, event.y\n\ndef drawline(event):\n    canvas.create_line(x, y, x1, y1)\n\n\n\nroot = tk.Tk()\n\ncanvas = tk.Canvas(root, width=400, height=400)\ncanvas.pack()\n\nroot.bind('q', getpoint1)\nroot.bind('w', getpoint2)\nroot.bind('&lt;Button-1&gt;', drawline)\n\n\nroot.mainloop()\n</code></pre>\n<p>This is pretty much what you asked for on your comment, but with different keys.</p>\n", "abstract": "This is pretty much what you asked for on your comment, but with different keys."}]}, {"link": "https://stackoverflow.com/questions/32203205/draw-on-desktop-windows-ubuntu-using-python", "question": {"id": "32203205", "title": "Draw on desktop (windows/ubuntu) using python", "content": "<p>I am doing a project in which I need to show lines on window. Also I want to move cursor along the line. I am looking forward to work in python. </p>\n<p>How can I do this using python or other languages. Please help me</p>\n", "abstract": "I am doing a project in which I need to show lines on window. Also I want to move cursor along the line. I am looking forward to work in python.  How can I do this using python or other languages. Please help me"}, "answers": [{"id": 49075487, "score": 3, "vote": 0, "content": "<p>i only just found this out and here you go.</p>\n<pre><code class=\"python\">import win32gui\n\ndef DRAW_LINE(x1, y1, x2, y2):\n    hwnd=win32gui.WindowFromPoint((x1,y1))\n    hdc=win32gui.GetDC(hwnd)\n    x1c,y1c=win32gui.ScreenToClient(hwnd,(x1,y1))\n    x2c,y2c=win32gui.ScreenToClient(hwnd,(x2,y2))\n    win32gui.MoveToEx(hdc,x1c,y1c)\n    win32gui.LineTo(hdc,x2c,y2c)\n    win32gui.ReleaseDC(hwnd,hdc)\n\nx1 = 640\ny1 = 400\nx2 = 840\ny2 = 600\n\nDRAW_LINE(x1, y1, x2, y2)\n</code></pre>\n<p>as for moving your mouse underneath the lines i cant figure that out</p>\n", "abstract": "i only just found this out and here you go. as for moving your mouse underneath the lines i cant figure that out"}]}, {"link": "https://stackoverflow.com/questions/24896873/drawing-a-square-wave-in-pygame", "question": {"id": "24896873", "title": "Drawing a square wave in pygame", "content": "<p>This python code illustrates a sin wave in a pygame window.</p>\n<p>I want to draw a square wave in this very same fashion as well, though I have no idea what this code might be or how to draw a square wave / how one is constructed in python.</p>\n<p>Does anybody know how I can do this? Is it possible with the same imports or will I need new ones?</p>\n<p>Code:</p>\n<pre><code class=\"python\">    import sys, pygame, math\n    from pygame.locals import *\n\n    # set up a bunch of constants\n    WHITE      = (255, 255, 255)\n    DARKRED    = (128,   0,   0)\n    RED        = (255,   0,   0)\n    BLACK      = (  0,   0,   0)\n\n    BGCOLOR = WHITE\n\n    WINDOWWIDTH = 640 # width of the program's window, in pixels\n    WINDOWHEIGHT = 480 # height in pixels\n    WIN_CENTERX = int(WINDOWWIDTH / 2) # the midpoint for the width of the window\n    WIN_CENTERY = int(WINDOWHEIGHT / 2) # the midpoint for the height of the window\n\n    FPS = 160 # frames per second to run at\n\n    AMPLITUDE = 80 # how many pixels tall the waves with rise/fall.\n\n    # standard pygame setup code\n    pygame.init()\n    FPSCLOCK = pygame.time.Clock()\n    DISPLAYSURF = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))\n    pygame.display.set_caption('Trig Waves')\n    fontObj = pygame.font.Font('freesansbold.ttf', 16)\n\n    # variables that track visibility modes\n    showSine = True\n\n    pause = False\n\n    xPos = 0\n    step = 0 # the current input f\n    posRecord = {'sin': []} # keeps track of the ball positions for drawing the waves\n\n    # making text Surface and Rect objects for various labels\n    sinLabelSurf         = fontObj.render('sine', True, RED, BGCOLOR)\n\n    sinLabelRect         = sinLabelSurf.get_rect()\n\n\n    instructionsSurf = fontObj.render('Press Q to toggle wave. P to pause.', True, BLACK, BGCOLOR)\n    instructionsRect = instructionsSurf.get_rect()\n    instructionsRect.left = 10\n    instructionsRect.bottom = WINDOWHEIGHT - 10\n\n    # main application loop\n    while True:\n        # event handling loop for quit events\n        for event in pygame.event.get():\n            if event.type == QUIT or (event.type == KEYUP and event.key == K_ESCAPE):\n                pygame.quit()\n                sys.exit()\n\n            # check for key presses that toggle pausing and wave visibility\n            if event.type == KEYUP:\n                if event.key == K_q:\n                    showSine = not showSine\n                elif event.key == K_p:\n                    pause = not pause\n\n        # fill the screen to draw from a blank state\n        DISPLAYSURF.fill(BGCOLOR)\n\n        # draw instructions\n        DISPLAYSURF.blit(instructionsSurf, instructionsRect)\n\n\n\n        # sine wave\n        yPos = -1 * math.sin(step) * AMPLITUDE\n        posRecord['sin'].append((int(xPos), int(yPos) + WIN_CENTERY))\n        if showSine:\n            # draw the sine ball and label\n            pygame.draw.circle(DISPLAYSURF, RED, (int(xPos), int(yPos) + WIN_CENTERY), 10)\n            sinLabelRect.center = (int(xPos), int(yPos) + WIN_CENTERY + 20)\n            DISPLAYSURF.blit(sinLabelSurf, sinLabelRect)\n\n        # draw the waves from the previously recorded ball positions\n        if showSine:\n            for x, y in posRecord['sin']:\n                pygame.draw.circle(DISPLAYSURF, DARKRED, (x, y), 4)\n\n\n        # draw the border\n        pygame.draw.rect(DISPLAYSURF, BLACK, (0, 0, WINDOWWIDTH, WINDOWHEIGHT), 1)\n\n        pygame.display.update()\n        FPSCLOCK.tick(FPS)\n\n        if not pause:\n            xPos += 0.5\n            if xPos &gt; WINDOWWIDTH:\n                xPos = 0\n                posRecord = {'sin': []}\n                step = 0\n            else:\n                step += 0.008\n                step %= 2 * math.pi\n</code></pre>\n<p>Python ver.2.6, Pygame ver.1.9.2</p>\n", "abstract": "This python code illustrates a sin wave in a pygame window. I want to draw a square wave in this very same fashion as well, though I have no idea what this code might be or how to draw a square wave / how one is constructed in python. Does anybody know how I can do this? Is it possible with the same imports or will I need new ones? Code: Python ver.2.6, Pygame ver.1.9.2"}, "answers": [{"id": 24897944, "score": 3, "vote": 0, "content": "<p>I made some modifications to add squared wave. </p>\n<p>See places with <code>### HERE</code>.</p>\n<pre><code class=\"python\">import sys, pygame, math\nfrom pygame.locals import *\n\n# set up a bunch of constants\nWHITE      = (255, 255, 255)\nDARKRED    = (128,   0,   0)\nRED        = (255,   0,   0)\nBLACK      = (  0,   0,   0)\nGREEN      = (  0, 255,   0) ### HERE\nBLUE       = (  0,   0, 255) ### HERE\n\nBGCOLOR = WHITE\n\nWINDOWWIDTH = 640 # width of the program's window, in pixels\nWINDOWHEIGHT = 480 # height in pixels\nWIN_CENTERX = int(WINDOWWIDTH / 2) # the midpoint for the width of the window\nWIN_CENTERY = int(WINDOWHEIGHT / 2) # the midpoint for the height of the window\n\nFPS = 160 # frames per second to run at\n\nAMPLITUDE = 80 # how many pixels tall the waves with rise/fall.\n\n# standard pygame setup code\npygame.init()\nFPSCLOCK = pygame.time.Clock()\nDISPLAYSURF = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))\npygame.display.set_caption('Trig Waves')\nfontObj = pygame.font.Font('freesansbold.ttf', 16)\n\n# variables that track visibility modes\nshowSine = True\nshowSquare = True ### HERE\n\npause = False\n\nxPos = 0\nstep = 0 # the current input f\n\n### HERE \nposRecord = {'sin': [], 'square': []} # keeps track of the ball positions for drawing the waves\n\n# making text Surface and Rect objects for various labels\n\n### HERE \nsquareLabelSurf = fontObj.render('square', True, BLUE, BGCOLOR)\nsquareLabelRect = squareLabelSurf.get_rect()\n\nsinLabelSurf = fontObj.render('sine', True, RED, BGCOLOR)\nsinLabelRect = sinLabelSurf.get_rect()\n\n\ninstructionsSurf = fontObj.render('Press Q to toggle wave. P to pause.', True, BLACK, BGCOLOR)\ninstructionsRect = instructionsSurf.get_rect()\ninstructionsRect.left = 10\ninstructionsRect.bottom = WINDOWHEIGHT - 10\n\n### HERE\nyPosSquare = AMPLITUDE # starting position\n\n# main application loop\nwhile True:\n    # event handling loop for quit events\n    for event in pygame.event.get():\n        if event.type == QUIT or (event.type == KEYUP and event.key == K_ESCAPE):\n            pygame.quit()\n            sys.exit()\n\n        # check for key presses that toggle pausing and wave visibility\n        if event.type == KEYUP:\n            if event.key == K_q:\n                showSine = not showSine\n            elif event.key == K_p:\n                pause = not pause\n\n    # fill the screen to draw from a blank state\n    DISPLAYSURF.fill(BGCOLOR)\n\n    # draw instructions\n    DISPLAYSURF.blit(instructionsSurf, instructionsRect)\n\n    # sine wave\n    yPos = -1 * math.sin(step) * AMPLITUDE\n    posRecord['sin'].append((int(xPos), int(yPos) + WIN_CENTERY))\n    if showSine:\n        # draw the sine ball and label\n        pygame.draw.circle(DISPLAYSURF, RED, (int(xPos), int(yPos) + WIN_CENTERY), 10)\n        sinLabelRect.center = (int(xPos), int(yPos) + WIN_CENTERY + 20)\n        DISPLAYSURF.blit(sinLabelSurf, sinLabelRect)\n\n    # draw the waves from the previously recorded ball positions\n    if showSine:\n        for x, y in posRecord['sin']:\n            pygame.draw.circle(DISPLAYSURF, DARKRED, (x, y), 4)\n\n    ### HERE - drawing horizontal lines\n    # square \n    posRecord['square'].append((int(xPos), int(yPosSquare) + WIN_CENTERY))\n    if showSquare:\n        # draw the sine ball and label\n        pygame.draw.circle(DISPLAYSURF, GREEN, (int(xPos), int(yPosSquare) + WIN_CENTERY), 10)\n        squareLabelRect.center = (int(xPos), int(yPosSquare) + WIN_CENTERY + 20)\n        DISPLAYSURF.blit(squareLabelSurf, squareLabelRect)\n\n    # draw the waves from the previously recorded ball positions\n    if showSquare:\n        for x, y in posRecord['square']:\n            pygame.draw.circle(DISPLAYSURF, BLUE, (x, y), 4)\n\n    # draw the border\n    pygame.draw.rect(DISPLAYSURF, BLACK, (0, 0, WINDOWWIDTH, WINDOWHEIGHT), 1)\n\n    pygame.display.update()\n    FPSCLOCK.tick(FPS)\n\n    if not pause:\n        xPos += 0.5\n\n        if xPos &gt; WINDOWWIDTH:\n            #sine ### HERE\n            xPos = 0\n            posRecord['sin'] = []\n            step = 0\n\n            # square ### HERE\n            yPosSquare = AMPLITUDE\n            posRecord['square'] = []\n        else:\n            #sine ### HERE\n            step += 0.008\n            #step %= 2 * math.pi\n\n            # square ### HERE\n            # jump top and bottom every 100 pixels\n            if xPos % 100 == 0:\n                yPosSquare *= -1\n                # add vertical line\n                for x in range(-AMPLITUDE, AMPLITUDE):\n                    posRecord['square'].append((int(xPos), int(x) + WIN_CENTERY))\n</code></pre>\n<p><img alt=\"enter image description here\" src=\"https://i.stack.imgur.com/i42My.png\"/></p>\n", "abstract": "I made some modifications to add squared wave.  See places with ### HERE. "}]}, {"link": "https://stackoverflow.com/questions/8228065/how-to-visualize-geocoordinates-by-dots-with-python", "question": {"id": "8228065", "title": "How to visualize geocoordinates by dots with python", "content": "<p>I have a whole bunch of geocoordinates (around 125000 from all over the world)  which I want to visualize in a coordinate system (for printing later). Which is the easiest way to go?</p>\n", "abstract": "I have a whole bunch of geocoordinates (around 125000 from all over the world)  which I want to visualize in a coordinate system (for printing later). Which is the easiest way to go?"}, "answers": [{"id": 8228683, "score": 3, "vote": 0, "content": "<p>For simple lon/lat [x/y] dots, the matplotlib does the job. If you need to have some simple map in the background (such as continent boundaries, major cities, rivers) or use a specific projection, check <a href=\"http://matplotlib.sourceforge.net/matplotlib.toolkits.basemap.basemap.html\" rel=\"nofollow\">matplotlib.toolkits.basemap.basemap</a>.</p>\n", "abstract": "For simple lon/lat [x/y] dots, the matplotlib does the job. If you need to have some simple map in the background (such as continent boundaries, major cities, rivers) or use a specific projection, check matplotlib.toolkits.basemap.basemap."}]}, {"link": "https://stackoverflow.com/questions/70998501/pygame-draw-multiple-duplicate-sprites-same-class", "question": {"id": "70998501", "title": "Pygame draw multiple/duplicate sprites same class", "content": "<p>The Problem:\nI want to add the exact same Sprite (it's a 25x25 white box) behind another one</p>\n<p>the Sprite starts off at x,y 300,300\nI have key functions that allow the Sprite to move in any direction</p>\n<p>Let's say, that I move my Sprite to x,y 150,210... how do I grab that NEW position of that original Sprite, and then draw a copy of that Sprite directly \"behind\" that Sprites new position of x,y 150,210?</p>\n<p>The end result is:</p>\n<ul>\n<li>there are TWO 25x25 squares together.</li>\n<li>On keypress, the two squares should always stay together. The \"TWO\" could be 10 or 20 or 40 squares at any point</li>\n<li>I do not want to increase the height of the sprite as a solution, I explicitly want a copy of the sprite</li>\n</ul>\n<p><em><strong>Please let me know if this question requires better context etc.</strong></em>\n<em><strong>Thanks in advance</strong></em></p>\n<p><strong>Minimal reproducible example</strong></p>\n<pre><code class=\"python\">import pygame\nfrom random import randint\nfrom sys import exit\n\npygame.init()\ngame_active = True\nclock = pygame.time.Clock() #an object to track time\n\ndef display_surface():\n    disp_surface = pygame.display.set_mode(size = (610, 700))\n    return disp_surface\ndisp_surface = display_surface()\n\nclass square(pygame.sprite.Sprite):\n    def __init__(self):\n        super().__init__()\n        image1 = pygame.image.load(\"square1.png\").convert_alpha()\n        x_pos = 300\n        y_pos = 300\n\n        self.image = image1\n        self.rect = self.image.get_rect(x = x_pos,y = y_pos)\n\nsquaregroup = pygame.sprite.GroupSingle()\nsquaregroup.add(square())\n\nwhile True:\n    for eachevent in pygame.event.get():\n        if eachevent.type == pygame.QUIT:\n            pygame.quit()\n            exit()\n        \n        if eachevent.type == pygame.KEYDOWN and eachevent.key == pygame.K_SPACE:\n            game_active = True\n\n        keys = pygame.key.get_pressed()\n        events = pygame.event.get()\n        \n        left = keys[pygame.K_LEFT]\n        right = keys[pygame.K_RIGHT]\n        up = keys[pygame.K_UP]\n        down = keys[pygame.K_DOWN]\n     \n        if left:\n            squaregroup.sprite.rect.x -= 1\n        if right:\n            squaregroup.sprite.rect.x += 1\n        if up:\n            squaregroup.sprite.rect.y -= 1\n        if down:\n            squaregroup.sprite.rect.y += 1\n    \n    if game_active:\n        disp_surface = display_surface()\n        squaregroup.draw(disp_surface)\n    \n    else:\n        disp_surface.fill((64,64,64))\n\n    pygame.display.update()\n    clock.tick(60)\n</code></pre>\n", "abstract": "The Problem:\nI want to add the exact same Sprite (it's a 25x25 white box) behind another one the Sprite starts off at x,y 300,300\nI have key functions that allow the Sprite to move in any direction Let's say, that I move my Sprite to x,y 150,210... how do I grab that NEW position of that original Sprite, and then draw a copy of that Sprite directly \"behind\" that Sprites new position of x,y 150,210? The end result is: Please let me know if this question requires better context etc.\nThanks in advance Minimal reproducible example"}, "answers": [{"id": 71036733, "score": 2, "vote": 0, "content": "<p>here is one possible solution\ni have created a pygame.sprite.group() instead of groupsingle()\nand then added the squares there and it works fine\nyou can get more squares appear on the back by clicking space bar key and get the new x,y by original_sq.rect.x and original_sq.rect.y\nmoreover commenting line number 68 will show you how new square is created and displayed</p>\n<pre><code class=\"python\">import pygame\nfrom random import randint\nfrom sys import exit\n\npygame.init()\ngame_active = True\nclock = pygame.time.Clock() #an object to track time\n\ndef display_surface():\n    disp_surface = pygame.display.set_mode(size = (610, 700))\n    return disp_surface\ndisp_surface = display_surface()\n\nclass square(pygame.sprite.Sprite):\n    def __init__(self,x_pos=300,y_pos=300,color=(255,0,0)):\n        super().__init__()\n        image1 = pygame.Surface([25,25])\n        image1.fill((color))\n        self.x_pos = x_pos\n        self.y_pos = y_pos\n\n        self.image = image1\n        self.rect = self.image.get_rect(x = x_pos,y = y_pos)\n    #this is just the same movements nothing new \n    def update(self,left,right,up,down):\n        if left:\n            self.rect.left-=1\n        if right:\n            self.rect.right+=1\n        if up:\n            self.rect.top-=1\n        if down:\n            self.rect.bottom+=1\n\nsquaregroup = pygame.sprite.Group()\noriginal_sq=square()\nsquaregroup.add(original_sq)\nwhile True:\n    for eachevent in pygame.event.get():\n        if eachevent.type == pygame.QUIT:\n            pygame.quit()\n            exit()\n        \n        if eachevent.type == pygame.KEYDOWN and eachevent.key == pygame.K_SPACE:\n            game_active = True\n            \n            # this line add a rect above all the rects but the original is still on top of that because of draw\n            squaregroup.add(square(original_sq.rect.x,original_sq.rect.y,(original_sq.rect.x%255,original_sq.rect.x%255,original_sq.rect.y%255)))\n            #squaregroup.add(square(original_sq.rect.x,original_sq.rect.y))\n            \n            #this shows that there are actually some squares dwarn behind the original_sq\n            print(len(squaregroup))\n        keys = pygame.key.get_pressed()\n        events = pygame.event.get()\n        \n        left = keys[pygame.K_LEFT]\n        right = keys[pygame.K_RIGHT]\n        up = keys[pygame.K_UP]\n        down = keys[pygame.K_DOWN]\n     \n        squaregroup.update(left,right,up,down)\n\n    if game_active:\n        disp_surface = display_surface()\n        squaregroup.draw(disp_surface)\n\n        #comment the bellow line to remove the original square and then you will be able to see different color square when you move and press space because the new rect created by pressing spacebar is on top\n        pygame.draw.rect(disp_surface,(255,255,255),original_sq)\n    else:\n        disp_surface.fill((64,64,64))\n\n    pygame.display.update()\n    clock.tick(60)\n</code></pre>\n", "abstract": "here is one possible solution\ni have created a pygame.sprite.group() instead of groupsingle()\nand then added the squares there and it works fine\nyou can get more squares appear on the back by clicking space bar key and get the new x,y by original_sq.rect.x and original_sq.rect.y\nmoreover commenting line number 68 will show you how new square is created and displayed"}]}, {"link": "https://stackoverflow.com/questions/70482979/extract-information-from-tkinter-drawing", "question": {"id": "70482979", "title": "Extract Information from Tkinter drawing", "content": "<p>I am currently trying to script something that allows me to \"draw numercial Input\".</p>\n<p>The idea is to use tkinters <code>create_line</code> in combination with tkinters capability to <code>bind</code> methods to events in order to get some drawing that has then to be decoded into x and y values in order to serve as input for another program.</p>\n<p>Now the first part is no problem, here is a minimal code to do so:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">#!/usr/bin/env python3\nfrom tkinter import *\n\nglobal x_0, y_0\n\ndef draw(event):\n    global x_0, y_0\n    if x_0 and y_0:\n        w.create_line(x_0, y_0, event.x, event.y)\n    x_0 = event.x\n    y_0 = event.y\n\ndef letgo( event):\n    global x_0, y_0\n    x_0, y_0 = None, None\n\nmaster = Tk()\nw = Canvas(master, width=500, height=500)\nw.pack()\nx_0 = None\ny_0 = None\nw.bind('&lt;B1-Motion&gt;', draw)\nw.bind('&lt;ButtonRelease-1&gt;', letgo)\n\nmainloop()\n</code></pre>\n<p>And, running this, evidently the Drawing is saved somewhere, but how do I get it back in array form?</p>\n<p>Kind Regards</p>\n", "abstract": "I am currently trying to script something that allows me to \"draw numercial Input\". The idea is to use tkinters create_line in combination with tkinters capability to bind methods to events in order to get some drawing that has then to be decoded into x and y values in order to serve as input for another program. Now the first part is no problem, here is a minimal code to do so: And, running this, evidently the Drawing is saved somewhere, but how do I get it back in array form? Kind Regards"}, "answers": [{"id": 70483348, "score": 2, "vote": 0, "content": "<p>Thanks to Comments by users I can post an answer to my question here, but the real answer is the comments.</p>\n<p>The hint to use post script was good but the website provided me with information which seems to give me what is closest to an answer to my question.</p>\n<p>The canvas method <code>find_all</code> allows one to find the IDs of all objects on the canvas. The canvas method <code>coords(ID)</code> allows one to get the coordinates, in this example coordinate pairs (start and endpoint of linesegments).</p>\n<p>In this minimal code:</p>\n<pre><code class=\"python\">#!/usr/bin/env python3\nfrom tkinter import *\n\nglobal x_0, y_0\n\ndef draw(event):\n    global x_0, y_0\n    if x_0 and y_0:\n        w.create_line(x_0, y_0, event.x, event.y)\n    x_0 = event.x\n    y_0 = event.y\n\ndef letgo(event):\n    global x_0, y_0\n    all_segment_ids = w.find_all()\n    all_segments = []\n    for isegment in range(len(all_segment_ids)):\n        all_segments.append(w.coords(isegment))\n    print(all_segments)\n    x_0, y_0 = None, None\n\nmaster = Tk()\nw = Canvas(master, width=500, height=500)\nw.pack()\nx_0 = None\ny_0 = None\nw.bind('&lt;B1-Motion&gt;', draw)\nw.bind('&lt;ButtonRelease-1&gt;', letgo)\n\nmainloop()\n</code></pre>\n<p>The <code>list</code> 'all_segments' contains all 4-tuples that describe the picture.</p>\n<p>The script will grow in complexity if other objects are added to the canvas, they wil have to be identified and excluded.</p>\n<p>With numpy's <code>assarray</code> this list can be converted to an array.</p>\n<p>Thanks for all the support.</p>\n", "abstract": "Thanks to Comments by users I can post an answer to my question here, but the real answer is the comments. The hint to use post script was good but the website provided me with information which seems to give me what is closest to an answer to my question. The canvas method find_all allows one to find the IDs of all objects on the canvas. The canvas method coords(ID) allows one to get the coordinates, in this example coordinate pairs (start and endpoint of linesegments). In this minimal code: The list 'all_segments' contains all 4-tuples that describe the picture. The script will grow in complexity if other objects are added to the canvas, they wil have to be identified and excluded. With numpy's assarray this list can be converted to an array. Thanks for all the support."}]}, {"link": "https://stackoverflow.com/questions/63509291/python-derive-segment-coordinates-from-length-and-angle", "question": {"id": "63509291", "title": "Python - Derive segment coordinates from length and angle", "content": "<p>I face a seemingly simple problem that somehow I didn't manage to solve, despite looking into several trigonometry and geometry intros.</p>\n<p>I have a 2D space in which x=0; y=0 is the centre. I would like, given some position x1, y1 (being the coordinates of one end of the segment), and a length and an angle (0 denoting vertical lines), to find the coordinates of the other end of the segment.</p>\n<p>In other words, being able to move from one set of parameters (x1; y1; angle; length) to (x1; y1; x2; y2) and vice versa.</p>\n<p>Thanks a lot,</p>\n", "abstract": "I face a seemingly simple problem that somehow I didn't manage to solve, despite looking into several trigonometry and geometry intros. I have a 2D space in which x=0; y=0 is the centre. I would like, given some position x1, y1 (being the coordinates of one end of the segment), and a length and an angle (0 denoting vertical lines), to find the coordinates of the other end of the segment. In other words, being able to move from one set of parameters (x1; y1; angle; length) to (x1; y1; x2; y2) and vice versa. Thanks a lot,"}, "answers": [{"id": 63509376, "score": 2, "vote": 0, "content": "<p>For this you want to use sine and cosine. Here is some example code:</p>\n<pre><code class=\"python\">from math import cos, sin, radians\n\na = radians(45)\nl = 10\nx1, y1 = (10, 15)\n\nx2 += sin(a) * l\ny2 += cos(a) * l\n</code></pre>\n<p><a href=\"https://www.helixsoft.nl/articles/circle/sincos.htm#:%7E:text=The%20sine%20can%20be%20used,coordinate%20values%20may%20be%20negated.\" rel=\"nofollow noreferrer\">Here</a> is an article about how and why this works.</p>\n", "abstract": "For this you want to use sine and cosine. Here is some example code: Here is an article about how and why this works."}]}, {"link": "https://stackoverflow.com/questions/61429734/how-to-create-a-circular-sprite-in-pygame", "question": {"id": "61429734", "title": "how to create a circular sprite in pygame", "content": "<p>I've tried to make a circular sprite in pygame. My sprite class:</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">import pygame\nWHITE = (255, 255, 255)\n\nclass player(pygame.sprite.Sprite):\n    def __init__(self, color, width, height, speed):\n        # Call the parent class (Sprite) constructor\n        super().__init__()\n\n        # Pass in the color of the player, and its x and y position, width and height.\n        # Set the background color and set it to be transparent\n        self.image = pygame.Surface([width, height])\n        self.image.fill(WHITE)\n        self.image.set_colorkey(WHITE)\n\n        #Initialise attributes of the car.\n        self.width = width\n        self.height = height\n        self.color = color\n        self.speed = speed\n\n        # Draw the player\n        pygame.draw.circle(self.image,self.color,self.speed,5)\n</code></pre>\n<p>This returns the error:</p>\n<blockquote>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">line 23, in __init__\n   pygame.draw.circle(self.image,self.color,self.speed,5)\nTypeError: argument 3 must be 2-item sequence, not int\n</code></pre>\n</blockquote>\n<p>so I have been trying different sources but I can never seem to figure out how to do it. So how do you make a circular sprite? It doesn't need to move or anything - I just need a small(ish) sprite.  </p>\n", "abstract": "I've tried to make a circular sprite in pygame. My sprite class: This returns the error: so I have been trying different sources but I can never seem to figure out how to do it. So how do you make a circular sprite? It doesn't need to move or anything - I just need a small(ish) sprite.  "}, "answers": [{"id": 61429811, "score": 2, "vote": 0, "content": "<p>The 3rd argument of <a href=\"https://www.pygame.org/docs/ref/draw.html#pygame.draw.circle\" rel=\"nofollow noreferrer\"><code>pygame.draw.circle()</code></a> has to be a tuple with 2 components, the x and y center coordinated of the circle:</p>\n<p><s><code>pygame.draw.circle(self.image,self.color,self.speed,5)</code></s></p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">pygame.draw.circle(self.image, self.color, (self.width//2, self.height//2), 5)\n</code></pre>\n<p>In the above example <code>(self.width//2, self.height//2)</code> is the center of the circle and <code>5</code> is the radius (in pixel).</p>\n<p>See also<br/>\n<a href=\"https://stackoverflow.com/questions/62601880/pygame-wont-let-me-draw-a-circle-error-argument-3-must-be-sequence-of-length-2/62601934#62601934\">Pygame Wont Let Me Draw A Circle Error argument 3 must be sequence of length 2, not 4</a></p>\n<hr/>\n<p>Furthermore a <a href=\"https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Sprite\" rel=\"nofollow noreferrer\"><code>pygame.sprite.Sprite</code></a> object should always have a <code>.rect</code> attribute (instance of <a href=\"https://www.pygame.org/docs/ref/rect.html\" rel=\"nofollow noreferrer\"><code>pygame.Rect</code></a>):</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">class player(pygame.sprite.Sprite):\n    def __init__(self, color, width, height, speed):\n        # Call the parent class (Sprite) constructor\n        super().__init__()\n\n        # [...]\n        \n        pygame.draw.circle(self.image, self.color, (self.width//2, self.height//2), 5)\n        self.rect = self.image.get_rect()\n</code></pre>\n<p>Note, the <code>.rect</code> and <code>.image</code> attribute of the <code>pygame.sprite.Sprite</code> object is used by the <a href=\"https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group.draw\" rel=\"nofollow noreferrer\"><code>.draw()</code></a>, method of a <a href=\"https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group\" rel=\"nofollow noreferrer\"><code>pygame.sprite.Group</code></a> to draw the contained sprites.</p>\n<p>Thus a sprite can be moved by changing the position (e.g. <code>self.rect.x</code>, <code>self.rect.y</code>) encoded in the rectangle.</p>\n", "abstract": "The 3rd argument of pygame.draw.circle() has to be a tuple with 2 components, the x and y center coordinated of the circle: pygame.draw.circle(self.image,self.color,self.speed,5) In the above example (self.width//2, self.height//2) is the center of the circle and 5 is the radius (in pixel). See also\nPygame Wont Let Me Draw A Circle Error argument 3 must be sequence of length 2, not 4 Furthermore a pygame.sprite.Sprite object should always have a .rect attribute (instance of pygame.Rect): Note, the .rect and .image attribute of the pygame.sprite.Sprite object is used by the .draw(), method of a pygame.sprite.Group to draw the contained sprites. Thus a sprite can be moved by changing the position (e.g. self.rect.x, self.rect.y) encoded in the rectangle."}]}, {"link": "https://stackoverflow.com/questions/60067478/image-does-not-remain-on-screen-after-executing-for-loop-in-pygame", "question": {"id": "60067478", "title": "Image does not remain on screen after executing for loop in pygame", "content": "<p>I have been trying to modify the code from this <a href=\"http://programarcadegames.com/python_examples/f.php?file=bullets.py\" rel=\"nofollow noreferrer\">Tutorial</a> so that after a bullet <strong>strikes</strong> an enemy the <code>player.png</code> image is shown at position <code>x = 60</code> and <code>y = 48</code>. But the image does <strong>not remain fixed</strong>, it just appears and disappears. I don't know exactly where the wrong or missing element is in the code but I suspect that one of the causes is some misuse of my part of the <code>for</code> loop within the <code>draw_reaction</code> function.</p>\n<p><strong>My <a href=\"https://imgur.com/ku97IBL\" rel=\"nofollow noreferrer\">player.png</a> image</strong></p>\n<p><strong>My MWE code:</strong></p>\n<pre><code class=\"python\">import pygame\nimport random\n\n# Define some colors\nBLACK = (0, 0, 0)\nWHITE = (255, 255, 255)\nRED = (255, 0, 0)\nBLUE = (0, 0, 255)\n\n# --- Classes\n\n\nclass Block(pygame.sprite.Sprite):\n    \"\"\" This class represents the block. \"\"\"\n    def __init__(self, color):\n        # Call the parent class (Sprite) constructor\n        super().__init__()\n\n        self.image = pygame.Surface([20, 15])\n        self.image.fill(color)\n\n        self.rect = self.image.get_rect()\n\n\nclass Player(pygame.sprite.Sprite):\n    \"\"\" This class represents the Player. \"\"\"\n\n    def __init__(self):\n        \"\"\" Set up the player on creation. \"\"\"\n        # Call the parent class (Sprite) constructor\n        super().__init__()\n\n        self.image = pygame.Surface([20, 20])\n        self.image.fill(RED)\n\n        self.rect = self.image.get_rect()\n\n    def update(self):\n        \"\"\" Update the player's position. \"\"\"\n        # Get the current mouse position. This returns the position\n        # as a list of two numbers.\n        pos = pygame.mouse.get_pos()\n\n        # Set the player x position to the mouse x position\n        self.rect.x = pos[0]\n\n\nclass Bullet(pygame.sprite.Sprite):\n    \"\"\" This class represents the bullet . \"\"\"\n    def __init__(self):\n        # Call the parent class (Sprite) constructor\n        super().__init__()\n\n        self.image = pygame.Surface([4, 10])\n        self.image.fill(BLACK)\n\n        self.rect = self.image.get_rect()\n\n    def update(self):\n        \"\"\" Move the bullet. \"\"\"\n        self.rect.y -= 3\n\n\n# --- Create the window\n\n# Initialize Pygame\npygame.init()\n\n# Set the height and width of the screen\nscreen_width = 700\nscreen_height = 400\nscreen = pygame.display.set_mode([screen_width, screen_height])\n\n# --- Sprite lists\n\n# This is a list of every sprite. All blocks and the player block as well.\nall_sprites_list = pygame.sprite.Group()\n\n# List of each block in the game\nblock_list = pygame.sprite.Group()\n\n# List of each bullet\nbullet_list = pygame.sprite.Group()\n\n# --- Create the sprites\n\nfor i in range(0,1,2):\n    # This represents a block\n    block = Block(BLUE)\n\n    # Set a random location for the block\n    block.rect.x = random.randrange(screen_width)\n    block.rect.y = random.randrange(350)\n\n    # Add the block to the list of objects\n    block_list.add(block)\n    all_sprites_list.add(block)\n\n# Create a red player block\nplayer = Player()\nall_sprites_list.add(player)\nplayer_image = pygame.image.load(\"player.png\").convert() \n# Loop until the user clicks the close button.\ndone = False\n\n# Used to manage how fast the screen updates\nclock = pygame.time.Clock()\n\nscore = 0\nplayer.rect.y = 370\n\n# -------- Main Program Loop -----------\nwhile not done:\n    # --- Event Processing\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n\n        elif event.type == pygame.MOUSEBUTTONDOWN:\n            # Fire a bullet if the user clicks the mouse button\n            bullet = Bullet()\n            # Set the bullet so it is where the player is\n            bullet.rect.x = player.rect.x\n            bullet.rect.y = player.rect.y\n            # Add the bullet to the lists\n            all_sprites_list.add(bullet)\n            bullet_list.add(bullet)\n\n    # --- Game logic\n\n    # Call the update() method on all the sprites\n\n\n    # Calculate mechanics for each bullet\n    for bullet in bullet_list:\n\n        # See if it hit a block\n        block_hit_list = pygame.sprite.spritecollide(bullet, block_list, True)\n\n        # For each block hit, remove the bullet and add to the score\n        for block in block_hit_list:\n            bullet_list.remove(bullet)\n            all_sprites_list.remove(bullet)\n            score += 1\n            print(score)\n\n        # Remove the bullet if it flies up off the screen\n        if bullet.rect.y &lt; -10:\n            bullet_list.remove(bullet)\n            all_sprites_list.remove(bullet)\n    def draw_reaction():\n        for bullet in bullet_list:\n            block_hit_list = pygame.sprite.spritecollide(bullet, block_list, True)\n            for block in block_hit_list:\n                screen.blit(player_image, [60, 48]) \n    all_sprites_list.update() \n    # --- Draw a frame\n\n    # Clear the screen\n    screen.fill(WHITE)\n    draw_reaction()\n    # Draw all the spites\n    all_sprites_list.draw(screen)\n\n    # Go ahead and update the screen with what we've drawn.\n    pygame.display.flip()\n\n    # --- Limit to 20 frames per second\n    clock.tick(60)\n\npygame.quit()\n</code></pre>\n<p><strong>EDIT UPDATE:</strong> The game has only one enemy that appears in a random place each time the game starts again.</p>\n<p><strong>EDIT UPDATE 2:</strong> I know that in most games after a collision the enemy is removed from the screen. This also happens in my code. But for a particular need of mine I need that, as an consequence, an image (player.png) remains fixed constantly after this bullet collision with the enemy.</p>\n", "abstract": "I have been trying to modify the code from this Tutorial so that after a bullet strikes an enemy the player.png image is shown at position x = 60 and y = 48. But the image does not remain fixed, it just appears and disappears. I don't know exactly where the wrong or missing element is in the code but I suspect that one of the causes is some misuse of my part of the for loop within the draw_reaction function. My player.png image My MWE code: EDIT UPDATE: The game has only one enemy that appears in a random place each time the game starts again. EDIT UPDATE 2: I know that in most games after a collision the enemy is removed from the screen. This also happens in my code. But for a particular need of mine I need that, as an consequence, an image (player.png) remains fixed constantly after this bullet collision with the enemy."}, "answers": [{"id": 60067619, "score": 2, "vote": 0, "content": "<p>The problem is caused by the <code>draw_reaction()</code> function only drawing the <code>player_image</code> during the absolute-time the bullet is colliding with a block.  So it shows the image for a single frame (One 60th of a second), but then on the next loop the collision is no longer occurring (the bullet is removed), so it is never drawn.</p>\n<p>There are a number of ways around this, but I'm not sure of the <em>purpose</em> of showing this bitmap, so maybe they're not as helpful as they should be.</p>\n<p>The easiest fix is to probably turn the player image into a sprite, and simply add it to the existing <code>all_sprites_list</code> when the bullet-hit triggers, and then take it away some time later (or how ever it should work).</p>\n<pre><code class=\"python\">class PlayerShip( pygame.sprite.Sprite ):\n    def __init__(self):\n        super().__init__()\n        self.image = pygame.image.load( \"player.png\" ) #.convert() \n        self.rect  = self.image.get_rect()\n        self.rect.topleft = ( 60, 48 ) \n</code></pre>\n<p>Then later on:</p>\n<pre><code class=\"python\">player_sprite = PlayerShip()\n</code></pre>\n<p>and</p>\n<pre><code class=\"python\">def draw_reaction():\n    for bullet in bullet_list:\n        block_hit_list = pygame.sprite.spritecollide(bullet, block_list, True)\n        for block in block_hit_list:\n            # TODO: ensure it's not showing already\n            all_sprites_list.add( player_sprite )      # add the player sprite \n            break                                      # only add once\n</code></pre>\n<p>EDIT: Code snippets updated based on comment</p>\n", "abstract": "The problem is caused by the draw_reaction() function only drawing the player_image during the absolute-time the bullet is colliding with a block.  So it shows the image for a single frame (One 60th of a second), but then on the next loop the collision is no longer occurring (the bullet is removed), so it is never drawn. There are a number of ways around this, but I'm not sure of the purpose of showing this bitmap, so maybe they're not as helpful as they should be. The easiest fix is to probably turn the player image into a sprite, and simply add it to the existing all_sprites_list when the bullet-hit triggers, and then take it away some time later (or how ever it should work). Then later on: and EDIT: Code snippets updated based on comment"}]}, {"link": "https://stackoverflow.com/questions/56867138/pygame-draw-rect-not-drwaing-another-rectangle", "question": {"id": "56867138", "title": "pygame.draw.rect() not drwaing another rectangle", "content": "<p>I am making a simple graphical game in pygame. I wanted to draw 2 rectangles but it only draws one not the other.</p>\n<p>I made a class of drawing different figures. To fix that issue I removed the class and made a plain function. Id didn't work too. Then I just put the code of function statements in the program. </p>\n<p>The final code I get is this</p>\n<pre class=\"lang-py prettyprint-override\"><code class=\"python\">import pygame\n\nblack = (0,0,0)\nyellow = (200,200,0)\n\ndef drawShopButton():\n    pygame.draw.rect(gameDisplay, black, (690,435,110,65))\n    pygame.display.update()\n    pygame.draw.rect(gameDisplay, yellow, (0,500,110,65))\n    pygame.display.update()\n\npygame.init()\ngameDisplay = pygame.display.set_mode((800, 500))\ngameDisplay.fill((40, 120, 0))\npygame.display.update()\npygame.draw.rect(gameDisplay, black, (690,435,110,65))\npygame.display.update()\nclock = pygame.time.Clock()\nclock.tick(40)\n\npygame.draw.rect(gameDisplay, yellow, (0,500,110,65))\npygame.display.update()\nmouse = pygame.mouse.get_pos()\nclick = pygame.mouse.get_pressed()\nwhile True:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            quit()\n\n    pygame.display.update()\n</code></pre>\n", "abstract": "I am making a simple graphical game in pygame. I wanted to draw 2 rectangles but it only draws one not the other. I made a class of drawing different figures. To fix that issue I removed the class and made a plain function. Id didn't work too. Then I just put the code of function statements in the program.  The final code I get is this"}, "answers": [{"id": 56867417, "score": 2, "vote": 0, "content": "<p>The left top corner of the game board is (0,0) and the bottom right corner is (800,500).\nSo, <code>pygame.draw.rect(gameDisplay, yellow, (0,500,110,65))</code> is trying to draw a rectangle that is starting at the right top of the board and is (110, 65) wide and tall.\nYour code is drawing two rectangles alright, but beyond the visibility scope.</p>\n", "abstract": "The left top corner of the game board is (0,0) and the bottom right corner is (800,500).\nSo, pygame.draw.rect(gameDisplay, yellow, (0,500,110,65)) is trying to draw a rectangle that is starting at the right top of the board and is (110, 65) wide and tall.\nYour code is drawing two rectangles alright, but beyond the visibility scope."}]}, {"link": "https://stackoverflow.com/questions/52140339/create-a-basic-python-interface-to-save-images-drawn-with-a-mouse", "question": {"id": "52140339", "title": "Create a basic Python interface to save images drawn with a mouse", "content": "<p>I am working on the following project and I am having really difficulties in finding the right way of doing that. I would like to build in Python (but I am open to other possibilities) a very basic interface that allows the user to draw with the mouse (or the pen if used on a surface laptop) something and then save the image. Ideally I would like this to work on a website or at least in a jupyter notebook (at least I imagine this to be utterly difficult).</p>\n<p>Anyone can point me in the right direction? The goal would be to use the images as input to a neural network model to demonstrate its result with real life examples.</p>\n<p>I am looking at tk but I don't seem to find much in terms of examples.</p>\n<p>Thanks in advance, Umberto</p>\n", "abstract": "I am working on the following project and I am having really difficulties in finding the right way of doing that. I would like to build in Python (but I am open to other possibilities) a very basic interface that allows the user to draw with the mouse (or the pen if used on a surface laptop) something and then save the image. Ideally I would like this to work on a website or at least in a jupyter notebook (at least I imagine this to be utterly difficult). Anyone can point me in the right direction? The goal would be to use the images as input to a neural network model to demonstrate its result with real life examples. I am looking at tk but I don't seem to find much in terms of examples. Thanks in advance, Umberto"}, "answers": [{"id": 52140437, "score": 1, "vote": 0, "content": "<p>I'd take a look at <code>pyautogui</code> to capture the mouse location then \"draw\" it in <code>matplotlib</code> -- should be able to do this in a loop. You'll want to watch the tkinter window size to sync the mouse coordinates with the relative location.</p>\n<p>Why not just have your script open create a new blank img and automatically open it with paint - then read it on close? Seems easier than creating a drawing GUI.</p>\n", "abstract": "I'd take a look at pyautogui to capture the mouse location then \"draw\" it in matplotlib -- should be able to do this in a loop. You'll want to watch the tkinter window size to sync the mouse coordinates with the relative location. Why not just have your script open create a new blank img and automatically open it with paint - then read it on close? Seems easier than creating a drawing GUI."}, {"id": 52140726, "score": 1, "vote": 0, "content": "<p>Have a look at my Github repository which have exactly what you need.</p>\n<p>Link : <a href=\"https://github.com/avinashkarhana/canvasdraw\" rel=\"nofollow noreferrer\">CanvasDraw Repo</a></p>\n", "abstract": "Have a look at my Github repository which have exactly what you need. Link : CanvasDraw Repo"}, {"id": 52140430, "score": 0, "vote": 0, "content": "<p>Depending on the complexity you could either use tkinter which is a package for complex GUIs or something from the gaming community like pygames. You have user input and graphical output so libraries made for games will do what you want but provide way more stuff then you need. This site might help you: <a href=\"https://www.slant.co/topics/63/~best-drawing-libraries-for-python#3\" rel=\"nofollow noreferrer\">Drawing Libarys</a></p>\n<p>Also the answere <a href=\"https://stackoverflow.com/questions/40604233/draw-on-python-tkinter-canvas-using-mouse-and-obtain-points-to-a-list\">draw-on-python-tkinter-canvas-using-mouse-and-obtain-points-to-a-list</a> might help you.</p>\n", "abstract": "Depending on the complexity you could either use tkinter which is a package for complex GUIs or something from the gaming community like pygames. You have user input and graphical output so libraries made for games will do what you want but provide way more stuff then you need. This site might help you: Drawing Libarys Also the answere draw-on-python-tkinter-canvas-using-mouse-and-obtain-points-to-a-list might help you."}]}]